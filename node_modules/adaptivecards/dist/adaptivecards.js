(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["AdaptiveCards"] = factory();
	else
		root["AdaptiveCards"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/adaptivecards.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/adaptivecards.ts":
/*!******************************!*\
  !*** ./src/adaptivecards.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__exportStar(__webpack_require__(/*! ./serialization */ "./src/serialization.ts"), exports);
__exportStar(__webpack_require__(/*! ./registry */ "./src/registry.ts"), exports);
__exportStar(__webpack_require__(/*! ./card-object */ "./src/card-object.ts"), exports);
__exportStar(__webpack_require__(/*! ./card-elements */ "./src/card-elements.ts"), exports);
__exportStar(__webpack_require__(/*! ./enums */ "./src/enums.ts"), exports);
__exportStar(__webpack_require__(/*! ./host-config */ "./src/host-config.ts"), exports);
__exportStar(__webpack_require__(/*! ./shared */ "./src/shared.ts"), exports);
__exportStar(__webpack_require__(/*! ./utils */ "./src/utils.ts"), exports);


/***/ }),

/***/ "./src/card-elements.ts":
/*!******************************!*\
  !*** ./src/card-elements.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SerializationContext = exports.GlobalRegistry = exports.AdaptiveCard = exports.ContainerWithActions = exports.ColumnSet = exports.Column = exports.Container = exports.BackgroundImage = exports.StylableCardElementContainer = exports.ActionSet = exports.ShowCardAction = exports.HttpAction = exports.HttpHeader = exports.ToggleVisibilityAction = exports.OpenUrlAction = exports.SubmitAction = exports.Action = exports.TimeInput = exports.TimeProperty = exports.DateInput = exports.NumberInput = exports.ChoiceSetInput = exports.Choice = exports.ToggleInput = exports.TextInput = exports.Input = exports.InputValidationOptions = exports.Media = exports.MediaSource = exports.ImageSet = exports.CardElementContainer = exports.Image = exports.FactSet = exports.Fact = exports.RichTextBlock = exports.TextRun = exports.TextBlock = exports.BaseTextBlock = exports.ActionProperty = exports.CardElement = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var host_config_1 = __webpack_require__(/*! ./host-config */ "./src/host-config.ts");
var TextFormatters = __webpack_require__(/*! ./text-formatters */ "./src/text-formatters.ts");
var card_object_1 = __webpack_require__(/*! ./card-object */ "./src/card-object.ts");
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var registry_1 = __webpack_require__(/*! ./registry */ "./src/registry.ts");
var CardElement = /** @class */ (function (_super) {
    __extends(CardElement, _super);
    function CardElement() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._truncatedDueToOverflow = false;
        return _this;
    }
    Object.defineProperty(CardElement.prototype, "lang", {
        get: function () {
            var lang = this.getValue(CardElement.langProperty);
            if (lang) {
                return lang;
            }
            else {
                if (this.parent) {
                    return this.parent.lang;
                }
                else {
                    return undefined;
                }
            }
        },
        set: function (value) {
            this.setValue(CardElement.langProperty, value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isVisible", {
        get: function () {
            return this.getValue(CardElement.isVisibleProperty);
        },
        set: function (value) {
            // If the element is going to be hidden, reset any changes that were due
            // to overflow truncation (this ensures that if the element is later
            // un-hidden it has the right content)
            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && !value) {
                this.undoOverflowTruncation();
            }
            if (this.isVisible !== value) {
                this.setValue(CardElement.isVisibleProperty, value);
                this.updateRenderedElementVisibility();
                if (this._renderedElement) {
                    raiseElementVisibilityChangedEvent(this);
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    CardElement.prototype.internalRenderSeparator = function () {
        var renderedSeparator = Utils.renderSeparation(this.hostConfig, {
            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),
            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,
            lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined
        }, this.separatorOrientation);
        if (shared_1.GlobalSettings.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {
            // Adjust separator's margins if the option to always bleed separators is turned on
            var parentContainer = this.getParentContainer();
            if (parentContainer && parentContainer.getEffectivePadding()) {
                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());
                renderedSeparator.style.marginLeft = "-" + parentPhysicalPadding.left + "px";
                renderedSeparator.style.marginRight = "-" + parentPhysicalPadding.right + "px";
            }
        }
        return renderedSeparator;
    };
    CardElement.prototype.updateRenderedElementVisibility = function () {
        var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : "none";
        if (this._renderedElement) {
            if (displayMode) {
                this._renderedElement.style.display = displayMode;
            }
            else {
                this._renderedElement.style.removeProperty("display");
            }
        }
        if (this._separatorElement) {
            if (this.parent && this.parent.isFirstElement(this)) {
                this._separatorElement.style.display = "none";
            }
            else {
                if (displayMode) {
                    this._separatorElement.style.display = displayMode;
                }
                else {
                    this._separatorElement.style.removeProperty("display");
                }
            }
        }
    };
    CardElement.prototype.hideElementDueToOverflow = function () {
        if (this._renderedElement && this.isVisible) {
            this._renderedElement.style.visibility = "hidden";
            this.isVisible = false;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    CardElement.prototype.showElementHiddenDueToOverflow = function () {
        if (this._renderedElement && !this.isVisible) {
            this._renderedElement.style.removeProperty("visibility");
            this.isVisible = true;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.handleOverflow = function (maxHeight) {
        if (this.isVisible || this.isHiddenDueToOverflow()) {
            var handled = this.truncateOverflow(maxHeight);
            // Even if we were unable to truncate the element to fit this time,
            // it still could have been previously truncated
            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;
            if (!handled) {
                this.hideElementDueToOverflow();
            }
            else if (handled && !this.isVisible) {
                this.showElementHiddenDueToOverflow();
            }
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.resetOverflow = function () {
        var sizeChanged = false;
        if (this._truncatedDueToOverflow) {
            this.undoOverflowTruncation();
            this._truncatedDueToOverflow = false;
            sizeChanged = true;
        }
        if (this.isHiddenDueToOverflow()) {
            this.showElementHiddenDueToOverflow();
        }
        return sizeChanged;
    };
    CardElement.prototype.createPlaceholderElement = function () {
        var styleDefinition = this.getEffectiveStyleDefinition();
        var foregroundCssColor = Utils.stringToCssColor(styleDefinition.foregroundColors.default.subtle);
        var element = document.createElement("div");
        element.style.border = "1px dashed " + foregroundCssColor;
        element.style.padding = "4px";
        element.style.minHeight = "32px";
        element.style.fontSize = "10px";
        element.style.color = foregroundCssColor;
        element.innerText = "Empty " + this.getJsonTypeName();
        return element;
    };
    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {
        if (this.height === "auto") {
            renderedElement.style.flex = "0 0 auto";
        }
        else {
            renderedElement.style.flex = "1 1 auto";
        }
    };
    CardElement.prototype.isDisplayed = function () {
        return this._renderedElement !== undefined && this.isVisible && this._renderedElement.offsetHeight > 0;
    };
    CardElement.prototype.overrideInternalRender = function () {
        return this.internalRender();
    };
    CardElement.prototype.applyPadding = function () {
        if (this.separatorElement) {
            if (shared_1.GlobalSettings.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {
                var padding = new shared_1.PaddingDefinition();
                this.getImmediateSurroundingPadding(padding);
                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
                this.separatorElement.style.marginLeft = "-" + physicalPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + physicalPadding.right + "px";
            }
            else {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    /*
     * Called when this element overflows the bottom of the card.
     * maxHeight will be the amount of space still available on the card (0 if
     * the element is fully off the card).
     */
    CardElement.prototype.truncateOverflow = function (maxHeight) {
        // Child implementations should return true if the element handled
        // the truncation request such that its content fits within maxHeight,
        // false if the element should fall back to being hidden
        return false;
    };
    /*
     * This should reverse any changes performed in truncateOverflow().
     */
    CardElement.prototype.undoOverflowTruncation = function () { };
    CardElement.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition();
    };
    CardElement.prototype.getHasBackground = function () {
        return false;
    };
    CardElement.prototype.getPadding = function () {
        return this._padding;
    };
    CardElement.prototype.setPadding = function (value) {
        this._padding = value;
    };
    CardElement.prototype.shouldSerialize = function (context) {
        return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;
    };
    Object.defineProperty(CardElement.prototype, "useDefaultSizing", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "allowCustomPadding", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Horizontal;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "defaultStyle", {
        get: function () {
            return Enums.ContainerStyle.Default;
        },
        enumerable: false,
        configurable: true
    });
    CardElement.prototype.parse = function (source, context) {
        _super.prototype.parse.call(this, source, context ? context : new SerializationContext());
    };
    CardElement.prototype.toJSON = function (context) {
        return _super.prototype.toJSON.call(this, context ? context : new SerializationContext());
    };
    CardElement.prototype.asString = function () {
        return "";
    };
    CardElement.prototype.isBleeding = function () {
        return false;
    };
    CardElement.prototype.getEffectiveStyle = function () {
        if (this.parent) {
            return this.parent.getEffectiveStyle();
        }
        return this.defaultStyle;
    };
    CardElement.prototype.getEffectiveStyleDefinition = function () {
        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());
    };
    CardElement.prototype.getForbiddenActionTypes = function () {
        return [];
    };
    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {
        if (processTop === void 0) { processTop = true; }
        if (processRight === void 0) { processRight = true; }
        if (processBottom === void 0) { processBottom = true; }
        if (processLeft === void 0) { processLeft = true; }
        if (this.parent) {
            var doProcessTop = processTop && this.parent.isTopElement(this);
            var doProcessRight = processRight && this.parent.isRightMostElement(this);
            var doProcessBottom = processBottom && this.parent.isBottomElement(this);
            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);
            var effectivePadding = this.parent.getEffectivePadding();
            if (effectivePadding) {
                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {
                    result.top = effectivePadding.top;
                    doProcessTop = false;
                }
                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {
                    result.right = effectivePadding.right;
                    doProcessRight = false;
                }
                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {
                    result.bottom = effectivePadding.bottom;
                    doProcessBottom = false;
                }
                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {
                    result.left = effectivePadding.left;
                    doProcessLeft = false;
                }
            }
            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {
                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);
            }
        }
    };
    CardElement.prototype.getActionCount = function () {
        return 0;
    };
    CardElement.prototype.getActionAt = function (index) {
        throw new Error("Index out of range.");
    };
    CardElement.prototype.remove = function () {
        if (this.parent && this.parent instanceof CardElementContainer) {
            return this.parent.removeItem(this);
        }
        return false;
    };
    CardElement.prototype.render = function () {
        this._renderedElement = this.overrideInternalRender();
        this._separatorElement = this.internalRenderSeparator();
        if (this._renderedElement) {
            if (this.customCssSelector) {
                this._renderedElement.classList.add(this.customCssSelector);
            }
            this._renderedElement.style.boxSizing = "border-box";
            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display ? this._renderedElement.style.display : undefined;
            this.adjustRenderedElementSize(this._renderedElement);
            this.updateLayout(false);
        }
        else if (this.isDesignMode()) {
            this._renderedElement = this.createPlaceholderElement();
        }
        return this._renderedElement;
    };
    CardElement.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        this.updateRenderedElementVisibility();
        this.applyPadding();
    };
    CardElement.prototype.indexOf = function (cardElement) {
        return -1;
    };
    CardElement.prototype.isDesignMode = function () {
        var rootElement = this.getRootElement();
        return rootElement instanceof AdaptiveCard && rootElement.designMode;
    };
    CardElement.prototype.isFirstElement = function (element) {
        return true;
    };
    CardElement.prototype.isLastElement = function (element) {
        return true;
    };
    CardElement.prototype.isAtTheVeryLeft = function () {
        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;
    };
    CardElement.prototype.isAtTheVeryRight = function () {
        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;
    };
    CardElement.prototype.isAtTheVeryTop = function () {
        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;
    };
    CardElement.prototype.isAtTheVeryBottom = function () {
        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;
    };
    CardElement.prototype.isBleedingAtTop = function () {
        return false;
    };
    CardElement.prototype.isBleedingAtBottom = function () {
        return false;
    };
    CardElement.prototype.isLeftMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isRightMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isTopElement = function (element) {
        return this.isFirstElement(element);
    };
    CardElement.prototype.isBottomElement = function (element) {
        return this.isLastElement(element);
    };
    CardElement.prototype.isHiddenDueToOverflow = function () {
        return this._renderedElement !== undefined && this._renderedElement.style.visibility == 'hidden';
    };
    CardElement.prototype.getRootElement = function () {
        return this.getRootObject();
    };
    CardElement.prototype.getParentContainer = function () {
        var currentElement = this.parent;
        while (currentElement) {
            if (currentElement instanceof Container) {
                return currentElement;
            }
            currentElement = currentElement.parent;
        }
        return undefined;
    };
    CardElement.prototype.getAllInputs = function () {
        return [];
    };
    CardElement.prototype.getResourceInformation = function () {
        return [];
    };
    CardElement.prototype.getElementById = function (id) {
        return this.id === id ? this : undefined;
    };
    CardElement.prototype.getActionById = function (id) {
        return undefined;
    };
    CardElement.prototype.getEffectivePadding = function () {
        var padding = this.getPadding();
        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();
    };
    Object.defineProperty(CardElement.prototype, "hostConfig", {
        get: function () {
            if (this._hostConfig) {
                return this._hostConfig;
            }
            else {
                if (this.parent) {
                    return this.parent.hostConfig;
                }
                else {
                    return host_config_1.defaultHostConfig;
                }
            }
        },
        set: function (value) {
            this._hostConfig = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "index", {
        get: function () {
            if (this.parent) {
                return this.parent.indexOf(this);
            }
            else {
                return 0;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInteractive", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isStandalone", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInline", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.separatorElement) {
                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());
            }
            else {
                return false;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorElement", {
        get: function () {
            return this._separatorElement;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    CardElement.langProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "lang", true, /^[a-z]{2,3}$/ig);
    CardElement.isVisibleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "isVisible", true);
    CardElement.separatorProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "separator", false);
    CardElement.heightProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_1, "height", [
        { value: "auto" },
        { value: "stretch" }
    ], "auto");
    CardElement.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "horizontalAlignment", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);
    CardElement.spacingProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "spacing", Enums.Spacing, Enums.Spacing.Default);
    __decorate([
        serialization_1.property(CardElement.horizontalAlignmentProperty)
    ], CardElement.prototype, "horizontalAlignment", void 0);
    __decorate([
        serialization_1.property(CardElement.spacingProperty)
    ], CardElement.prototype, "spacing", void 0);
    __decorate([
        serialization_1.property(CardElement.separatorProperty)
    ], CardElement.prototype, "separator", void 0);
    __decorate([
        serialization_1.property(CardElement.heightProperty)
    ], CardElement.prototype, "height", void 0);
    __decorate([
        serialization_1.property(CardElement.langProperty)
    ], CardElement.prototype, "lang", null);
    __decorate([
        serialization_1.property(CardElement.isVisibleProperty)
    ], CardElement.prototype, "isVisible", null);
    return CardElement;
}(card_object_1.CardObject));
exports.CardElement = CardElement;
var ActionProperty = /** @class */ (function (_super) {
    __extends(ActionProperty, _super);
    function ActionProperty(targetVersion, name, forbiddenActionTypes) {
        if (forbiddenActionTypes === void 0) { forbiddenActionTypes = []; }
        var _this = _super.call(this, targetVersion, name, undefined) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.forbiddenActionTypes = forbiddenActionTypes;
        return _this;
    }
    ActionProperty.prototype.parse = function (sender, source, context) {
        var parent = sender;
        return context.parseAction(parent, source[this.name], this.forbiddenActionTypes, parent.isDesignMode());
    };
    ActionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined);
    };
    return ActionProperty;
}(serialization_1.PropertyDefinition));
exports.ActionProperty = ActionProperty;
var BaseTextBlock = /** @class */ (function (_super) {
    __extends(BaseTextBlock, _super);
    function BaseTextBlock() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.size = Enums.TextSize.Default;
        _this.weight = Enums.TextWeight.Default;
        _this.color = Enums.TextColor.Default;
        _this.isSubtle = false;
        return _this;
    }
    BaseTextBlock.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        // selectAction is declared on BaseTextBlock but is only exposed on TextRun,
        // so the property is removed from the BaseTextBlock schema.
        schema.remove(BaseTextBlock.selectActionProperty);
    };
    Object.defineProperty(BaseTextBlock.prototype, "text", {
        get: function () {
            return this.getValue(BaseTextBlock.textProperty);
        },
        set: function (value) {
            this.setText(value);
        },
        enumerable: false,
        configurable: true
    });
    //#endregion
    BaseTextBlock.prototype.getFontSize = function (fontType) {
        switch (this.size) {
            case Enums.TextSize.Small:
                return fontType.fontSizes.small;
            case Enums.TextSize.Medium:
                return fontType.fontSizes.medium;
            case Enums.TextSize.Large:
                return fontType.fontSizes.large;
            case Enums.TextSize.ExtraLarge:
                return fontType.fontSizes.extraLarge;
            default:
                return fontType.fontSizes.default;
        }
    };
    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {
        switch (color) {
            case Enums.TextColor.Accent:
                return colorSet.accent;
            case Enums.TextColor.Dark:
                return colorSet.dark;
            case Enums.TextColor.Light:
                return colorSet.light;
            case Enums.TextColor.Good:
                return colorSet.good;
            case Enums.TextColor.Warning:
                return colorSet.warning;
            case Enums.TextColor.Attention:
                return colorSet.attention;
            default:
                return colorSet.default;
        }
    };
    BaseTextBlock.prototype.setText = function (value) {
        this.setValue(BaseTextBlock.textProperty, value);
    };
    BaseTextBlock.prototype.asString = function () {
        return this.text;
    };
    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {
        var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);
        if (fontType.fontFamily) {
            targetElement.style.fontFamily = fontType.fontFamily;
        }
        var fontSize;
        switch (this.size) {
            case Enums.TextSize.Small:
                fontSize = fontType.fontSizes.small;
                break;
            case Enums.TextSize.Medium:
                fontSize = fontType.fontSizes.medium;
                break;
            case Enums.TextSize.Large:
                fontSize = fontType.fontSizes.large;
                break;
            case Enums.TextSize.ExtraLarge:
                fontSize = fontType.fontSizes.extraLarge;
                break;
            default:
                fontSize = fontType.fontSizes.default;
                break;
        }
        targetElement.style.fontSize = fontSize + "px";
        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);
        var fontWeight;
        switch (this.weight) {
            case Enums.TextWeight.Lighter:
                fontWeight = fontType.fontWeights.lighter;
                break;
            case Enums.TextWeight.Bolder:
                fontWeight = fontType.fontWeights.bolder;
                break;
            default:
                fontWeight = fontType.fontWeights.default;
                break;
        }
        targetElement.style.fontWeight = fontWeight.toString();
    };
    Object.defineProperty(BaseTextBlock.prototype, "effectiveColor", {
        get: function () {
            return this.color ? this.color : Enums.TextColor.Default;
        },
        enumerable: false,
        configurable: true
    });
    BaseTextBlock.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "text", true);
    BaseTextBlock.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "size", Enums.TextSize, Enums.TextSize.Default);
    BaseTextBlock.weightProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "weight", Enums.TextWeight, Enums.TextWeight.Default);
    BaseTextBlock.colorProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "color", Enums.TextColor, Enums.TextColor.Default);
    BaseTextBlock.isSubtleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isSubtle", false);
    BaseTextBlock.fontTypeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "fontType", Enums.FontType);
    BaseTextBlock.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(BaseTextBlock.sizeProperty)
    ], BaseTextBlock.prototype, "size", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.weightProperty)
    ], BaseTextBlock.prototype, "weight", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.colorProperty)
    ], BaseTextBlock.prototype, "color", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.fontTypeProperty)
    ], BaseTextBlock.prototype, "fontType", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.isSubtleProperty)
    ], BaseTextBlock.prototype, "isSubtle", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.textProperty)
    ], BaseTextBlock.prototype, "text", null);
    __decorate([
        serialization_1.property(BaseTextBlock.selectActionProperty)
    ], BaseTextBlock.prototype, "selectAction", void 0);
    return BaseTextBlock;
}(CardElement));
exports.BaseTextBlock = BaseTextBlock;
var TextBlock = /** @class */ (function (_super) {
    __extends(TextBlock, _super);
    function TextBlock() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.wrap = false;
        _this._treatAsPlainText = true;
        _this.useMarkdown = true;
        return _this;
    }
    TextBlock.prototype.restoreOriginalContent = function () {
        if (this.renderedElement !== undefined) {
            if (this.maxLines && this.maxLines > 0) {
                this.renderedElement.style.maxHeight = this._computedLineHeight * this.maxLines + "px";
            }
            this.renderedElement.innerHTML = this._originalInnerHtml;
        }
    };
    TextBlock.prototype.truncateIfSupported = function (maxHeight) {
        if (this.renderedElement !== undefined) {
            // For now, only truncate TextBlocks that contain just a single
            // paragraph -- since the maxLines calculation doesn't take into
            // account Markdown lists
            var children = this.renderedElement.children;
            var isTextOnly = !children.length;
            var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';
            if (truncationSupported) {
                var element = isTextOnly ? this.renderedElement : children[0];
                Utils.truncate(element, maxHeight, this._computedLineHeight);
                return true;
            }
        }
        return false;
    };
    TextBlock.prototype.setText = function (value) {
        _super.prototype.setText.call(this, value);
        this._processedText = undefined;
    };
    TextBlock.prototype.getRenderedDomElementType = function () {
        return "div";
    };
    TextBlock.prototype.internalRender = function () {
        var _this = this;
        this._processedText = undefined;
        if (this.text) {
            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);
            var hostConfig = this.hostConfig;
            var element = document.createElement(this.getRenderedDomElementType());
            element.classList.add(hostConfig.makeCssClassName("ac-textBlock"));
            element.style.overflow = "hidden";
            this.applyStylesTo(element);
            if (this.selectAction) {
                element.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.selectAction) {
                        _this.selectAction.execute();
                    }
                };
                if (hostConfig.supportsInteractivity) {
                    element.tabIndex = 0;
                    element.setAttribute("role", this.selectAction.getAriaRole());
                    if (this.selectAction.title) {
                        element.setAttribute("aria-label", this.selectAction.title);
                    }
                    element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
                }
            }
            if (!this._processedText) {
                this._treatAsPlainText = true;
                var formattedText = TextFormatters.formatText(this.lang, preProcessedText);
                if (this.useMarkdown && formattedText) {
                    if (shared_1.GlobalSettings.allowMarkForTextHighlighting) {
                        formattedText = formattedText.replace(/<mark>/g, "===").replace(/<\/mark>/g, "/==/");
                    }
                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);
                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {
                        this._processedText = markdownProcessingResult.outputHtml;
                        this._treatAsPlainText = false;
                        // Only process <mark> tag if markdown processing was applied because
                        // markdown processing is also responsible for sanitizing the input string
                        if (shared_1.GlobalSettings.allowMarkForTextHighlighting && this._processedText) {
                            var markStyle = "";
                            var effectiveStyle = this.getEffectiveStyleDefinition();
                            if (effectiveStyle.highlightBackgroundColor) {
                                markStyle += "background-color: " + effectiveStyle.highlightBackgroundColor + ";";
                            }
                            if (effectiveStyle.highlightForegroundColor) {
                                markStyle += "color: " + effectiveStyle.highlightForegroundColor + ";";
                            }
                            if (markStyle) {
                                markStyle = 'style="' + markStyle + '"';
                            }
                            this._processedText = this._processedText.replace(/===/g, "<mark " + markStyle + ">").replace(/\/==\//g, "</mark>");
                        }
                    }
                    else {
                        this._processedText = formattedText;
                        this._treatAsPlainText = true;
                    }
                }
                else {
                    this._processedText = formattedText;
                    this._treatAsPlainText = true;
                }
            }
            if (!this._processedText) {
                this._processedText = "";
            }
            if (this._treatAsPlainText) {
                element.innerText = this._processedText;
            }
            else {
                element.innerHTML = this._processedText;
            }
            if (element.firstElementChild instanceof HTMLElement) {
                var firstElementChild = element.firstElementChild;
                firstElementChild.style.marginTop = "0px";
                firstElementChild.style.width = "100%";
                if (!this.wrap) {
                    firstElementChild.style.overflow = "hidden";
                    firstElementChild.style.textOverflow = "ellipsis";
                }
            }
            if (element.lastElementChild instanceof HTMLElement) {
                element.lastElementChild.style.marginBottom = "0px";
            }
            var anchors = element.getElementsByTagName("a");
            for (var i = 0; i < anchors.length; i++) {
                var anchor = anchors[i];
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    if (raiseAnchorClickedEvent(_this, e.target)) {
                        e.preventDefault();
                        e.cancelBubble = true;
                    }
                };
            }
            if (this.wrap) {
                element.style.wordWrap = "break-word";
                if (this.maxLines && this.maxLines > 0) {
                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + "px";
                    element.style.overflow = "hidden";
                }
            }
            else {
                element.style.whiteSpace = "nowrap";
                element.style.textOverflow = "ellipsis";
            }
            if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation || shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
                this._originalInnerHtml = element.innerHTML;
            }
            return element;
        }
        else {
            return undefined;
        }
    };
    TextBlock.prototype.truncateOverflow = function (maxHeight) {
        if (maxHeight >= this._computedLineHeight) {
            return this.truncateIfSupported(maxHeight);
        }
        return false;
    };
    TextBlock.prototype.undoOverflowTruncation = function () {
        this.restoreOriginalContent();
        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {
            var maxHeight = this._computedLineHeight * this.maxLines;
            this.truncateIfSupported(maxHeight);
        }
    };
    TextBlock.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        var parentContainer = this.getParentContainer();
        var isRtl = parentContainer ? parentContainer.isRtl() : false;
        switch (this.horizontalAlignment) {
            case Enums.HorizontalAlignment.Center:
                targetElement.style.textAlign = "center";
                break;
            case Enums.HorizontalAlignment.Right:
                targetElement.style.textAlign = isRtl ? "left" : "right";
                break;
            default:
                targetElement.style.textAlign = isRtl ? "right" : "left";
                break;
        }
        var lineHeights = this.hostConfig.lineHeights;
        if (lineHeights) {
            switch (this.size) {
                case Enums.TextSize.Small:
                    this._computedLineHeight = lineHeights.small;
                    break;
                case Enums.TextSize.Medium:
                    this._computedLineHeight = lineHeights.medium;
                    break;
                case Enums.TextSize.Large:
                    this._computedLineHeight = lineHeights.large;
                    break;
                case Enums.TextSize.ExtraLarge:
                    this._computedLineHeight = lineHeights.extraLarge;
                    break;
                default:
                    this._computedLineHeight = lineHeights.default;
                    break;
            }
        }
        else {
            // Looks like 1.33 is the magic number to compute line-height
            // from font size.
            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;
        }
        targetElement.style.lineHeight = this._computedLineHeight + "px";
    };
    TextBlock.prototype.getJsonTypeName = function () {
        return "TextBlock";
    };
    TextBlock.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = false; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {
            // Reset the element's innerHTML in case the available room for
            // content has increased
            this.restoreOriginalContent();
            this.truncateIfSupported(this._computedLineHeight * this.maxLines);
        }
    };
    TextBlock.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "wrap", false);
    TextBlock.maxLinesProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "maxLines");
    __decorate([
        serialization_1.property(TextBlock.wrapProperty)
    ], TextBlock.prototype, "wrap", void 0);
    __decorate([
        serialization_1.property(TextBlock.maxLinesProperty)
    ], TextBlock.prototype, "maxLines", void 0);
    return TextBlock;
}(BaseTextBlock));
exports.TextBlock = TextBlock;
var Label = /** @class */ (function (_super) {
    __extends(Label, _super);
    function Label() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Label.prototype.getRenderedDomElementType = function () {
        return "label";
    };
    Label.prototype.internalRender = function () {
        var renderedElement = _super.prototype.internalRender.call(this);
        if (renderedElement && this.forElementId) {
            renderedElement.htmlFor = this.forElementId;
        }
        return renderedElement;
    };
    return Label;
}(TextBlock));
var TextRun = /** @class */ (function (_super) {
    __extends(TextRun, _super);
    function TextRun() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.italic = false;
        _this.strikethrough = false;
        _this.highlight = false;
        _this.underline = false;
        return _this;
    }
    TextRun.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.add(BaseTextBlock.selectActionProperty);
    };
    //#endregion
    TextRun.prototype.internalRender = function () {
        var _this = this;
        if (this.text) {
            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);
            var hostConfig = this.hostConfig;
            var formattedText = TextFormatters.formatText(this.lang, preProcessedText);
            if (!formattedText) {
                formattedText = "";
            }
            var element = document.createElement("span");
            element.classList.add(hostConfig.makeCssClassName("ac-textRun"));
            this.applyStylesTo(element);
            if (this.selectAction && hostConfig.supportsInteractivity) {
                var anchor = document.createElement("a");
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                var href = this.selectAction.getHref();
                anchor.href = href ? href : "";
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.selectAction) {
                        _this.selectAction.execute();
                    }
                };
                anchor.innerText = formattedText;
                element.appendChild(anchor);
            }
            else {
                element.innerText = formattedText;
            }
            return element;
        }
        else {
            return undefined;
        }
    };
    TextRun.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        if (this.italic) {
            targetElement.style.fontStyle = "italic";
        }
        if (this.strikethrough) {
            targetElement.style.textDecoration = "line-through";
        }
        if (this.highlight) {
            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);
        }
        if (this.underline) {
            targetElement.style.textDecoration = "underline";
        }
    };
    TextRun.prototype.getJsonTypeName = function () {
        return "TextRun";
    };
    Object.defineProperty(TextRun.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextRun.prototype, "isInline", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    TextRun.italicProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "italic", false);
    TextRun.strikethroughProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "strikethrough", false);
    TextRun.highlightProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "highlight", false);
    TextRun.underlineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, "underline", false);
    __decorate([
        serialization_1.property(TextRun.italicProperty)
    ], TextRun.prototype, "italic", void 0);
    __decorate([
        serialization_1.property(TextRun.strikethroughProperty)
    ], TextRun.prototype, "strikethrough", void 0);
    __decorate([
        serialization_1.property(TextRun.highlightProperty)
    ], TextRun.prototype, "highlight", void 0);
    __decorate([
        serialization_1.property(TextRun.underlineProperty)
    ], TextRun.prototype, "underline", void 0);
    return TextRun;
}(BaseTextBlock));
exports.TextRun = TextRun;
var RichTextBlock = /** @class */ (function (_super) {
    __extends(RichTextBlock, _super);
    function RichTextBlock() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._inlines = [];
        return _this;
    }
    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {
        if (forceAdd === void 0) { forceAdd = false; }
        if (!inline.isInline) {
            throw new Error("RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.");
        }
        var doAdd = inline.parent === undefined || forceAdd;
        if (!doAdd && inline.parent != this) {
            throw new Error("RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.");
        }
        else {
            inline.setParent(this);
            this._inlines.push(inline);
        }
    };
    RichTextBlock.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._inlines = [];
        if (Array.isArray(source["inlines"])) {
            for (var _i = 0, _a = source["inlines"]; _i < _a.length; _i++) {
                var jsonInline = _a[_i];
                var inline = void 0;
                if (typeof jsonInline === "string") {
                    var textRun = new TextRun();
                    textRun.text = jsonInline;
                    inline = textRun;
                }
                else {
                    // No fallback for inlines in 1.2
                    inline = context.parseElement(this, jsonInline, false);
                }
                if (inline) {
                    this.internalAddInline(inline, true);
                }
            }
        }
    };
    RichTextBlock.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        if (this._inlines.length > 0) {
            var jsonInlines = [];
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                jsonInlines.push(inline.toJSON(context));
            }
            context.serializeValue(target, "inlines", jsonInlines);
        }
    };
    RichTextBlock.prototype.internalRender = function () {
        if (this._inlines.length > 0) {
            var element = document.createElement("div");
            element.className = this.hostConfig.makeCssClassName("ac-richTextBlock");
            var parentContainer = this.getParentContainer();
            var isRtl = parentContainer ? parentContainer.isRtl() : false;
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.textAlign = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.textAlign = isRtl ? "left" : "right";
                    break;
                default:
                    element.style.textAlign = isRtl ? "right" : "left";
                    break;
            }
            var renderedInlines = 0;
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                var renderedInline = inline.render();
                if (renderedInline) {
                    element.appendChild(renderedInline);
                    renderedInlines++;
                }
            }
            if (renderedInlines > 0) {
                return element;
            }
        }
        return undefined;
    };
    RichTextBlock.prototype.asString = function () {
        var result = "";
        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
            var inline = _a[_i];
            result += inline.asString();
        }
        return result;
    };
    RichTextBlock.prototype.getJsonTypeName = function () {
        return "RichTextBlock";
    };
    RichTextBlock.prototype.getInlineCount = function () {
        return this._inlines.length;
    };
    RichTextBlock.prototype.getInlineAt = function (index) {
        if (index >= 0 && index < this._inlines.length) {
            return this._inlines[index];
        }
        else {
            throw new Error("RichTextBlock.getInlineAt: Index out of range (" + index + ")");
        }
    };
    RichTextBlock.prototype.addInline = function (inline) {
        this.internalAddInline(inline);
    };
    RichTextBlock.prototype.removeInline = function (inline) {
        var index = this._inlines.indexOf(inline);
        if (index >= 0) {
            this._inlines[index].setParent(undefined);
            this._inlines.splice(index, 1);
            return true;
        }
        return false;
    };
    return RichTextBlock;
}(CardElement));
exports.RichTextBlock = RichTextBlock;
var Fact = /** @class */ (function (_super) {
    __extends(Fact, _super);
    function Fact(name, value) {
        var _this = _super.call(this) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    //#endregion
    Fact.prototype.getSchemaKey = function () {
        return "Fact";
    };
    //#region Schema
    Fact.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Fact.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(Fact.titleProperty)
    ], Fact.prototype, "name", void 0);
    __decorate([
        serialization_1.property(Fact.valueProperty)
    ], Fact.prototype, "value", void 0);
    return Fact;
}(serialization_1.SerializableObject));
exports.Fact = Fact;
var FactSet = /** @class */ (function (_super) {
    __extends(FactSet, _super);
    function FactSet() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(FactSet.prototype, "useDefaultSizing", {
        //#endregion
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    FactSet.prototype.internalRender = function () {
        var element = undefined;
        var hostConfig = this.hostConfig;
        if (this.facts.length > 0) {
            element = document.createElement("table");
            element.style.borderWidth = "0px";
            element.style.borderSpacing = "0px";
            element.style.borderStyle = "none";
            element.style.borderCollapse = "collapse";
            element.style.display = "block";
            element.style.overflow = "hidden";
            element.classList.add(hostConfig.makeCssClassName("ac-factset"));
            element.setAttribute("role", "presentation");
            for (var i = 0; i < this.facts.length; i++) {
                var trElement = document.createElement("tr");
                if (i > 0) {
                    trElement.style.marginTop = hostConfig.factSet.spacing + "px";
                }
                // Title column
                var tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-title"));
                if (hostConfig.factSet.title.maxWidth) {
                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + "px";
                }
                tdElement.style.verticalAlign = "top";
                var textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = (!this.facts[i].name && this.isDesignMode()) ? "Title" : this.facts[i].name;
                textBlock.size = hostConfig.factSet.title.size;
                textBlock.color = hostConfig.factSet.title.color;
                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;
                textBlock.weight = hostConfig.factSet.title.weight;
                textBlock.wrap = hostConfig.factSet.title.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                // Spacer column
                tdElement = document.createElement("td");
                tdElement.style.width = "10px";
                Utils.appendChild(trElement, tdElement);
                // Value column
                tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.style.verticalAlign = "top";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-value"));
                textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = this.facts[i].value;
                textBlock.size = hostConfig.factSet.value.size;
                textBlock.color = hostConfig.factSet.value.color;
                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;
                textBlock.weight = hostConfig.factSet.value.weight;
                textBlock.wrap = hostConfig.factSet.value.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                Utils.appendChild(element, trElement);
            }
        }
        return element;
    };
    FactSet.prototype.getJsonTypeName = function () {
        return "FactSet";
    };
    //#region Schema
    FactSet.factsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "facts", Fact);
    __decorate([
        serialization_1.property(FactSet.factsProperty)
    ], FactSet.prototype, "facts", void 0);
    return FactSet;
}(CardElement));
exports.FactSet = FactSet;
var ImageDimensionProperty = /** @class */ (function (_super) {
    __extends(ImageDimensionProperty, _super);
    function ImageDimensionProperty(targetVersion, name, internalName) {
        var _this = _super.call(this, targetVersion, name) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.internalName = internalName;
        return _this;
    }
    ImageDimensionProperty.prototype.getInternalName = function () {
        return this.internalName;
    };
    ImageDimensionProperty.prototype.parse = function (sender, source, context) {
        var result = undefined;
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.defaultValue;
        }
        var isValid = false;
        if (typeof sourceValue === "string") {
            try {
                var size = shared_1.SizeAndUnit.parse(sourceValue, true);
                if (size.unit == Enums.SizeUnit.Pixel) {
                    result = size.physicalSize;
                    isValid = true;
                }
            }
            catch (_a) {
                // Do nothing. A parse error is emitted below
            }
        }
        if (!isValid) {
            context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid " + this.name + " value: " + sourceValue, sender);
        }
        return result;
    };
    ImageDimensionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, typeof value === "number" && !isNaN(value) ? value + "px" : undefined);
    };
    return ImageDimensionProperty;
}(serialization_1.PropertyDefinition));
var Image = /** @class */ (function (_super) {
    __extends(Image, _super);
    function Image() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.size = Enums.Size.Auto;
        _this.style = Enums.ImageStyle.Default;
        return _this;
    }
    Image.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.remove(CardElement.heightProperty);
    };
    //#endregion
    Image.prototype.applySize = function (element) {
        if (this.pixelWidth || this.pixelHeight) {
            if (this.pixelWidth) {
                element.style.width = this.pixelWidth + "px";
            }
            if (this.pixelHeight) {
                element.style.height = this.pixelHeight + "px";
            }
        }
        else {
            if (this.maxHeight) {
                // If the image is constrained in height, we set its height property and
                // auto and stretch are ignored (default to medium). THis is necessary for
                // ImageSet which uses a maximum image height as opposed to the cards width
                // as a constraining dimension
                switch (this.size) {
                    case Enums.Size.Small:
                        element.style.height = this.hostConfig.imageSizes.small + "px";
                        break;
                    case Enums.Size.Large:
                        element.style.height = this.hostConfig.imageSizes.large + "px";
                        break;
                    default:
                        element.style.height = this.hostConfig.imageSizes.medium + "px";
                        break;
                }
                element.style.maxHeight = this.maxHeight + "px";
            }
            else {
                switch (this.size) {
                    case Enums.Size.Stretch:
                        element.style.width = "100%";
                        break;
                    case Enums.Size.Auto:
                        element.style.maxWidth = "100%";
                        break;
                    case Enums.Size.Small:
                        element.style.width = this.hostConfig.imageSizes.small + "px";
                        break;
                    case Enums.Size.Large:
                        element.style.width = this.hostConfig.imageSizes.large + "px";
                        break;
                    case Enums.Size.Medium:
                        element.style.width = this.hostConfig.imageSizes.medium + "px";
                        break;
                }
                element.style.maxHeight = "100%";
            }
        }
    };
    Object.defineProperty(Image.prototype, "useDefaultSizing", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Image.prototype.internalRender = function () {
        var _this = this;
        var element = undefined;
        if (this.url) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.alignItems = "flex-start";
            element.onkeypress = function (e) {
                if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            element.onclick = function (e) {
                if (_this.selectAction) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            // Cache hostConfig to avoid walking the parent hierarchy multiple times
            var hostConfig = this.hostConfig;
            var imageElement = document.createElement("img");
            imageElement.onload = function (e) {
                raiseImageLoadedEvent(_this);
            };
            imageElement.onerror = function (e) {
                if (_this.renderedElement) {
                    var card = _this.getRootElement();
                    _this.renderedElement.innerHTML = "";
                    if (card && card.designMode) {
                        var errorElement = document.createElement("div");
                        errorElement.style.display = "flex";
                        errorElement.style.alignItems = "center";
                        errorElement.style.justifyContent = "center";
                        errorElement.style.backgroundColor = "#EEEEEE";
                        errorElement.style.color = "black";
                        errorElement.innerText = ":-(";
                        errorElement.style.padding = "10px";
                        _this.applySize(errorElement);
                        _this.renderedElement.appendChild(errorElement);
                    }
                }
                raiseImageLoadedEvent(_this);
            };
            imageElement.style.minWidth = "0";
            imageElement.classList.add(hostConfig.makeCssClassName("ac-image"));
            if (this.selectAction !== undefined && hostConfig.supportsInteractivity) {
                imageElement.tabIndex = 0;
                imageElement.setAttribute("role", this.selectAction.getAriaRole());
                if (this.selectAction.title) {
                    imageElement.setAttribute("aria-label", this.selectAction.title);
                }
                imageElement.classList.add(hostConfig.makeCssClassName("ac-selectable"));
            }
            this.applySize(imageElement);
            if (this.style === Enums.ImageStyle.Person) {
                imageElement.style.borderRadius = "50%";
                imageElement.style.backgroundPosition = "50% 50%";
                imageElement.style.backgroundRepeat = "no-repeat";
            }
            imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);
            imageElement.src = this.preProcessPropertyValue(Image.urlProperty);
            var altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);
            if (altTextProperty) {
                imageElement.alt = altTextProperty;
            }
            element.appendChild(imageElement);
        }
        return element;
    };
    Image.prototype.getJsonTypeName = function () {
        return "Image";
    };
    Image.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.selectAction) {
            result = this.selectAction.getActionById(id);
        }
        return result;
    };
    Image.prototype.getResourceInformation = function () {
        return this.url ? [{ url: this.url, mimeType: "image" }] : [];
    };
    Image.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    Image.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "altText");
    Image.backgroundColorProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "backgroundColor");
    Image.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "style", Enums.ImageStyle, Enums.ImageStyle.Default);
    Image.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "size", Enums.Size, Enums.Size.Auto);
    Image.pixelWidthProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, "width", "pixelWidth");
    Image.pixelHeightProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, "height", "pixelHeight");
    Image.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(Image.urlProperty)
    ], Image.prototype, "url", void 0);
    __decorate([
        serialization_1.property(Image.altTextProperty)
    ], Image.prototype, "altText", void 0);
    __decorate([
        serialization_1.property(Image.backgroundColorProperty)
    ], Image.prototype, "backgroundColor", void 0);
    __decorate([
        serialization_1.property(Image.sizeProperty)
    ], Image.prototype, "size", void 0);
    __decorate([
        serialization_1.property(Image.styleProperty)
    ], Image.prototype, "style", void 0);
    __decorate([
        serialization_1.property(Image.pixelWidthProperty)
    ], Image.prototype, "pixelWidth", void 0);
    __decorate([
        serialization_1.property(Image.pixelHeightProperty)
    ], Image.prototype, "pixelHeight", void 0);
    __decorate([
        serialization_1.property(Image.selectActionProperty)
    ], Image.prototype, "selectAction", void 0);
    return Image;
}(CardElement));
exports.Image = Image;
var CardElementContainer = /** @class */ (function (_super) {
    __extends(CardElementContainer, _super);
    function CardElementContainer() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.allowVerticalOverflow = false;
        return _this;
    }
    CardElementContainer.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        if (!this.isSelectable) {
            schema.remove(CardElementContainer.selectActionProperty);
        }
    };
    //#endregion
    CardElementContainer.prototype.isElementAllowed = function (element) {
        return this.hostConfig.supportsInteractivity || !element.isInteractive;
    };
    CardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new shared_1.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        this.renderedElement.style.marginRight = "0";
        this.renderedElement.style.marginLeft = "0";
    };
    Object.defineProperty(CardElementContainer.prototype, "isSelectable", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    CardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        for (var i = 0; i < this.getItemCount(); i++) {
            var item = this.getItemAt(i);
            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {
                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, "Interactivity is not allowed.");
            }
            if (!this.isElementAllowed(item)) {
                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, "Elements of type " + item.getJsonTypeName() + " are not allowed in this container.");
            }
            item.internalValidateProperties(context);
        }
        if (this._selectAction) {
            this._selectAction.internalValidateProperties(context);
        }
    };
    CardElementContainer.prototype.render = function () {
        var _this = this;
        var element = _super.prototype.render.call(this);
        if (element) {
            var hostConfig = this.hostConfig;
            if (this.allowVerticalOverflow) {
                element.style.overflowX = "hidden";
                element.style.overflowY = "auto";
            }
            if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {
                element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
                element.tabIndex = 0;
                element.setAttribute("role", this._selectAction.getAriaRole());
                if (this._selectAction.title) {
                    element.setAttribute("aria-label", this._selectAction.title);
                }
                element.onclick = function (e) {
                    if (_this._selectAction !== undefined) {
                        e.preventDefault();
                        e.cancelBubble = true;
                        _this._selectAction.execute();
                    }
                };
                element.onkeypress = function (e) {
                    if (_this._selectAction !== undefined && (e.keyCode == 13 || e.keyCode == 32)) {
                        // Enter or space pressed
                        e.preventDefault();
                        e.cancelBubble = true;
                        _this._selectAction.execute();
                    }
                };
            }
        }
        return element;
    };
    CardElementContainer.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (processChildren) {
            for (var i = 0; i < this.getItemCount(); i++) {
                this.getItemAt(i).updateLayout();
            }
        }
    };
    CardElementContainer.prototype.getAllInputs = function () {
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getAllInputs());
        }
        return result;
    };
    CardElementContainer.prototype.getResourceInformation = function () {
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getResourceInformation());
        }
        return result;
    };
    CardElementContainer.prototype.getElementById = function (id) {
        var result = _super.prototype.getElementById.call(this, id);
        if (!result) {
            for (var i = 0; i < this.getItemCount(); i++) {
                result = this.getItemAt(i).getElementById(id);
                if (result) {
                    break;
                }
            }
        }
        return result;
    };
    CardElementContainer.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(CardElementContainer.selectActionProperty)
    ], CardElementContainer.prototype, "_selectAction", void 0);
    return CardElementContainer;
}(CardElement));
exports.CardElementContainer = CardElementContainer;
var ImageSet = /** @class */ (function (_super) {
    __extends(ImageSet, _super);
    function ImageSet() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._images = [];
        _this.imageSize = Enums.ImageSize.Medium;
        return _this;
    }
    //#endregion
    ImageSet.prototype.internalRender = function () {
        var element = undefined;
        if (this._images.length > 0) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.flexWrap = "wrap";
            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {
                var image = _a[_i];
                switch (this.imageSize) {
                    case Enums.ImageSize.Small:
                        image.size = Enums.Size.Small;
                        break;
                    case Enums.ImageSize.Large:
                        image.size = Enums.Size.Large;
                        break;
                    default:
                        image.size = Enums.Size.Medium;
                        break;
                }
                image.maxHeight = this.hostConfig.imageSet.maxImageHeight;
                var renderedImage = image.render();
                if (renderedImage) {
                    renderedImage.style.display = "inline-flex";
                    renderedImage.style.margin = "0px";
                    renderedImage.style.marginRight = "10px";
                    Utils.appendChild(element, renderedImage);
                }
            }
        }
        return element;
    };
    ImageSet.prototype.getItemCount = function () {
        return this._images.length;
    };
    ImageSet.prototype.getItemAt = function (index) {
        return this._images[index];
    };
    ImageSet.prototype.getFirstVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[0] : undefined;
    };
    ImageSet.prototype.getLastVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : undefined;
    };
    ImageSet.prototype.removeItem = function (item) {
        if (item instanceof Image) {
            var itemIndex = this._images.indexOf(item);
            if (itemIndex >= 0) {
                this._images.splice(itemIndex, 1);
                item.setParent(undefined);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ImageSet.prototype.getJsonTypeName = function () {
        return "ImageSet";
    };
    ImageSet.prototype.addImage = function (image) {
        if (!image.parent) {
            this._images.push(image);
            image.setParent(this);
        }
        else {
            throw new Error("This image already belongs to another ImageSet");
        }
    };
    ImageSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;
    };
    ImageSet.imagesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "images", Image, function (sender, item) { item.setParent(sender); });
    ImageSet.imageSizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "imageSize", Enums.ImageSize, Enums.ImageSize.Medium);
    __decorate([
        serialization_1.property(ImageSet.imagesProperty)
    ], ImageSet.prototype, "_images", void 0);
    __decorate([
        serialization_1.property(ImageSet.imageSizeProperty)
    ], ImageSet.prototype, "imageSize", void 0);
    return ImageSet;
}(CardElementContainer));
exports.ImageSet = ImageSet;
var MediaSource = /** @class */ (function (_super) {
    __extends(MediaSource, _super);
    function MediaSource(url, mimeType) {
        var _this = _super.call(this) || this;
        _this.url = url;
        _this.mimeType = mimeType;
        return _this;
    }
    //#endregion
    MediaSource.prototype.getSchemaKey = function () {
        return "MediaSource";
    };
    MediaSource.prototype.isValid = function () {
        return this.mimeType && this.url ? true : false;
    };
    MediaSource.prototype.render = function () {
        var result = undefined;
        if (this.isValid()) {
            result = document.createElement("source");
            result.src = this.url;
            result.type = this.mimeType;
        }
        return result;
    };
    //#region Schema
    MediaSource.mimeTypeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "mimeType");
    MediaSource.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "url");
    __decorate([
        serialization_1.property(MediaSource.mimeTypeProperty)
    ], MediaSource.prototype, "mimeType", void 0);
    __decorate([
        serialization_1.property(MediaSource.urlProperty)
    ], MediaSource.prototype, "url", void 0);
    return MediaSource;
}(serialization_1.SerializableObject));
exports.MediaSource = MediaSource;
var Media = /** @class */ (function (_super) {
    __extends(Media, _super);
    function Media() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.sources = [];
        return _this;
    }
    Media.prototype.getPosterUrl = function () {
        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;
    };
    Media.prototype.processSources = function () {
        this._selectedSources = [];
        this._selectedMediaType = undefined;
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];
            if (mimeComponents.length == 2) {
                if (!this._selectedMediaType) {
                    var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);
                    if (index >= 0) {
                        this._selectedMediaType = Media.supportedMediaTypes[index];
                    }
                }
                if (mimeComponents[0] == this._selectedMediaType) {
                    this._selectedSources.push(source);
                }
            }
        }
    };
    Media.prototype.renderPoster = function () {
        var _this = this;
        var playButtonArrowWidth = 12;
        var playButtonArrowHeight = 15;
        var posterRootElement = document.createElement("div");
        posterRootElement.className = this.hostConfig.makeCssClassName("ac-media-poster");
        posterRootElement.setAttribute("role", "contentinfo");
        posterRootElement.setAttribute("aria-label", this.altText ? this.altText : "Media content");
        posterRootElement.style.position = "relative";
        posterRootElement.style.display = "flex";
        var posterUrl = this.getPosterUrl();
        if (posterUrl) {
            var posterImageElement_1 = document.createElement("img");
            posterImageElement_1.style.width = "100%";
            posterImageElement_1.style.height = "100%";
            posterImageElement_1.onerror = function (e) {
                if (posterImageElement_1.parentNode) {
                    posterImageElement_1.parentNode.removeChild(posterImageElement_1);
                }
                posterRootElement.classList.add("empty");
                posterRootElement.style.minHeight = "150px";
            };
            posterImageElement_1.src = posterUrl;
            posterRootElement.appendChild(posterImageElement_1);
        }
        else {
            posterRootElement.classList.add("empty");
            posterRootElement.style.minHeight = "150px";
        }
        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {
            var playButtonOuterElement = document.createElement("div");
            playButtonOuterElement.tabIndex = 0;
            playButtonOuterElement.setAttribute("role", "button");
            playButtonOuterElement.setAttribute("aria-label", "Play media");
            playButtonOuterElement.className = this.hostConfig.makeCssClassName("ac-media-playButton");
            playButtonOuterElement.style.display = "flex";
            playButtonOuterElement.style.alignItems = "center";
            playButtonOuterElement.style.justifyContent = "center";
            playButtonOuterElement.onclick = function (e) {
                if (_this.hostConfig.media.allowInlinePlayback) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.renderedElement) {
                        var mediaPlayerElement = _this.renderMediaPlayer();
                        _this.renderedElement.innerHTML = "";
                        _this.renderedElement.appendChild(mediaPlayerElement);
                        mediaPlayerElement.play();
                    }
                }
                else {
                    if (Media.onPlay) {
                        e.preventDefault();
                        e.cancelBubble = true;
                        Media.onPlay(_this);
                    }
                }
            };
            var playButtonInnerElement = document.createElement("div");
            playButtonInnerElement.className = this.hostConfig.makeCssClassName("ac-media-playButton-arrow");
            playButtonInnerElement.style.width = playButtonArrowWidth + "px";
            playButtonInnerElement.style.height = playButtonArrowHeight + "px";
            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + "px";
            playButtonInnerElement.style.borderRightWidth = "0";
            playButtonInnerElement.style.borderStyle = "solid";
            playButtonInnerElement.style.borderTopColor = "transparent";
            playButtonInnerElement.style.borderRightColor = "transparent";
            playButtonInnerElement.style.borderBottomColor = "transparent";
            playButtonInnerElement.style.transform = "translate(" + (playButtonArrowWidth / 10) + "px,0px)";
            playButtonOuterElement.appendChild(playButtonInnerElement);
            var playButtonContainer = document.createElement("div");
            playButtonContainer.style.position = "absolute";
            playButtonContainer.style.left = "0";
            playButtonContainer.style.top = "0";
            playButtonContainer.style.width = "100%";
            playButtonContainer.style.height = "100%";
            playButtonContainer.style.display = "flex";
            playButtonContainer.style.justifyContent = "center";
            playButtonContainer.style.alignItems = "center";
            playButtonContainer.appendChild(playButtonOuterElement);
            posterRootElement.appendChild(playButtonContainer);
        }
        return posterRootElement;
    };
    Media.prototype.renderMediaPlayer = function () {
        var mediaElement;
        if (this._selectedMediaType == "video") {
            var videoPlayer = document.createElement("video");
            var posterUrl = this.getPosterUrl();
            if (posterUrl) {
                videoPlayer.poster = posterUrl;
            }
            mediaElement = videoPlayer;
        }
        else {
            mediaElement = document.createElement("audio");
        }
        mediaElement.setAttribute("webkit-playsinline", "");
        mediaElement.setAttribute("playsinline", "");
        mediaElement.autoplay = true;
        mediaElement.controls = true;
        if (Utils.isMobileOS()) {
            mediaElement.muted = true;
        }
        mediaElement.preload = "none";
        mediaElement.style.width = "100%";
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var renderedSource = source.render();
            Utils.appendChild(mediaElement, renderedSource);
        }
        return mediaElement;
    };
    Media.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-media");
        this.processSources();
        element.appendChild(this.renderPoster());
        return element;
    };
    Media.prototype.getJsonTypeName = function () {
        return "Media";
    };
    Media.prototype.getResourceInformation = function () {
        var result = [];
        var posterUrl = this.getPosterUrl();
        if (posterUrl) {
            result.push({ url: posterUrl, mimeType: "image" });
        }
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var mediaSource = _a[_i];
            if (mediaSource.isValid()) {
                result.push({
                    url: mediaSource.url,
                    mimeType: mediaSource.mimeType
                });
            }
        }
        return result;
    };
    Object.defineProperty(Media.prototype, "selectedMediaType", {
        get: function () {
            return this._selectedMediaType;
        },
        enumerable: false,
        configurable: true
    });
    Media.sourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_1, "sources", MediaSource);
    Media.posterProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "poster");
    Media.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "altText");
    //#endregion
    Media.supportedMediaTypes = ["audio", "video"];
    __decorate([
        serialization_1.property(Media.sourcesProperty)
    ], Media.prototype, "sources", void 0);
    __decorate([
        serialization_1.property(Media.posterProperty)
    ], Media.prototype, "poster", void 0);
    __decorate([
        serialization_1.property(Media.altTextProperty)
    ], Media.prototype, "altText", void 0);
    return Media;
}(CardElement));
exports.Media = Media;
var InputValidationOptions = /** @class */ (function (_super) {
    __extends(InputValidationOptions, _super);
    function InputValidationOptions() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.necessity = Enums.InputValidationNecessity.Optional;
        return _this;
    }
    InputValidationOptions.prototype.getSchemaKey = function () {
        return "InputValidationOptions";
    };
    //#endregion
    InputValidationOptions.prototype.internalToJSON = function (target, context) {
        return this.hasAllDefaultValues() ? undefined : _super.prototype.internalToJSON.call(this, target, context);
    };
    InputValidationOptions.necessityProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_3, "necessity", Enums.InputValidationNecessity, Enums.InputValidationNecessity.Optional);
    InputValidationOptions.errorMessageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, "errorMessagwe");
    __decorate([
        serialization_1.property(InputValidationOptions.necessityProperty)
    ], InputValidationOptions.prototype, "necessity", void 0);
    __decorate([
        serialization_1.property(InputValidationOptions.errorMessageProperty)
    ], InputValidationOptions.prototype, "errorMessage", void 0);
    return InputValidationOptions;
}(serialization_1.SerializableObject));
exports.InputValidationOptions = InputValidationOptions;
var Input = /** @class */ (function (_super) {
    __extends(Input, _super);
    function Input() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Input.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        if (!shared_1.GlobalSettings.useBuiltInInputValidation) {
            schema.remove(Input.validationProperty);
        }
    };
    Object.defineProperty(Input.prototype, "validation", {
        get: function () {
            return this.getValue(Input.validationProperty);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "isNullable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "renderedInputControlElement", {
        get: function () {
            return this._renderedInputControlElement;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "inputControlContainerElement", {
        get: function () {
            return this._inputControlContainerElement;
        },
        enumerable: false,
        configurable: true
    });
    Input.prototype.overrideInternalRender = function () {
        var hostConfig = this.hostConfig;
        this._outerContainerElement = document.createElement("div");
        this._outerContainerElement.style.display = "flex";
        this._outerContainerElement.style.flexDirection = "column";
        this._inputControlContainerElement = document.createElement("div");
        this._inputControlContainerElement.className = hostConfig.makeCssClassName("ac-input-container");
        this._inputControlContainerElement.style.display = "flex";
        var renderedInputControlElement = this.internalRender();
        if (renderedInputControlElement) {
            this._renderedInputControlElement = renderedInputControlElement;
            this._renderedInputControlElement.style.minWidth = "0px";
            if (shared_1.GlobalSettings.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {
                this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName("ac-input-required"));
            }
            this._inputControlContainerElement.appendChild(this._renderedInputControlElement);
            this._outerContainerElement.appendChild(this._inputControlContainerElement);
            return this._outerContainerElement;
        }
        return undefined;
    };
    Input.prototype.valueChanged = function () {
        this.resetValidationFailureCue();
        if (this.onValueChanged) {
            this.onValueChanged(this);
        }
        raiseInputValueChangedEvent(this);
    };
    Input.prototype.resetValidationFailureCue = function () {
        if (shared_1.GlobalSettings.useBuiltInInputValidation && this.renderedElement) {
            this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
            if (this._errorMessageElement) {
                this._outerContainerElement.removeChild(this._errorMessageElement);
                this._errorMessageElement = undefined;
            }
        }
    };
    Input.prototype.showValidationErrorMessage = function () {
        if (this.renderedElement && shared_1.GlobalSettings.useBuiltInInputValidation && shared_1.GlobalSettings.displayInputValidationErrors && this.validation.errorMessage) {
            this._errorMessageElement = document.createElement("span");
            this._errorMessageElement.className = this.hostConfig.makeCssClassName("ac-input-validation-error-message");
            this._errorMessageElement.textContent = this.validation.errorMessage;
            this._outerContainerElement.appendChild(this._errorMessageElement);
        }
    };
    Input.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.id) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "All inputs must have a unique Id");
        }
    };
    Input.prototype.validateValue = function () {
        if (shared_1.GlobalSettings.useBuiltInInputValidation) {
            this.resetValidationFailureCue();
            var result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? this.isSet() : true;
            if (!result && this.renderedElement) {
                this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
                this.showValidationErrorMessage();
            }
            return result;
        }
        else {
            return true;
        }
    };
    Input.prototype.getAllInputs = function () {
        return [this];
    };
    Object.defineProperty(Input.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    Input.validationProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_3, "validation", InputValidationOptions);
    __decorate([
        serialization_1.property(Input.validationProperty)
    ], Input.prototype, "validation", null);
    return Input;
}(CardElement));
exports.Input = Input;
var TextInput = /** @class */ (function (_super) {
    __extends(TextInput, _super);
    function TextInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isMultiline = false;
        _this.style = Enums.InputTextStyle.Text;
        return _this;
    }
    //#endregion
    TextInput.prototype.setupInput = function (input) {
        var _this = this;
        input.style.flex = "1 1 auto";
        input.tabIndex = 0;
        if (this.placeholder) {
            input.placeholder = this.placeholder;
            input.setAttribute("aria-label", this.placeholder);
        }
        if (this.defaultValue) {
            input.value = this.defaultValue;
        }
        if (this.maxLength && this.maxLength > 0) {
            input.maxLength = this.maxLength;
        }
        input.oninput = function () { _this.valueChanged(); };
        input.onkeypress = function (e) {
            // Ctrl+Enter pressed
            if (e.keyCode == 10 && _this.inlineAction) {
                _this.inlineAction.execute();
            }
        };
    };
    TextInput.prototype.internalRender = function () {
        var result;
        if (this.isMultiline) {
            result = document.createElement("textarea");
            result.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput", "ac-multiline");
        }
        else {
            result = document.createElement("input");
            result.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput");
            result.type = Enums.InputTextStyle[this.style].toLowerCase();
        }
        this.setupInput(result);
        return result;
    };
    TextInput.prototype.overrideInternalRender = function () {
        var _this = this;
        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);
        if (this.inlineAction) {
            var button_1 = document.createElement("button");
            button_1.className = this.hostConfig.makeCssClassName("ac-inlineActionButton");
            button_1.onclick = function (e) {
                e.preventDefault();
                e.cancelBubble = true;
                if (_this.inlineAction) {
                    _this.inlineAction.execute();
                }
            };
            if (this.inlineAction.iconUrl) {
                button_1.classList.add("iconOnly");
                var icon_1 = document.createElement("img");
                icon_1.style.height = "100%";
                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed
                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant
                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button
                // after the image has loaded and been gicven its final size. The below trick also fixes that.
                icon_1.style.display = "none";
                icon_1.onload = function () {
                    icon_1.style.removeProperty("display");
                };
                icon_1.onerror = function () {
                    button_1.removeChild(icon_1);
                    button_1.classList.remove("iconOnly");
                    button_1.classList.add("textOnly");
                    if (_this.inlineAction) {
                        button_1.textContent = _this.inlineAction.title ? _this.inlineAction.title : "Title";
                    }
                    else {
                        button_1.textContent = "Title";
                    }
                };
                icon_1.src = this.inlineAction.iconUrl;
                button_1.appendChild(icon_1);
                if (this.inlineAction.title) {
                    button_1.title = this.inlineAction.title;
                }
            }
            else {
                button_1.classList.add("textOnly");
                button_1.textContent = this.inlineAction.title ? this.inlineAction.title : "Title";
            }
            button_1.style.marginLeft = "8px";
            this.inputControlContainerElement.appendChild(button_1);
        }
        return renderedInputControl;
    };
    TextInput.prototype.getJsonTypeName = function () {
        return "Input.Text";
    };
    TextInput.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.inlineAction) {
            result = this.inlineAction.getActionById(id);
        }
        return result;
    };
    TextInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(TextInput.prototype, "value", {
        get: function () {
            if (this.renderedInputControlElement) {
                if (this.isMultiline) {
                    return this.renderedInputControlElement.value;
                }
                else {
                    return this.renderedInputControlElement.value;
                }
            }
            else {
                return undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    TextInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    TextInput.maxLengthProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "maxLength");
    TextInput.isMultilineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isMultiline", false);
    TextInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    TextInput.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "style", Enums.InputTextStyle, Enums.InputTextStyle.Text);
    TextInput.inlineActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "inlineAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(TextInput.valueProperty)
    ], TextInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(TextInput.maxLengthProperty)
    ], TextInput.prototype, "maxLength", void 0);
    __decorate([
        serialization_1.property(TextInput.isMultilineProperty)
    ], TextInput.prototype, "isMultiline", void 0);
    __decorate([
        serialization_1.property(TextInput.placeholderProperty)
    ], TextInput.prototype, "placeholder", void 0);
    __decorate([
        serialization_1.property(TextInput.styleProperty)
    ], TextInput.prototype, "style", void 0);
    __decorate([
        serialization_1.property(TextInput.inlineActionProperty)
    ], TextInput.prototype, "inlineAction", void 0);
    return TextInput;
}(Input));
exports.TextInput = TextInput;
var ToggleInput = /** @class */ (function (_super) {
    __extends(ToggleInput, _super);
    function ToggleInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.valueOn = "true";
        _this.valueOff = "false";
        _this.wrap = false;
        return _this;
    }
    ToggleInput.prototype.internalRender = function () {
        var _this = this;
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-input", "ac-toggleInput");
        element.style.width = "100%";
        element.style.display = "flex";
        element.style.alignItems = "center";
        this._checkboxInputElement = document.createElement("input");
        this._checkboxInputElement.id = Utils.generateUniqueId();
        this._checkboxInputElement.type = "checkbox";
        this._checkboxInputElement.style.display = "inline-block";
        this._checkboxInputElement.style.verticalAlign = "middle";
        this._checkboxInputElement.style.margin = "0";
        this._checkboxInputElement.style.flex = "0 0 auto";
        if (this.title) {
            this._checkboxInputElement.setAttribute("aria-label", this.title);
        }
        this._checkboxInputElement.tabIndex = 0;
        if (this.defaultValue == this.valueOn) {
            this._checkboxInputElement.checked = true;
        }
        this._checkboxInputElement.onchange = function () { _this.valueChanged(); };
        Utils.appendChild(element, this._checkboxInputElement);
        if (this.title || this.isDesignMode()) {
            var label = new Label();
            label.setParent(this);
            label.forElementId = this._checkboxInputElement.id;
            label.hostConfig = this.hostConfig;
            label.text = !this.title ? this.getJsonTypeName() : this.title;
            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;
            label.wrap = this.wrap;
            var labelElement = label.render();
            if (labelElement) {
                labelElement.style.display = "inline-block";
                labelElement.style.flex = "1 1 auto";
                labelElement.style.marginLeft = "6px";
                labelElement.style.verticalAlign = "middle";
                var spacerElement = document.createElement("div");
                spacerElement.style.width = "6px";
                Utils.appendChild(element, spacerElement);
                Utils.appendChild(element, labelElement);
            }
        }
        return element;
    };
    Object.defineProperty(ToggleInput.prototype, "isNullable", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    ToggleInput.prototype.getJsonTypeName = function () {
        return "Input.Toggle";
    };
    ToggleInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(ToggleInput.prototype, "value", {
        get: function () {
            if (this._checkboxInputElement) {
                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;
            }
            else {
                return undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    ToggleInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    ToggleInput.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    ToggleInput.valueOnProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "valueOn", true, undefined, "true", function (sender) { return "true"; });
    ToggleInput.valueOffProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "valueOff", true, undefined, "false", function (sender) { return "false"; });
    ToggleInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "wrap", false);
    __decorate([
        serialization_1.property(ToggleInput.valueProperty)
    ], ToggleInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(ToggleInput.titleProperty)
    ], ToggleInput.prototype, "title", void 0);
    __decorate([
        serialization_1.property(ToggleInput.valueOnProperty)
    ], ToggleInput.prototype, "valueOn", void 0);
    __decorate([
        serialization_1.property(ToggleInput.valueOffProperty)
    ], ToggleInput.prototype, "valueOff", void 0);
    __decorate([
        serialization_1.property(ToggleInput.wrapProperty)
    ], ToggleInput.prototype, "wrap", void 0);
    return ToggleInput;
}(Input));
exports.ToggleInput = ToggleInput;
var Choice = /** @class */ (function (_super) {
    __extends(Choice, _super);
    function Choice(title, value) {
        var _this = _super.call(this) || this;
        _this.title = title;
        _this.value = value;
        return _this;
    }
    //#endregion
    Choice.prototype.getSchemaKey = function () {
        return "Choice";
    };
    //#region Schema
    Choice.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Choice.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(Choice.titleProperty)
    ], Choice.prototype, "title", void 0);
    __decorate([
        serialization_1.property(Choice.valueProperty)
    ], Choice.prototype, "value", void 0);
    return Choice;
}(serialization_1.SerializableObject));
exports.Choice = Choice;
var ChoiceSetInput = /** @class */ (function (_super) {
    __extends(ChoiceSetInput, _super);
    function ChoiceSetInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isMultiSelect = false;
        _this.wrap = false;
        _this.choices = [];
        return _this;
    }
    Object.defineProperty(ChoiceSetInput.prototype, "isCompact", {
        get: function () {
            return this.style !== "expanded";
        },
        set: function (value) {
            this.style = value ? undefined : "expanded";
        },
        enumerable: false,
        configurable: true
    });
    ChoiceSetInput.getUniqueCategoryName = function () {
        var uniqueCategoryName = "__ac-category" + ChoiceSetInput.uniqueCategoryCounter;
        ChoiceSetInput.uniqueCategoryCounter++;
        return uniqueCategoryName;
    };
    ChoiceSetInput.prototype.renderCompoundInput = function (cssClassName, type, defaultValues) {
        var _this = this;
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-input", cssClassName);
        element.style.width = "100%";
        this._toggleInputs = [];
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            var input = document.createElement("input");
            input.id = Utils.generateUniqueId();
            input.type = type;
            input.style.margin = "0";
            input.style.display = "inline-block";
            input.style.verticalAlign = "middle";
            input.style.flex = "0 0 auto";
            input.name = this.id ? this.id : this._uniqueCategoryName;
            if (choice.value) {
                input.value = choice.value;
            }
            if (choice.title) {
                input.setAttribute("aria-label", choice.title);
            }
            if (defaultValues && choice.value) {
                if (defaultValues.indexOf(choice.value) >= 0) {
                    input.checked = true;
                }
            }
            input.onchange = function () { _this.valueChanged(); };
            this._toggleInputs.push(input);
            var compoundInput = document.createElement("div");
            compoundInput.style.display = "flex";
            compoundInput.style.alignItems = "center";
            Utils.appendChild(compoundInput, input);
            var label = new Label();
            label.setParent(this);
            label.forElementId = input.id;
            label.hostConfig = this.hostConfig;
            label.text = choice.title ? choice.title : "Choice " + this._toggleInputs.length;
            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;
            label.wrap = this.wrap;
            var labelElement = label.render();
            if (labelElement) {
                labelElement.style.display = "inline-block";
                labelElement.style.flex = "1 1 auto";
                labelElement.style.marginLeft = "6px";
                labelElement.style.verticalAlign = "middle";
                var spacerElement = document.createElement("div");
                spacerElement.style.width = "6px";
                Utils.appendChild(compoundInput, spacerElement);
                Utils.appendChild(compoundInput, labelElement);
            }
            Utils.appendChild(element, compoundInput);
        }
        return element;
    };
    // Make sure `aria-current` is applied to the currently-selected item
    ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {
        var options = this._selectElement.options;
        if (options) {
            for (var i = 0; i < options.length; i++) {
                if (options[i].selected) {
                    options[i].setAttribute("aria-current", "true");
                }
                else {
                    options[i].removeAttribute("aria-current");
                }
            }
        }
    };
    ChoiceSetInput.prototype.internalRender = function () {
        var _this = this;
        this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();
        if (this.isMultiSelect) {
            // Render as a list of toggle inputs
            return this.renderCompoundInput("ac-choiceSetInput-multiSelect", "checkbox", this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : undefined);
        }
        else {
            if (this.style === "expanded") {
                // Render as a series of radio buttons
                return this.renderCompoundInput("ac-choiceSetInput-expanded", "radio", this.defaultValue ? [this.defaultValue] : undefined);
            }
            else {
                // Render as a combo box
                this._selectElement = document.createElement("select");
                this._selectElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-multichoiceInput", "ac-choiceSetInput-compact");
                this._selectElement.style.width = "100%";
                var option = document.createElement("option");
                option.selected = true;
                option.disabled = true;
                option.hidden = true;
                option.value = "";
                if (this.placeholder) {
                    option.text = this.placeholder;
                }
                Utils.appendChild(this._selectElement, option);
                for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
                    var choice = _a[_i];
                    var option_1 = document.createElement("option");
                    option_1.value = choice.value;
                    option_1.text = choice.title;
                    option_1.setAttribute("aria-label", choice.title);
                    if (choice.value == this.defaultValue) {
                        option_1.selected = true;
                    }
                    Utils.appendChild(this._selectElement, option_1);
                }
                this._selectElement.onchange = function () {
                    _this.internalApplyAriaCurrent();
                    _this.valueChanged();
                };
                this.internalApplyAriaCurrent();
                return this._selectElement;
            }
        }
    };
    ChoiceSetInput.prototype.getJsonTypeName = function () {
        return "Input.ChoiceSet";
    };
    ChoiceSetInput.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this.choices.length == 0) {
            context.addFailure(this, Enums.ValidationEvent.CollectionCantBeEmpty, "An Input.ChoiceSet must have at least one choice defined.");
        }
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            if (!choice.title || !choice.value) {
                context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "All choices in an Input.ChoiceSet must have their title and value properties set.");
            }
        }
    };
    ChoiceSetInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(ChoiceSetInput.prototype, "value", {
        get: function () {
            if (!this.isMultiSelect) {
                if (this.isCompact) {
                    if (this._selectElement) {
                        return this._selectElement.selectedIndex > 0 ? this._selectElement.value : undefined;
                    }
                    return undefined;
                }
                else {
                    if (!this._toggleInputs || this._toggleInputs.length == 0) {
                        return undefined;
                    }
                    for (var _i = 0, _a = this._toggleInputs; _i < _a.length; _i++) {
                        var toggleInput = _a[_i];
                        if (toggleInput.checked) {
                            return toggleInput.value;
                        }
                    }
                    return undefined;
                }
            }
            else {
                if (!this._toggleInputs || this._toggleInputs.length == 0) {
                    return undefined;
                }
                var result = "";
                for (var _b = 0, _c = this._toggleInputs; _b < _c.length; _b++) {
                    var toggleInput = _c[_b];
                    if (toggleInput.checked) {
                        if (result != "") {
                            result += this.hostConfig.choiceSetInputValueSeparator;
                        }
                        result += toggleInput.value;
                    }
                }
                return result ? result : undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    ChoiceSetInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    ChoiceSetInput.choicesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "choices", Choice);
    ChoiceSetInput.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, "style", [
        { value: "compact" },
        { value: "expanded" }
    ], "compact");
    ChoiceSetInput.isMultiSelectProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isMultiSelect", false);
    ChoiceSetInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    ChoiceSetInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "wrap", false);
    //#endregion
    ChoiceSetInput.uniqueCategoryCounter = 0;
    __decorate([
        serialization_1.property(ChoiceSetInput.valueProperty)
    ], ChoiceSetInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.styleProperty)
    ], ChoiceSetInput.prototype, "style", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.isMultiSelectProperty)
    ], ChoiceSetInput.prototype, "isMultiSelect", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.placeholderProperty)
    ], ChoiceSetInput.prototype, "placeholder", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.wrapProperty)
    ], ChoiceSetInput.prototype, "wrap", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.choicesProperty)
    ], ChoiceSetInput.prototype, "choices", void 0);
    return ChoiceSetInput;
}(Input));
exports.ChoiceSetInput = ChoiceSetInput;
var NumberInput = /** @class */ (function (_super) {
    __extends(NumberInput, _super);
    function NumberInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumberInput.prototype.internalRender = function () {
        var _this = this;
        this._numberInputElement = document.createElement("input");
        this._numberInputElement.setAttribute("type", "number");
        if (this.min) {
            this._numberInputElement.setAttribute("min", this.min.toString());
        }
        if (this.max) {
            this._numberInputElement.setAttribute("max", this.max.toString());
        }
        this._numberInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-numberInput");
        this._numberInputElement.style.width = "100%";
        this._numberInputElement.tabIndex = 0;
        if (this.defaultValue !== undefined) {
            this._numberInputElement.valueAsNumber = this.defaultValue;
        }
        if (this.placeholder) {
            this._numberInputElement.placeholder = this.placeholder;
            this._numberInputElement.setAttribute("aria-label", this.placeholder);
        }
        this._numberInputElement.oninput = function () { _this.valueChanged(); };
        return this._numberInputElement;
    };
    NumberInput.prototype.getJsonTypeName = function () {
        return "Input.Number";
    };
    NumberInput.prototype.isSet = function () {
        return this.value !== undefined && !isNaN(this.value);
    };
    Object.defineProperty(NumberInput.prototype, "value", {
        get: function () {
            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    NumberInput.valueProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "value");
    NumberInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    NumberInput.minProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "min");
    NumberInput.maxProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(NumberInput.valueProperty)
    ], NumberInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(NumberInput.minProperty)
    ], NumberInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(NumberInput.maxProperty)
    ], NumberInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(NumberInput.placeholderProperty)
    ], NumberInput.prototype, "placeholder", void 0);
    return NumberInput;
}(Input));
exports.NumberInput = NumberInput;
var DateInput = /** @class */ (function (_super) {
    __extends(DateInput, _super);
    function DateInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateInput.prototype.internalRender = function () {
        var _this = this;
        this._dateInputElement = document.createElement("input");
        this._dateInputElement.setAttribute("type", "date");
        if (this.min) {
            this._dateInputElement.setAttribute("min", this.min);
        }
        if (this.max) {
            this._dateInputElement.setAttribute("max", this.max);
        }
        if (this.placeholder) {
            this._dateInputElement.placeholder = this.placeholder;
            this._dateInputElement.setAttribute("aria-label", this.placeholder);
        }
        this._dateInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-dateInput");
        this._dateInputElement.style.width = "100%";
        this._dateInputElement.oninput = function () { _this.valueChanged(); };
        if (this.defaultValue) {
            this._dateInputElement.value = this.defaultValue;
        }
        return this._dateInputElement;
    };
    DateInput.prototype.getJsonTypeName = function () {
        return "Input.Date";
    };
    DateInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(DateInput.prototype, "value", {
        get: function () {
            return this._dateInputElement ? this._dateInputElement.value : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    DateInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    DateInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    DateInput.minProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "min");
    DateInput.maxProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(DateInput.valueProperty)
    ], DateInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(DateInput.minProperty)
    ], DateInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(DateInput.maxProperty)
    ], DateInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(DateInput.placeholderProperty)
    ], DateInput.prototype, "placeholder", void 0);
    return DateInput;
}(Input));
exports.DateInput = DateInput;
var TimeProperty = /** @class */ (function (_super) {
    __extends(TimeProperty, _super);
    function TimeProperty(targetVersion, name) {
        var _this = _super.call(this, targetVersion, name, function (sender, property, source, context) {
            var value = source[property.name];
            if (typeof value === "string" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {
                return value;
            }
            return undefined;
        }, function (sender, property, target, value, context) {
            context.serializeValue(target, property.name, value);
        }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        return _this;
    }
    return TimeProperty;
}(serialization_1.CustomProperty));
exports.TimeProperty = TimeProperty;
var TimeInput = /** @class */ (function (_super) {
    __extends(TimeInput, _super);
    function TimeInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeInput.prototype.internalRender = function () {
        var _this = this;
        this._timeInputElement = document.createElement("input");
        this._timeInputElement.setAttribute("type", "time");
        this._timeInputElement.setAttribute("min", this.min);
        this._timeInputElement.setAttribute("max", this.max);
        this._timeInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-timeInput");
        this._timeInputElement.style.width = "100%";
        this._timeInputElement.oninput = function () { _this.valueChanged(); };
        if (this.placeholder) {
            this._timeInputElement.placeholder = this.placeholder;
            this._timeInputElement.setAttribute("aria-label", this.placeholder);
        }
        if (this.defaultValue) {
            this._timeInputElement.value = this.defaultValue;
        }
        return this._timeInputElement;
    };
    TimeInput.prototype.getJsonTypeName = function () {
        return "Input.Time";
    };
    TimeInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(TimeInput.prototype, "value", {
        get: function () {
            return this._timeInputElement ? this._timeInputElement.value : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    TimeInput.valueProperty = new TimeProperty(serialization_1.Versions.v1_0, "value");
    TimeInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    TimeInput.minProperty = new TimeProperty(serialization_1.Versions.v1_0, "min");
    TimeInput.maxProperty = new TimeProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(TimeInput.valueProperty)
    ], TimeInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(TimeInput.minProperty)
    ], TimeInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(TimeInput.maxProperty)
    ], TimeInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(TimeInput.placeholderProperty)
    ], TimeInput.prototype, "placeholder", void 0);
    return TimeInput;
}(Input));
exports.TimeInput = TimeInput;
var ActionButton = /** @class */ (function () {
    function ActionButton(action, parentContainerStyle) {
        this._state = 0 /* Normal */;
        this.action = action;
        this._parentContainerStyle = parentContainerStyle;
    }
    ActionButton.prototype.updateCssStyle = function () {
        var _a, _b;
        if (this.action.parent && this.action.renderedElement) {
            var hostConfig = this.action.parent.hostConfig;
            this.action.renderedElement.className = hostConfig.makeCssClassName("ac-pushButton");
            if (this._parentContainerStyle) {
                this.action.renderedElement.classList.add("style-" + this._parentContainerStyle);
            }
            this.action.updateActionButtonCssStyle(this.action.renderedElement, this._state);
            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("expanded"));
            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("subdued"));
            switch (this._state) {
                case 1 /* Expanded */:
                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName("expanded"));
                    break;
                case 2 /* Subdued */:
                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName("subdued"));
                    break;
            }
            if (this.action.style) {
                if (this.action.style === Enums.ActionStyle.Positive) {
                    (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames("primary", "style-positive"));
                }
                else {
                    (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames("style-" + this.action.style.toLowerCase()));
                }
            }
        }
    };
    ActionButton.prototype.render = function () {
        var _this = this;
        this.action.render();
        if (this.action.renderedElement) {
            this.action.renderedElement.onclick = function (e) {
                e.preventDefault();
                e.cancelBubble = true;
                _this.click();
            };
            this.updateCssStyle();
        }
    };
    ActionButton.prototype.click = function () {
        if (this.onClick !== undefined) {
            this.onClick(this);
        }
    };
    Object.defineProperty(ActionButton.prototype, "state", {
        get: function () {
            return this._state;
        },
        set: function (value) {
            this._state = value;
            this.updateCssStyle();
        },
        enumerable: false,
        configurable: true
    });
    return ActionButton;
}());
var Action = /** @class */ (function (_super) {
    __extends(Action, _super);
    function Action() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.style = Enums.ActionStyle.Default;
        return _this;
    }
    Action.prototype.addCssClasses = function (element) {
        // Do nothing in base implementation
    };
    Action.prototype.internalGetReferencedInputs = function (allInputs) {
        return {};
    };
    Action.prototype.internalPrepareForExecution = function (inputs) {
        // Do nothing in base implementation
    };
    Action.prototype.internalValidateInputs = function (referencedInputs) {
        var result = [];
        if (shared_1.GlobalSettings.useBuiltInInputValidation && !this.ignoreInputValidation && referencedInputs) {
            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {
                var key = _a[_i];
                var input = referencedInputs[key];
                if (!input.validateValue()) {
                    result.push(input);
                }
            }
        }
        return result;
    };
    Action.prototype.shouldSerialize = function (context) {
        return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;
    };
    Action.prototype.getHref = function () {
        return "";
    };
    Action.prototype.getAriaRole = function () {
        return "button";
    };
    Action.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {
        if (buttonState === void 0) { buttonState = 0 /* Normal */; }
        // Do nothing in base implementation
    };
    Action.prototype.parse = function (source, context) {
        return _super.prototype.parse.call(this, source, context ? context : new SerializationContext());
    };
    Action.prototype.toJSON = function (context) {
        return _super.prototype.toJSON.call(this, context ? context : new SerializationContext());
    };
    Action.prototype.render = function (baseCssClass) {
        if (baseCssClass === void 0) { baseCssClass = "ac-pushButton"; }
        // Cache hostConfig for perf
        var hostConfig = this.hostConfig;
        var buttonElement = document.createElement("button");
        this.addCssClasses(buttonElement);
        if (this.title) {
            buttonElement.setAttribute("aria-label", this.title);
        }
        buttonElement.type = "button";
        buttonElement.style.display = "flex";
        buttonElement.style.alignItems = "center";
        buttonElement.style.justifyContent = "center";
        buttonElement.setAttribute("role", this.getAriaRole());
        var titleElement = document.createElement("div");
        titleElement.style.overflow = "hidden";
        titleElement.style.textOverflow = "ellipsis";
        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {
            titleElement.style.whiteSpace = "nowrap";
        }
        if (this.title) {
            titleElement.innerText = this.title;
        }
        if (!this.iconUrl) {
            buttonElement.classList.add("noIcon");
            buttonElement.appendChild(titleElement);
        }
        else {
            var iconElement = document.createElement("img");
            iconElement.src = this.iconUrl;
            iconElement.style.width = hostConfig.actions.iconSize + "px";
            iconElement.style.height = hostConfig.actions.iconSize + "px";
            iconElement.style.flex = "0 0 auto";
            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {
                buttonElement.classList.add("iconAbove");
                buttonElement.style.flexDirection = "column";
                if (this.title) {
                    iconElement.style.marginBottom = "6px";
                }
            }
            else {
                buttonElement.classList.add("iconLeft");
                iconElement.style.maxHeight = "100%";
                if (this.title) {
                    iconElement.style.marginRight = "6px";
                }
            }
            buttonElement.appendChild(iconElement);
            buttonElement.appendChild(titleElement);
        }
        this._renderedElement = buttonElement;
    };
    Action.prototype.execute = function () {
        if (this.onExecute) {
            this.onExecute(this);
        }
        raiseExecuteActionEvent(this);
    };
    Action.prototype.prepareForExecution = function () {
        var referencedInputs = this.getReferencedInputs();
        if (this.internalValidateInputs(referencedInputs).length > 0) {
            return false;
        }
        this.internalPrepareForExecution(referencedInputs);
        return true;
    };
    ;
    Action.prototype.remove = function () {
        if (this._actionCollection) {
            return this._actionCollection.removeAction(this);
        }
        return false;
    };
    Action.prototype.getAllInputs = function () {
        return [];
    };
    Action.prototype.getResourceInformation = function () {
        return this.iconUrl ? [{ url: this.iconUrl, mimeType: "image" }] : [];
    };
    Action.prototype.getActionById = function (id) {
        return this.id === id ? this : undefined;
    };
    Action.prototype.getReferencedInputs = function () {
        return this.parent ? this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs()) : undefined;
    };
    Action.prototype.validateInputs = function () {
        return this.internalValidateInputs(this.getReferencedInputs());
    };
    Object.defineProperty(Action.prototype, "isPrimary", {
        get: function () {
            return this.style == Enums.ActionStyle.Positive;
        },
        set: function (value) {
            if (value) {
                this.style = Enums.ActionStyle.Positive;
            }
            else {
                if (this.style == Enums.ActionStyle.Positive) {
                    this.style = Enums.ActionStyle.Default;
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "ignoreInputValidation", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "hostConfig", {
        get: function () {
            return this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    Action.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Action.iconUrlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "iconUrl");
    Action.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_2, "style", [
        { value: Enums.ActionStyle.Default },
        { value: Enums.ActionStyle.Positive },
        { value: Enums.ActionStyle.Destructive }
    ], Enums.ActionStyle.Default);
    // TODO: Revise this when finalizing input validation
    Action.ignoreInputValidationProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, "ignoreInputValidation", false);
    __decorate([
        serialization_1.property(Action.titleProperty)
    ], Action.prototype, "title", void 0);
    __decorate([
        serialization_1.property(Action.iconUrlProperty)
    ], Action.prototype, "iconUrl", void 0);
    __decorate([
        serialization_1.property(Action.styleProperty)
    ], Action.prototype, "style", void 0);
    return Action;
}(card_object_1.CardObject));
exports.Action = Action;
var SubmitAction = /** @class */ (function (_super) {
    __extends(SubmitAction, _super);
    function SubmitAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._ignoreInputValidation = false;
        _this._isPrepared = false;
        return _this;
    }
    SubmitAction.prototype.internalGetReferencedInputs = function (allInputs) {
        var result = {};
        for (var _i = 0, allInputs_1 = allInputs; _i < allInputs_1.length; _i++) {
            var input = allInputs_1[_i];
            if (input.id) {
                result[input.id] = input;
            }
        }
        return result;
    };
    SubmitAction.prototype.internalPrepareForExecution = function (inputs) {
        if (this._originalData) {
            this._processedData = JSON.parse(JSON.stringify(this._originalData));
        }
        else {
            this._processedData = {};
        }
        if (this._processedData && inputs) {
            for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
                var key = _a[_i];
                var input = inputs[key];
                if (input.id) {
                    this._processedData[input.id] = input.value;
                }
            }
        }
        this._isPrepared = true;
    };
    SubmitAction.prototype.getJsonTypeName = function () {
        return SubmitAction.JsonTypeName;
    };
    Object.defineProperty(SubmitAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubmitAction.prototype, "data", {
        get: function () {
            return this._isPrepared ? this._processedData : this._originalData;
        },
        set: function (value) {
            this._originalData = value;
            this._isPrepared = false;
        },
        enumerable: false,
        configurable: true
    });
    SubmitAction.dataProperty = new serialization_1.PropertyDefinition(serialization_1.Versions.v1_0, "data");
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    SubmitAction.JsonTypeName = "Action.Submit";
    __decorate([
        serialization_1.property(SubmitAction.dataProperty)
    ], SubmitAction.prototype, "_originalData", void 0);
    __decorate([
        serialization_1.property(Action.ignoreInputValidationProperty)
    ], SubmitAction.prototype, "_ignoreInputValidation", void 0);
    return SubmitAction;
}(Action));
exports.SubmitAction = SubmitAction;
var OpenUrlAction = /** @class */ (function (_super) {
    __extends(OpenUrlAction, _super);
    function OpenUrlAction() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OpenUrlAction.prototype.getJsonTypeName = function () {
        return OpenUrlAction.JsonTypeName;
    };
    OpenUrlAction.prototype.getAriaRole = function () {
        return "link";
    };
    OpenUrlAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.url) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "An Action.OpenUrl must have its url property set.");
        }
    };
    OpenUrlAction.prototype.getHref = function () {
        return this.url;
    };
    //#region Schema
    OpenUrlAction.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    OpenUrlAction.JsonTypeName = "Action.OpenUrl";
    __decorate([
        serialization_1.property(OpenUrlAction.urlProperty)
    ], OpenUrlAction.prototype, "url", void 0);
    return OpenUrlAction;
}(Action));
exports.OpenUrlAction = OpenUrlAction;
var ToggleVisibilityAction = /** @class */ (function (_super) {
    __extends(ToggleVisibilityAction, _super);
    function ToggleVisibilityAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.targetElements = {};
        return _this;
    }
    ToggleVisibilityAction.prototype.getJsonTypeName = function () {
        return ToggleVisibilityAction.JsonTypeName;
    };
    ToggleVisibilityAction.prototype.execute = function () {
        if (this.parent) {
            for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {
                var elementId = _a[_i];
                var targetElement = this.parent.getRootElement().getElementById(elementId);
                if (targetElement) {
                    if (typeof this.targetElements[elementId] === "boolean") {
                        targetElement.isVisible = this.targetElements[elementId];
                    }
                    else {
                        targetElement.isVisible = !targetElement.isVisible;
                    }
                }
            }
        }
    };
    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {
        if (isVisible === void 0) { isVisible = undefined; }
        this.targetElements[elementId] = isVisible;
    };
    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {
        delete this.targetElements[elementId];
    };
    ToggleVisibilityAction.targetElementsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_2, "targetElements", function (sender, property, source, context) {
        var result = {};
        if (Array.isArray(source[property.name])) {
            for (var _i = 0, _a = source[property.name]; _i < _a.length; _i++) {
                var item = _a[_i];
                if (typeof item === "string") {
                    result[item] = undefined;
                }
                else if (typeof item === "object") {
                    var elementId = item["elementId"];
                    if (typeof elementId === "string") {
                        result[elementId] = Utils.parseBool(item["isVisible"]);
                    }
                }
            }
        }
        return result;
    }, function (sender, property, target, value, context) {
        var targetElements = [];
        for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {
            var id = _a[_i];
            if (typeof value[id] === "boolean") {
                targetElements.push({
                    elementId: id,
                    isVisible: value[id]
                });
            }
            else {
                targetElements.push(id);
            }
        }
        context.serializeArray(target, property.name, targetElements);
    }, {}, function (sender) { return {}; });
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ToggleVisibilityAction.JsonTypeName = "Action.ToggleVisibility";
    __decorate([
        serialization_1.property(ToggleVisibilityAction.targetElementsProperty)
    ], ToggleVisibilityAction.prototype, "targetElements", void 0);
    return ToggleVisibilityAction;
}(Action));
exports.ToggleVisibilityAction = ToggleVisibilityAction;
var StringWithSubstitutionProperty = /** @class */ (function (_super) {
    __extends(StringWithSubstitutionProperty, _super);
    function StringWithSubstitutionProperty(targetVersion, name) {
        var _this = _super.call(this, targetVersion, name, undefined, function () { return new shared_1.StringWithSubstitutions(); }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        return _this;
    }
    StringWithSubstitutionProperty.prototype.parse = function (sender, source, context) {
        var result = new shared_1.StringWithSubstitutions();
        result.set(Utils.parseString(source[this.name]));
        return result;
    };
    StringWithSubstitutionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value.getOriginal());
    };
    return StringWithSubstitutionProperty;
}(serialization_1.PropertyDefinition));
var HttpHeader = /** @class */ (function (_super) {
    __extends(HttpHeader, _super);
    //#endregion
    function HttpHeader(name, value) {
        if (name === void 0) { name = ""; }
        if (value === void 0) { value = ""; }
        var _this = _super.call(this) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    HttpHeader.prototype.getSchemaKey = function () {
        return "HttpHeader";
    };
    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        this._value.getReferencedInputs(inputs, referencedInputs);
    };
    HttpHeader.prototype.prepareForExecution = function (inputs) {
        this._value.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);
    };
    Object.defineProperty(HttpHeader.prototype, "value", {
        get: function () {
            return this._value.get();
        },
        set: function (newValue) {
            this._value.set(newValue);
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    HttpHeader.nameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "name");
    HttpHeader.valueProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(HttpHeader.nameProperty)
    ], HttpHeader.prototype, "name", void 0);
    __decorate([
        serialization_1.property(HttpHeader.valueProperty)
    ], HttpHeader.prototype, "_value", void 0);
    return HttpHeader;
}(serialization_1.SerializableObject));
exports.HttpHeader = HttpHeader;
var HttpAction = /** @class */ (function (_super) {
    __extends(HttpAction, _super);
    function HttpAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._ignoreInputValidation = false;
        return _this;
    }
    HttpAction.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.add(Action.ignoreInputValidationProperty);
    };
    HttpAction.prototype.internalGetReferencedInputs = function (allInputs) {
        var result = {};
        this._url.getReferencedInputs(allInputs, result);
        for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
            var header = _a[_i];
            header.getReferencedInputs(allInputs, result);
        }
        this._body.getReferencedInputs(allInputs, result);
        return result;
    };
    HttpAction.prototype.internalPrepareForExecution = function (inputs) {
        if (inputs) {
            this._url.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);
            var contentType = shared_1.ContentTypes.applicationJson;
            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
                var header = _a[_i];
                header.prepareForExecution(inputs);
                if (header.name && header.name.toLowerCase() == "content-type") {
                    contentType = header.value;
                }
            }
            this._body.substituteInputValues(inputs, contentType);
        }
    };
    ;
    HttpAction.prototype.getJsonTypeName = function () {
        return HttpAction.JsonTypeName;
    };
    HttpAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.url) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "An Action.Http must have its url property set.");
        }
        if (this.headers.length > 0) {
            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
                var header = _a[_i];
                if (!header.name) {
                    context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "All headers of an Action.Http must have their name and value properties set.");
                }
            }
        }
    };
    Object.defineProperty(HttpAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "url", {
        get: function () {
            return this._url.get();
        },
        set: function (value) {
            this._url.set(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "body", {
        get: function () {
            return this._body.get();
        },
        set: function (value) {
            this._body.set(value);
        },
        enumerable: false,
        configurable: true
    });
    HttpAction.urlProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "url");
    HttpAction.bodyProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "body");
    HttpAction.methodProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "method");
    HttpAction.headersProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "headers", HttpHeader);
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    HttpAction.JsonTypeName = "Action.Http";
    __decorate([
        serialization_1.property(HttpAction.urlProperty)
    ], HttpAction.prototype, "_url", void 0);
    __decorate([
        serialization_1.property(HttpAction.bodyProperty)
    ], HttpAction.prototype, "_body", void 0);
    __decorate([
        serialization_1.property(HttpAction.methodProperty)
    ], HttpAction.prototype, "method", void 0);
    __decorate([
        serialization_1.property(HttpAction.headersProperty)
    ], HttpAction.prototype, "headers", void 0);
    __decorate([
        serialization_1.property(Action.ignoreInputValidationProperty)
    ], HttpAction.prototype, "_ignoreInputValidation", void 0);
    return HttpAction;
}(Action));
exports.HttpAction = HttpAction;
var ShowCardAction = /** @class */ (function (_super) {
    __extends(ShowCardAction, _super);
    function ShowCardAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.card = new InlineAdaptiveCard();
        return _this;
    }
    ShowCardAction.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        var jsonCard = source["card"];
        if (jsonCard) {
            this.card.parse(jsonCard, context);
        }
        else {
            context.logParseEvent(Enums.ValidationEvent.PropertyCantBeNull, "An Action.ShowCard must have its \"card\" property set to a valid AdaptiveCard object.", this);
        }
    };
    ShowCardAction.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        if (this.card) {
            context.serializeValue(target, "card", this.card.toJSON(context));
        }
    };
    ShowCardAction.prototype.addCssClasses = function (element) {
        _super.prototype.addCssClasses.call(this, element);
        if (this.parent) {
            element.classList.add(this.parent.hostConfig.makeCssClassName("expandable"));
        }
    };
    ShowCardAction.prototype.getJsonTypeName = function () {
        return ShowCardAction.JsonTypeName;
    };
    ShowCardAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this.card.internalValidateProperties(context);
    };
    ShowCardAction.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {
        if (buttonState === void 0) { buttonState = 0 /* Normal */; }
        _super.prototype.updateActionButtonCssStyle.call(this, actionButtonElement);
        if (this.parent) {
            actionButtonElement.classList.add(this.parent.hostConfig.makeCssClassName("expandable"));
            actionButtonElement.setAttribute("aria-expanded", (buttonState === 1 /* Expanded */).toString());
        }
    };
    ShowCardAction.prototype.setParent = function (value) {
        _super.prototype.setParent.call(this, value);
        this.card.setParent(value);
    };
    ShowCardAction.prototype.getAllInputs = function () {
        return this.card.getAllInputs();
    };
    ShowCardAction.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());
    };
    ShowCardAction.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            result = this.card.getActionById(id);
        }
        return result;
    };
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ShowCardAction.JsonTypeName = "Action.ShowCard";
    return ShowCardAction;
}(Action));
exports.ShowCardAction = ShowCardAction;
var ActionCollection = /** @class */ (function () {
    function ActionCollection(owner) {
        this._renderedActionCount = 0;
        this.items = [];
        this.buttons = [];
        this._owner = owner;
    }
    ActionCollection.prototype.isActionAllowed = function (action) {
        var forbiddenTypes = this._owner.getForbiddenActionTypes();
        if (forbiddenTypes) {
            for (var _i = 0, forbiddenTypes_1 = forbiddenTypes; _i < forbiddenTypes_1.length; _i++) {
                var forbiddenType = forbiddenTypes_1[_i];
                if (action.constructor === forbiddenType) {
                    return false;
                }
            }
        }
        return true;
    };
    ActionCollection.prototype.refreshContainer = function () {
        this._actionCardContainer.innerHTML = "";
        if (!this._actionCard) {
            this._actionCardContainer.style.marginTop = "0px";
            return;
        }
        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + "px" : "0px";
        var padding = this._owner.getEffectivePadding();
        this._owner.getImmediateSurroundingPadding(padding);
        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);
        if (this._actionCard) {
            this._actionCard.style.paddingLeft = physicalPadding.left + "px";
            this._actionCard.style.paddingRight = physicalPadding.right + "px";
            this._actionCard.style.marginLeft = "-" + physicalPadding.left + "px";
            this._actionCard.style.marginRight = "-" + physicalPadding.right + "px";
            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {
                this._actionCard.style.paddingBottom = physicalPadding.bottom + "px";
                this._actionCard.style.marginBottom = "-" + physicalPadding.bottom + "px";
            }
            Utils.appendChild(this._actionCardContainer, this._actionCard);
        }
    };
    ActionCollection.prototype.layoutChanged = function () {
        this._owner.getRootElement().updateLayout();
    };
    ActionCollection.prototype.hideActionCard = function () {
        var previouslyExpandedAction = this._expandedAction;
        this._expandedAction = undefined;
        this._actionCard = undefined;
        this.refreshContainer();
        if (previouslyExpandedAction) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);
        }
    };
    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {
        if (suppressStyle === void 0) { suppressStyle = false; }
        if (raiseEvent === void 0) { raiseEvent = true; }
        action.card.suppressStyle = suppressStyle;
        // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise
        var renderedCard = action.card.renderedElement && !this._owner.isDesignMode() ? action.card.renderedElement : action.card.render();
        this._actionCard = renderedCard;
        this._expandedAction = action;
        this.refreshContainer();
        if (raiseEvent) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(action, true);
        }
    };
    ActionCollection.prototype.collapseExpandedAction = function () {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            button.state = 0 /* Normal */;
        }
        this.hideActionCard();
    };
    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            if (button.action !== action) {
                button.state = 2 /* Subdued */;
            }
            else {
                button.state = 1 /* Expanded */;
            }
        }
        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);
    };
    ActionCollection.prototype.actionClicked = function (actionButton) {
        if (!(actionButton.action instanceof ShowCardAction)) {
            for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
                var button = _a[_i];
                button.state = 0 /* Normal */;
            }
            this.hideActionCard();
            actionButton.action.execute();
        }
        else {
            if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {
                actionButton.action.execute();
            }
            else if (actionButton.action === this._expandedAction) {
                this.collapseExpandedAction();
            }
            else {
                this.expandShowCardAction(actionButton.action, true);
            }
        }
    };
    ActionCollection.prototype.getParentContainer = function () {
        if (this._owner instanceof Container) {
            return this._owner;
        }
        else {
            return this._owner.getParentContainer();
        }
    };
    ActionCollection.prototype.findActionButton = function (action) {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var actionButton = _a[_i];
            if (actionButton.action == action) {
                return actionButton;
            }
        }
        return undefined;
    };
    ActionCollection.prototype.parse = function (source, context) {
        this.clear();
        if (Array.isArray(source)) {
            for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {
                var jsonAction = source_1[_i];
                var action = context.parseAction(this._owner, jsonAction, [], !this._owner.isDesignMode());
                if (action) {
                    this.addAction(action);
                }
            }
        }
    };
    ActionCollection.prototype.toJSON = function (target, propertyName, context) {
        context.serializeArray(target, propertyName, this.items);
    };
    ActionCollection.prototype.getActionById = function (id) {
        var result = undefined;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            result = item.getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    ActionCollection.prototype.validateProperties = function (context) {
        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {
            context.addFailure(this._owner, Enums.ValidationEvent.TooManyActions, "A maximum of " + this._owner.hostConfig.actions.maxActions + " actions are allowed.");
        }
        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {
            context.addFailure(this._owner, Enums.ValidationEvent.InteractivityNotAllowed, "Interactivity is not allowed.");
        }
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (!this.isActionAllowed(item)) {
                context.addFailure(this._owner, Enums.ValidationEvent.ActionTypeNotAllowed, "Actions of type " + item.getJsonTypeName() + " are not allowed in this context.");
            }
            item.internalValidateProperties(context);
        }
    };
    ActionCollection.prototype.render = function (orientation, isDesignMode) {
        var _this = this;
        // Cache hostConfig for better perf
        var hostConfig = this._owner.hostConfig;
        if (!hostConfig.supportsInteractivity) {
            return undefined;
        }
        var element = document.createElement("div");
        var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;
        this._actionCardContainer = document.createElement("div");
        this._renderedActionCount = 0;
        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && this.isActionAllowed(this.items[0])) {
            this.showActionCard(this.items[0], true);
            this._renderedActionCount = 1;
        }
        else {
            var buttonStrip = document.createElement("div");
            buttonStrip.className = hostConfig.makeCssClassName("ac-actionSet");
            buttonStrip.style.display = "flex";
            buttonStrip.setAttribute("role", "group");
            if (orientation == Enums.Orientation.Horizontal) {
                buttonStrip.style.flexDirection = "row";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
            }
            else {
                buttonStrip.style.flexDirection = "column";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        case Enums.ActionAlignment.Stretch:
                            buttonStrip.style.alignItems = "stretch";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
            }
            var parentContainer = this.getParentContainer();
            if (parentContainer) {
                var parentContainerStyle = parentContainer.getEffectiveStyle();
                var allowedActions = this.items.filter(this.isActionAllowed.bind(this));
                for (var i = 0; i < allowedActions.length; i++) {
                    var actionButton = this.findActionButton(allowedActions[i]);
                    if (!actionButton) {
                        actionButton = new ActionButton(allowedActions[i], parentContainerStyle);
                        actionButton.onClick = function (ab) { _this.actionClicked(ab); };
                        this.buttons.push(actionButton);
                    }
                    actionButton.render();
                    if (actionButton.action.renderedElement) {
                        actionButton.action.renderedElement.setAttribute("aria-posinset", (i + 1).toString());
                        actionButton.action.renderedElement.setAttribute("aria-setsize", allowedActions.length.toString());
                        actionButton.action.renderedElement.setAttribute("role", "listitem");
                        if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {
                            actionButton.action.renderedElement.style.flex = "0 1 100%";
                        }
                        else {
                            actionButton.action.renderedElement.style.flex = "0 1 auto";
                        }
                        buttonStrip.appendChild(actionButton.action.renderedElement);
                        this._renderedActionCount++;
                        if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {
                            break;
                        }
                        else if (hostConfig.actions.buttonSpacing > 0) {
                            var spacer = document.createElement("div");
                            if (orientation === Enums.Orientation.Horizontal) {
                                spacer.style.flex = "0 0 auto";
                                spacer.style.width = hostConfig.actions.buttonSpacing + "px";
                            }
                            else {
                                spacer.style.height = hostConfig.actions.buttonSpacing + "px";
                            }
                            Utils.appendChild(buttonStrip, spacer);
                        }
                    }
                }
            }
            var buttonStripContainer = document.createElement("div");
            buttonStripContainer.style.overflow = "hidden";
            buttonStripContainer.appendChild(buttonStrip);
            Utils.appendChild(element, buttonStripContainer);
        }
        Utils.appendChild(element, this._actionCardContainer);
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            if (button.state == 1 /* Expanded */) {
                this.expandShowCardAction(button.action, false);
                break;
            }
        }
        return this._renderedActionCount > 0 ? element : undefined;
    };
    ActionCollection.prototype.addAction = function (action) {
        if (!action) {
            throw new Error("The action parameter cannot be null.");
        }
        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {
            this.items.push(action);
            if (!action.parent) {
                action.setParent(this._owner);
            }
            action["_actionCollection"] = this;
        }
        else {
            throw new Error("The action already belongs to another element.");
        }
    };
    ActionCollection.prototype.removeAction = function (action) {
        if (this.expandedAction && this._expandedAction == action) {
            this.collapseExpandedAction();
        }
        var actionIndex = this.items.indexOf(action);
        if (actionIndex >= 0) {
            this.items.splice(actionIndex, 1);
            action.setParent(undefined);
            action["_actionCollection"] = undefined;
            for (var i = 0; i < this.buttons.length; i++) {
                if (this.buttons[i].action == action) {
                    this.buttons.splice(i, 1);
                    break;
                }
            }
            return true;
        }
        return false;
    };
    ActionCollection.prototype.clear = function () {
        this.items = [];
        this.buttons = [];
        this._expandedAction = undefined;
        this._renderedActionCount = 0;
    };
    ActionCollection.prototype.getAllInputs = function () {
        var result = [];
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var action = _a[_i];
            result = result.concat(action.getAllInputs());
        }
        return result;
    };
    ActionCollection.prototype.getResourceInformation = function () {
        var result = [];
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var action = _a[_i];
            result = result.concat(action.getResourceInformation());
        }
        return result;
    };
    Object.defineProperty(ActionCollection.prototype, "renderedActionCount", {
        get: function () {
            return this._renderedActionCount;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ActionCollection.prototype, "expandedAction", {
        get: function () {
            return this._expandedAction;
        },
        enumerable: false,
        configurable: true
    });
    return ActionCollection;
}());
var ActionSet = /** @class */ (function (_super) {
    __extends(ActionSet, _super);
    function ActionSet() {
        var _this = _super.call(this) || this;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ActionSet.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._actionCollection.parse(source["actions"], context);
    };
    ActionSet.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        this._actionCollection.toJSON(target, "actions", context);
    };
    ActionSet.prototype.internalRender = function () {
        return this._actionCollection.render(this.orientation !== undefined ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());
    };
    ActionSet.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction !== undefined;
            }
        }
    };
    ActionSet.prototype.getJsonTypeName = function () {
        return "ActionSet";
    };
    ActionSet.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ActionSet.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            return _super.prototype.getActionAt.call(this, index);
        }
    };
    ActionSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this._actionCollection.validateProperties(context);
    };
    ActionSet.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ActionSet.prototype.getAllInputs = function () {
        return this._actionCollection.getAllInputs();
    };
    ActionSet.prototype.getResourceInformation = function () {
        return this._actionCollection.getResourceInformation();
    };
    Object.defineProperty(ActionSet.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    ActionSet.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, "orientation", Enums.Orientation);
    __decorate([
        serialization_1.property(ActionSet.orientationProperty)
    ], ActionSet.prototype, "orientation", void 0);
    return ActionSet;
}(CardElement));
exports.ActionSet = ActionSet;
var StylableCardElementContainer = /** @class */ (function (_super) {
    __extends(StylableCardElementContainer, _super);
    function StylableCardElementContainer() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._bleed = false;
        return _this;
    }
    Object.defineProperty(StylableCardElementContainer.prototype, "style", {
        get: function () {
            if (this.allowCustomStyle) {
                var style = this.getValue(StylableCardElementContainer.styleProperty);
                if (style && this.hostConfig.containerStyles.getStyleByName(style)) {
                    return style;
                }
            }
            return undefined;
        },
        set: function (value) {
            this.setValue(StylableCardElementContainer.styleProperty, value);
        },
        enumerable: false,
        configurable: true
    });
    //#endregion
    StylableCardElementContainer.prototype.adjustRenderedElementSize = function (renderedElement) {
        _super.prototype.adjustRenderedElementSize.call(this, renderedElement);
        if (this.minPixelHeight) {
            renderedElement.style.minHeight = this.minPixelHeight + "px";
        }
    };
    StylableCardElementContainer.prototype.applyBackground = function () {
        if (this.renderedElement) {
            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));
            if (styleDefinition.backgroundColor) {
                this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);
            }
        }
    };
    StylableCardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new shared_1.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        if (this.isBleeding()) {
            // Bleed into the first parent that does have padding
            var padding = new shared_1.PaddingDefinition();
            this.getImmediateSurroundingPadding(padding);
            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
            this.renderedElement.style.marginRight = "-" + surroundingPadding.right + "px";
            this.renderedElement.style.marginLeft = "-" + surroundingPadding.left + "px";
            if (!this.isDesignMode()) {
                this.renderedElement.style.marginTop = "-" + surroundingPadding.top + "px";
                this.renderedElement.style.marginBottom = "-" + surroundingPadding.bottom + "px";
            }
            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {
                this.separatorElement.style.marginLeft = "-" + surroundingPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + surroundingPadding.right + "px";
            }
        }
        else {
            this.renderedElement.style.marginRight = "0";
            this.renderedElement.style.marginLeft = "0";
            this.renderedElement.style.marginTop = "0";
            this.renderedElement.style.marginBottom = "0";
            if (this.separatorElement) {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    StylableCardElementContainer.prototype.getHasBackground = function () {
        var currentElement = this.parent;
        while (currentElement) {
            var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;
            if (currentElement instanceof StylableCardElementContainer) {
                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {
                    return true;
                }
            }
            currentElement = currentElement.parent;
        }
        return false;
    };
    StylableCardElementContainer.prototype.getDefaultPadding = function () {
        return this.getHasBackground() ?
            new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);
    };
    StylableCardElementContainer.prototype.getHasExpandedAction = function () {
        return false;
    };
    StylableCardElementContainer.prototype.getBleed = function () {
        return this._bleed;
    };
    StylableCardElementContainer.prototype.setBleed = function (value) {
        this._bleed = value;
    };
    Object.defineProperty(StylableCardElementContainer.prototype, "renderedActionCount", {
        get: function () {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "hasExplicitStyle", {
        get: function () {
            return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "allowCustomStyle", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    StylableCardElementContainer.prototype.isBleeding = function () {
        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();
    };
    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        var explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);
        if (explicitStyle !== undefined) {
            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);
            if (!styleDefinition) {
                context.addFailure(this, Enums.ValidationEvent.InvalidPropertyValue, "Unknown container style: " + explicitStyle);
            }
        }
    };
    StylableCardElementContainer.prototype.render = function () {
        var renderedElement = _super.prototype.render.call(this);
        if (renderedElement && this.getHasBackground()) {
            this.applyBackground();
        }
        return renderedElement;
    };
    StylableCardElementContainer.prototype.getEffectiveStyle = function () {
        var effectiveStyle = this.style;
        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);
    };
    StylableCardElementContainer.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, "style", [
        { value: Enums.ContainerStyle.Default },
        { value: Enums.ContainerStyle.Emphasis },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Accent },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Good },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Attention },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Warning }
    ]);
    StylableCardElementContainer.bleedProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "bleed", false);
    StylableCardElementContainer.minHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_2, "minHeight");
    __decorate([
        serialization_1.property(StylableCardElementContainer.styleProperty)
    ], StylableCardElementContainer.prototype, "style", null);
    __decorate([
        serialization_1.property(StylableCardElementContainer.bleedProperty)
    ], StylableCardElementContainer.prototype, "_bleed", void 0);
    __decorate([
        serialization_1.property(StylableCardElementContainer.minHeightProperty)
    ], StylableCardElementContainer.prototype, "minPixelHeight", void 0);
    return StylableCardElementContainer;
}(CardElementContainer));
exports.StylableCardElementContainer = StylableCardElementContainer;
var BackgroundImage = /** @class */ (function (_super) {
    __extends(BackgroundImage, _super);
    function BackgroundImage() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    //#endregion
    BackgroundImage.prototype.getSchemaKey = function () {
        return "BackgroundImage";
    };
    BackgroundImage.prototype.internalParse = function (source, context) {
        if (typeof source === "string") {
            this.resetDefaultValues();
            this.url = source;
        }
        else {
            return _super.prototype.internalParse.call(this, source, context);
        }
    };
    BackgroundImage.prototype.apply = function (element) {
        if (this.url && element.renderedElement) {
            element.renderedElement.style.backgroundImage = "url('" + element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) + "')";
            switch (this.fillMode) {
                case Enums.FillMode.Repeat:
                    element.renderedElement.style.backgroundRepeat = "repeat";
                    break;
                case Enums.FillMode.RepeatHorizontally:
                    element.renderedElement.style.backgroundRepeat = "repeat-x";
                    break;
                case Enums.FillMode.RepeatVertically:
                    element.renderedElement.style.backgroundRepeat = "repeat-y";
                    break;
                case Enums.FillMode.Cover:
                default:
                    element.renderedElement.style.backgroundRepeat = "no-repeat";
                    element.renderedElement.style.backgroundSize = "cover";
                    break;
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.renderedElement.style.backgroundPositionX = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.renderedElement.style.backgroundPositionX = "right";
                    break;
            }
            switch (this.verticalAlignment) {
                case Enums.VerticalAlignment.Center:
                    element.renderedElement.style.backgroundPositionY = "center";
                    break;
                case Enums.VerticalAlignment.Bottom:
                    element.renderedElement.style.backgroundPositionY = "bottom";
                    break;
            }
        }
    };
    BackgroundImage.prototype.isValid = function () {
        return this.url ? true : false;
    };
    //#region Schema
    BackgroundImage.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    BackgroundImage.fillModeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "fillMode", Enums.FillMode, Enums.FillMode.Cover);
    BackgroundImage.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "horizontalAlignment", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);
    BackgroundImage.verticalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "verticalAlignment", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);
    __decorate([
        serialization_1.property(BackgroundImage.urlProperty)
    ], BackgroundImage.prototype, "url", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.fillModeProperty)
    ], BackgroundImage.prototype, "fillMode", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.horizontalAlignmentProperty)
    ], BackgroundImage.prototype, "horizontalAlignment", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.verticalAlignmentProperty)
    ], BackgroundImage.prototype, "verticalAlignment", void 0);
    return BackgroundImage;
}(serialization_1.SerializableObject));
exports.BackgroundImage = BackgroundImage;
var Container = /** @class */ (function (_super) {
    __extends(Container, _super);
    function Container() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.verticalContentAlignment = Enums.VerticalAlignment.Top;
        //#endregion
        _this._items = [];
        _this._renderedItems = [];
        return _this;
    }
    Object.defineProperty(Container.prototype, "backgroundImage", {
        get: function () {
            return this.getValue(Container.backgroundImageProperty);
        },
        enumerable: false,
        configurable: true
    });
    Container.prototype.insertItemAt = function (item, index, forceInsert) {
        if (!item.parent || forceInsert) {
            if (item.isStandalone) {
                if (index < 0 || index >= this._items.length) {
                    this._items.push(item);
                }
                else {
                    this._items.splice(index, 0, item);
                }
                item.setParent(this);
            }
            else {
                throw new Error("Elements of type " + item.getJsonTypeName() + " cannot be used as standalone elements.");
            }
        }
        else {
            throw new Error("The element already belongs to another container.");
        }
    };
    Container.prototype.supportsExcplitiHeight = function () {
        return true;
    };
    Container.prototype.getItemsCollectionPropertyName = function () {
        return "items";
    };
    Container.prototype.applyBackground = function () {
        if (this.backgroundImage.isValid() && this.renderedElement) {
            this.backgroundImage.apply(this);
        }
        _super.prototype.applyBackground.call(this);
    };
    Container.prototype.internalRender = function () {
        this._renderedItems = [];
        // Cache hostConfig to avoid walking the parent hierarchy several times
        var hostConfig = this.hostConfig;
        var element = document.createElement("div");
        if (this.rtl !== undefined && this.rtl) {
            element.dir = "rtl";
        }
        element.classList.add(hostConfig.makeCssClassName("ac-container"));
        element.style.display = "flex";
        element.style.flexDirection = "column";
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
            // Forces the container to be at least as tall as its content.
            //
            // Fixes a quirk in Chrome where, for nested flex elements, the
            // inner element's height would never exceed the outer element's
            // height. This caused overflow truncation to break -- containers
            // would always be measured as not overflowing, since their heights
            // were constrained by their parents as opposed to truly reflecting
            // the height of their content.
            //
            // See the "Browser Rendering Notes" section of this answer:
            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size
            element.style.minHeight = '-webkit-min-content';
        }
        switch (this.verticalContentAlignment) {
            case Enums.VerticalAlignment.Center:
                element.style.justifyContent = "center";
                break;
            case Enums.VerticalAlignment.Bottom:
                element.style.justifyContent = "flex-end";
                break;
            default:
                element.style.justifyContent = "flex-start";
                break;
        }
        if (this._items.length > 0) {
            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                var item = _a[_i];
                var renderedItem = this.isElementAllowed(item) ? item.render() : undefined;
                if (renderedItem) {
                    if (this._renderedItems.length > 0 && item.separatorElement) {
                        item.separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, item.separatorElement);
                    }
                    Utils.appendChild(element, renderedItem);
                    this._renderedItems.push(item);
                }
            }
        }
        else {
            if (this.isDesignMode()) {
                var placeholderElement = this.createPlaceholderElement();
                placeholderElement.style.width = "100%";
                placeholderElement.style.height = "100%";
                element.appendChild(placeholderElement);
            }
        }
        return element;
    };
    Container.prototype.truncateOverflow = function (maxHeight) {
        if (this.renderedElement) {
            // Add 1 to account for rounding differences between browsers
            var boundary_1 = this.renderedElement.offsetTop + maxHeight + 1;
            var handleElement_1 = function (cardElement) {
                var elt = cardElement.renderedElement;
                if (elt) {
                    switch (Utils.getFitStatus(elt, boundary_1)) {
                        case Enums.ContainerFitStatus.FullyInContainer:
                            var sizeChanged = cardElement['resetOverflow']();
                            // If the element's size changed after resetting content,
                            // we have to check if it still fits fully in the card
                            if (sizeChanged) {
                                handleElement_1(cardElement);
                            }
                            break;
                        case Enums.ContainerFitStatus.Overflowing:
                            var maxHeight_1 = boundary_1 - elt.offsetTop;
                            cardElement['handleOverflow'](maxHeight_1);
                            break;
                        case Enums.ContainerFitStatus.FullyOutOfContainer:
                            cardElement['handleOverflow'](0);
                            break;
                    }
                }
            };
            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                var item = _a[_i];
                handleElement_1(item);
            }
            return true;
        }
        return false;
    };
    Container.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            item['resetOverflow']();
        }
    };
    Container.prototype.getHasBackground = function () {
        return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);
    };
    Container.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this.clear();
        this.setShouldFallback(false);
        var jsonItems = source[this.getItemsCollectionPropertyName()];
        if (Array.isArray(jsonItems)) {
            for (var _i = 0, jsonItems_1 = jsonItems; _i < jsonItems_1.length; _i++) {
                var item = jsonItems_1[_i];
                var element = context.parseElement(this, item, !this.isDesignMode());
                if (element) {
                    this.insertItemAt(element, -1, true);
                }
            }
        }
    };
    Container.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        context.serializeArray(target, this.getItemsCollectionPropertyName(), this._items);
    };
    Object.defineProperty(Container.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Container.prototype.getItemCount = function () {
        return this._items.length;
    };
    Container.prototype.getItemAt = function (index) {
        return this._items[index];
    };
    Container.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {
                var item = _a[_i];
                if (item.isVisible) {
                    return item;
                }
            }
            ;
        }
        return undefined;
    };
    Container.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var i = this._renderedItems.length - 1; i >= 0; i--) {
                if (this._renderedItems[i].isVisible) {
                    return this._renderedItems[i];
                }
            }
        }
        return undefined;
    };
    Container.prototype.getJsonTypeName = function () {
        return "Container";
    };
    Container.prototype.isFirstElement = function (element) {
        var designMode = this.isDesignMode();
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (item.isVisible || designMode) {
                return item == element;
            }
        }
        return false;
    };
    Container.prototype.isLastElement = function (element) {
        var designMode = this.isDesignMode();
        for (var i = this._items.length - 1; i >= 0; i--) {
            if (this._items[i].isVisible || designMode) {
                return this._items[i] == element;
            }
        }
        return false;
    };
    Container.prototype.isRtl = function () {
        if (this.rtl !== undefined) {
            return this.rtl;
        }
        else {
            var parentContainer = this.getParentContainer();
            return parentContainer ? parentContainer.isRtl() : false;
        }
    };
    Container.prototype.isBleedingAtTop = function () {
        var firstRenderedItem = this.getFirstVisibleRenderedItem();
        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);
    };
    Container.prototype.isBleedingAtBottom = function () {
        var lastRenderedItem = this.getLastVisibleRenderedItem();
        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);
    };
    Container.prototype.indexOf = function (cardElement) {
        return this._items.indexOf(cardElement);
    };
    Container.prototype.addItem = function (item) {
        this.insertItemAt(item, -1, false);
    };
    Container.prototype.insertItemBefore = function (item, insertBefore) {
        this.insertItemAt(item, this._items.indexOf(insertBefore), false);
    };
    Container.prototype.insertItemAfter = function (item, insertAfter) {
        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);
    };
    Container.prototype.removeItem = function (item) {
        var itemIndex = this._items.indexOf(item);
        if (itemIndex >= 0) {
            this._items.splice(itemIndex, 1);
            item.setParent(undefined);
            this.updateLayout();
            return true;
        }
        return false;
    };
    Container.prototype.clear = function () {
        this._items = [];
        this._renderedItems = [];
    };
    Container.prototype.getResourceInformation = function () {
        var result = _super.prototype.getResourceInformation.call(this);
        if (this.backgroundImage.isValid()) {
            result.push({
                url: this.backgroundImage.url,
                mimeType: "image"
            });
        }
        return result;
    };
    Container.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            if (this.selectAction) {
                result = this.selectAction.getActionById(id);
            }
            if (!result) {
                for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                    var item = _a[_i];
                    result = item.getActionById(id);
                    if (result) {
                        break;
                    }
                }
            }
        }
        return result;
    };
    Object.defineProperty(Container.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: false,
        configurable: true
    });
    Container.backgroundImageProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_0, "backgroundImage", BackgroundImage);
    Container.verticalContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, "verticalContentAlignment", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);
    Container.rtlProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "rtl");
    __decorate([
        serialization_1.property(Container.backgroundImageProperty)
    ], Container.prototype, "backgroundImage", null);
    __decorate([
        serialization_1.property(Container.verticalContentAlignmentProperty)
    ], Container.prototype, "verticalContentAlignment", void 0);
    __decorate([
        serialization_1.property(Container.rtlProperty)
    ], Container.prototype, "rtl", void 0);
    return Container;
}(StylableCardElementContainer));
exports.Container = Container;
var Column = /** @class */ (function (_super) {
    __extends(Column, _super);
    function Column(width) {
        if (width === void 0) { width = "stretch"; }
        var _this = _super.call(this) || this;
        _this.width = "stretch";
        //#endregion
        _this._computedWeight = 0;
        _this.width = width;
        return _this;
    }
    Column.prototype.adjustRenderedElementSize = function (renderedElement) {
        var minDesignTimeColumnHeight = 20;
        if (this.isDesignMode()) {
            renderedElement.style.minWidth = "20px";
            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + "px";
        }
        else {
            renderedElement.style.minWidth = "0";
            if (this.minPixelHeight) {
                renderedElement.style.minHeight = this.minPixelHeight + "px";
            }
        }
        if (this.width === "auto") {
            renderedElement.style.flex = "0 1 auto";
        }
        else if (this.width === "stretch") {
            renderedElement.style.flex = "1 1 50px";
        }
        else if (this.width instanceof shared_1.SizeAndUnit) {
            if (this.width.unit == Enums.SizeUnit.Pixel) {
                renderedElement.style.flex = "0 0 auto";
                renderedElement.style.width = this.width.physicalSize + "px";
            }
            else {
                renderedElement.style.flex = "1 1 " + (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) + "%";
            }
        }
    };
    Column.prototype.shouldSerialize = function (context) {
        return true;
    };
    Object.defineProperty(Column.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Vertical;
        },
        enumerable: false,
        configurable: true
    });
    Column.prototype.getJsonTypeName = function () {
        return "Column";
    };
    Object.defineProperty(Column.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.parent instanceof ColumnSet) {
                return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);
            }
            else {
                return false;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Column.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    Column.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "width", function (sender, property, source, context) {
        var result = property.defaultValue;
        var value = source[property.name];
        var invalidWidth = false;
        if (typeof value === "number" && !isNaN(value)) {
            result = new shared_1.SizeAndUnit(value, Enums.SizeUnit.Weight);
        }
        else if (value === "auto" || value === "stretch") {
            result = value;
        }
        else if (typeof value === "string") {
            try {
                result = shared_1.SizeAndUnit.parse(value);
                if (result.unit === Enums.SizeUnit.Pixel && property.targetVersion.compareTo(context.targetVersion) > 0) {
                    invalidWidth = true;
                }
            }
            catch (e) {
                invalidWidth = true;
            }
        }
        else {
            invalidWidth = true;
        }
        if (invalidWidth) {
            context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid column width:" + value + " - defaulting to \"auto\"", sender);
            result = "auto";
        }
        return result;
    }, function (sender, property, target, value, context) {
        if (value instanceof shared_1.SizeAndUnit) {
            if (value.unit === Enums.SizeUnit.Pixel) {
                context.serializeValue(target, "width", value.physicalSize + "px");
            }
            else {
                context.serializeNumber(target, "width", value.physicalSize);
            }
        }
        else {
            context.serializeValue(target, "width", value);
        }
    }, "stretch");
    __decorate([
        serialization_1.property(Column.widthProperty)
    ], Column.prototype, "width", void 0);
    return Column;
}(Container));
exports.Column = Column;
var ColumnSet = /** @class */ (function (_super) {
    __extends(ColumnSet, _super);
    function ColumnSet() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._columns = [];
        return _this;
    }
    ColumnSet.prototype.createColumnInstance = function (source, context) {
        return context.parseCardObject(this, source, [], // Forbidden types not supported for elements for now
        !this.isDesignMode(), function (typeName) {
            return !typeName || typeName === "Column" ? new Column() : undefined;
        }, function (typeName, errorType) {
            return {
                error: Enums.ValidationEvent.ElementTypeNotAllowed,
                message: "Invalid element type " + typeName + ". Only Column elements are allowed in a ColumnSet."
            };
        });
    };
    ColumnSet.prototype.internalRender = function () {
        this._renderedColumns = [];
        if (this._columns.length > 0) {
            // Cache hostConfig to avoid walking the parent hierarchy several times
            var hostConfig = this.hostConfig;
            var element = document.createElement("div");
            element.className = hostConfig.makeCssClassName("ac-columnSet");
            element.style.display = "flex";
            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
                // See comment in Container.internalRender()
                element.style.minHeight = '-webkit-min-content';
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            var totalWeight = 0;
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.width instanceof shared_1.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {
                    totalWeight += column.width.physicalSize;
                }
            }
            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {
                var column = _c[_b];
                if (column.width instanceof shared_1.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {
                    var computedWeight = 100 / totalWeight * column.width.physicalSize;
                    // Best way to emulate "internal" access I know of
                    column["_computedWeight"] = computedWeight;
                }
                var renderedColumn = column.render();
                if (renderedColumn) {
                    if (this._renderedColumns.length > 0 && column.separatorElement) {
                        column.separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, column.separatorElement);
                    }
                    Utils.appendChild(element, renderedColumn);
                    this._renderedColumns.push(column);
                }
            }
            return this._renderedColumns.length > 0 ? element : undefined;
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.truncateOverflow = function (maxHeight) {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['handleOverflow'](maxHeight);
        }
        return true;
    };
    ColumnSet.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['resetOverflow']();
        }
    };
    Object.defineProperty(ColumnSet.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    ColumnSet.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._columns = [];
        this._renderedColumns = [];
        var jsonColumns = source["columns"];
        if (Array.isArray(jsonColumns)) {
            for (var _i = 0, jsonColumns_1 = jsonColumns; _i < jsonColumns_1.length; _i++) {
                var item = jsonColumns_1[_i];
                var column = this.createColumnInstance(item, context);
                if (column) {
                    this._columns.push(column);
                }
            }
        }
    };
    ColumnSet.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        context.serializeArray(target, "columns", this._columns);
    };
    ColumnSet.prototype.isFirstElement = function (element) {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            if (column.isVisible) {
                return column == element;
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtTop = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtTop()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtBottom = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtBottom()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.getItemCount = function () {
        return this._columns.length;
    };
    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[0];
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[this._renderedColumns.length - 1];
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.getColumnAt = function (index) {
        return this._columns[index];
    };
    ColumnSet.prototype.getItemAt = function (index) {
        return this.getColumnAt(index);
    };
    ColumnSet.prototype.getJsonTypeName = function () {
        return "ColumnSet";
    };
    ColumnSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        var weightedColumns = 0;
        var stretchedColumns = 0;
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            if (typeof column.width === "number") {
                weightedColumns++;
            }
            else if (column.width === "stretch") {
                stretchedColumns++;
            }
        }
        if (weightedColumns > 0 && stretchedColumns > 0) {
            context.addFailure(this, Enums.ValidationEvent.Hint, "It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.");
        }
    };
    ColumnSet.prototype.addColumn = function (column) {
        if (!column.parent) {
            this._columns.push(column);
            column.setParent(this);
        }
        else {
            throw new Error("This column already belongs to another ColumnSet.");
        }
    };
    ColumnSet.prototype.removeItem = function (item) {
        if (item instanceof Column) {
            var itemIndex = this._columns.indexOf(item);
            if (itemIndex >= 0) {
                this._columns.splice(itemIndex, 1);
                item.setParent(undefined);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ColumnSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;
    };
    ColumnSet.prototype.isLeftMostElement = function (element) {
        return this._columns.indexOf(element) == 0;
    };
    ColumnSet.prototype.isRightMostElement = function (element) {
        return this._columns.indexOf(element) == this._columns.length - 1;
    };
    ColumnSet.prototype.isTopElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.isBottomElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.getActionById = function (id) {
        var result = undefined;
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            result = column.getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    Object.defineProperty(ColumnSet.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
        },
        enumerable: false,
        configurable: true
    });
    return ColumnSet;
}(StylableCardElementContainer));
exports.ColumnSet = ColumnSet;
function raiseImageLoadedEvent(image) {
    var card = image.getRootElement();
    var onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;
    if (onImageLoadedHandler) {
        onImageLoadedHandler(image);
    }
}
function raiseAnchorClickedEvent(element, anchor) {
    var card = element.getRootElement();
    var onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;
    return onAnchorClickedHandler !== undefined ? onAnchorClickedHandler(element, anchor) : false;
}
function raiseExecuteActionEvent(action) {
    var card = action.parent ? action.parent.getRootElement() : undefined;
    var onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;
    if (action.prepareForExecution() && onExecuteActionHandler) {
        onExecuteActionHandler(action);
    }
}
function raiseInlineCardExpandedEvent(action, isExpanded) {
    var card = action.parent ? action.parent.getRootElement() : undefined;
    var onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;
    if (onInlineCardExpandedHandler) {
        onInlineCardExpandedHandler(action, isExpanded);
    }
}
function raiseInputValueChangedEvent(input) {
    var card = input.getRootElement();
    var onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;
    if (onInputValueChangedHandler) {
        onInputValueChangedHandler(input);
    }
}
function raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {
    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }
    var rootElement = element.getRootElement();
    if (shouldUpdateLayout) {
        rootElement.updateLayout();
    }
    var card = rootElement;
    var onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;
    if (onElementVisibilityChangedHandler !== undefined) {
        onElementVisibilityChangedHandler(element);
    }
}
var ContainerWithActions = /** @class */ (function (_super) {
    __extends(ContainerWithActions, _super);
    function ContainerWithActions() {
        var _this = _super.call(this) || this;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ContainerWithActions.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._actionCollection.parse(source["actions"], context);
    };
    ContainerWithActions.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        this._actionCollection.toJSON(target, "actions", context);
    };
    ContainerWithActions.prototype.internalRender = function () {
        var element = _super.prototype.internalRender.call(this);
        if (element) {
            var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);
            if (renderedActions) {
                Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {
                    spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing)
                }, Enums.Orientation.Horizontal));
                Utils.appendChild(element, renderedActions);
            }
            if (this.renderIfEmpty) {
                return element;
            }
            else {
                return element.children.length > 0 ? element : undefined;
            }
        }
        else {
            return undefined;
        }
    };
    ContainerWithActions.prototype.getHasExpandedAction = function () {
        if (this.renderedActionCount == 0) {
            return false;
        }
        else if (this.renderedActionCount == 1) {
            return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
        }
        else {
            return this._actionCollection.expandedAction !== undefined;
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "renderedActionCount", {
        get: function () {
            return this._actionCollection.renderedActionCount;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ContainerWithActions.prototype, "renderIfEmpty", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    ContainerWithActions.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ContainerWithActions.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            return _super.prototype.getActionAt.call(this, index);
        }
    };
    ContainerWithActions.prototype.getActionById = function (id) {
        var result = this._actionCollection.getActionById(id);
        return result ? result : _super.prototype.getActionById.call(this, id);
    };
    ContainerWithActions.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this._actionCollection) {
            this._actionCollection.validateProperties(context);
        }
    };
    ContainerWithActions.prototype.isLastElement = function (element) {
        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;
    };
    ContainerWithActions.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ContainerWithActions.prototype.clear = function () {
        _super.prototype.clear.call(this);
        this._actionCollection.clear();
    };
    ContainerWithActions.prototype.getAllInputs = function () {
        return _super.prototype.getAllInputs.call(this).concat(this._actionCollection.getAllInputs());
    };
    ContainerWithActions.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());
    };
    ContainerWithActions.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction !== undefined;
            }
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    return ContainerWithActions;
}(Container));
exports.ContainerWithActions = ContainerWithActions;
// @dynamic
var AdaptiveCard = /** @class */ (function (_super) {
    __extends(AdaptiveCard, _super);
    function AdaptiveCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.designMode = false;
        return _this;
    }
    Object.defineProperty(AdaptiveCard, "processMarkdown", {
        get: function () {
            throw new Error("The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.");
        },
        set: function (value) {
            throw new Error("The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.");
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.applyMarkdown = function (text) {
        var result = {
            didProcess: false
        };
        if (AdaptiveCard.onProcessMarkdown) {
            AdaptiveCard.onProcessMarkdown(text, result);
        }
        else if (window.markdownit) {
            // Check for markdownit
            var markdownIt = window.markdownit;
            result.outputHtml = markdownIt().render(text);
            result.didProcess = true;
        }
        else {
            console.warn("Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown");
        }
        return result;
    };
    AdaptiveCard.prototype.isVersionSupported = function () {
        if (this.bypassVersionCheck) {
            return true;
        }
        else {
            var unsupportedVersion = !this.version ||
                !this.version.isValid ||
                (this.maxVersion.major < this.version.major) ||
                (this.maxVersion.major == this.version.major && this.maxVersion.minor < this.version.minor);
            return !unsupportedVersion;
        }
    };
    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {
        return "body";
    };
    AdaptiveCard.prototype.internalParse = function (source, context) {
        this._fallbackCard = undefined;
        var fallbackElement = context.parseElement(undefined, source["fallback"], !this.isDesignMode());
        if (fallbackElement) {
            this._fallbackCard = new AdaptiveCard();
            this._fallbackCard.addItem(fallbackElement);
        }
        _super.prototype.internalParse.call(this, source, context);
    };
    AdaptiveCard.prototype.internalToJSON = function (target, context) {
        this.setValue(AdaptiveCard.versionProperty, context.targetVersion);
        _super.prototype.internalToJSON.call(this, target, context);
    };
    AdaptiveCard.prototype.internalRender = function () {
        var renderedElement = _super.prototype.internalRender.call(this);
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {
            // Unlike containers, the root card element should be allowed to
            // be shorter than its content (otherwise the overflow truncation
            // logic would never get triggered)
            renderedElement.style.removeProperty("minHeight");
        }
        return renderedElement;
    };
    AdaptiveCard.prototype.getHasBackground = function () {
        return true;
    };
    AdaptiveCard.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    AdaptiveCard.prototype.shouldSerialize = function (context) {
        return true;
    };
    Object.defineProperty(AdaptiveCard.prototype, "renderIfEmpty", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "allowCustomStyle", {
        get: function () {
            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "hasBackground", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.prototype.getJsonTypeName = function () {
        return "AdaptiveCard";
    };
    AdaptiveCard.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this.getValue(CardElement.typeNameProperty) !== "AdaptiveCard") {
            context.addFailure(this, Enums.ValidationEvent.MissingCardType, "Invalid or missing card type. Make sure the card's type property is set to \"AdaptiveCard\".");
        }
        if (!this.bypassVersionCheck && !this.version) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, "The version property must be specified.");
        }
        else if (!this.isVersionSupported()) {
            context.addFailure(this, Enums.ValidationEvent.UnsupportedCardVersion, "The specified card version (" + this.version.toString() + ") is not supported. The maximum supported card version is " + this.maxVersion.toString());
        }
    };
    AdaptiveCard.prototype.render = function (target) {
        var renderedCard;
        if (this.shouldFallback() && this._fallbackCard) {
            this._fallbackCard.hostConfig = this.hostConfig;
            renderedCard = this._fallbackCard.render();
        }
        else {
            renderedCard = _super.prototype.render.call(this);
            if (renderedCard) {
                renderedCard.classList.add(this.hostConfig.makeCssClassName("ac-adaptiveCard"));
                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.
                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For
                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a
                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex
                // by default.
                if (shared_1.GlobalSettings.setTabIndexAtCardRoot) {
                    renderedCard.tabIndex = 0;
                }
                if (this.speak) {
                    renderedCard.setAttribute("aria-label", this.speak);
                }
            }
        }
        if (target) {
            Utils.appendChild(target, renderedCard);
            this.updateLayout();
        }
        return renderedCard;
    };
    AdaptiveCard.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {
            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);
            this['handleOverflow'](this.renderedElement.offsetHeight - padding);
        }
    };
    AdaptiveCard.prototype.shouldFallback = function () {
        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();
    };
    Object.defineProperty(AdaptiveCard.prototype, "hasVisibleSeparator", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.schemaUrl = "http://adaptivecards.io/schemas/adaptive-card.json";
    //#region Schema
    AdaptiveCard.$schemaProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "$schema", function (sender, property, source, context) {
        return AdaptiveCard.schemaUrl;
    }, function (sender, property, target, value, context) {
        context.serializeValue(target, property.name, AdaptiveCard.schemaUrl);
    });
    AdaptiveCard.versionProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "version", function (sender, property, source, context) {
        var version = serialization_1.Version.parse(source[property.name], context);
        if (version === undefined) {
            version = serialization_1.Versions.latest;
            context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid card version. Defaulting to latest version (" + version.toString() + ")");
        }
        return version;
    }, function (sender, property, target, value, context) {
        if (value !== undefined) {
            context.serializeValue(target, property.name, value.toString());
        }
    }, serialization_1.Versions.v1_0);
    AdaptiveCard.fallbackTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "fallbackText");
    AdaptiveCard.speakProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "speak");
    __decorate([
        serialization_1.property(AdaptiveCard.versionProperty)
    ], AdaptiveCard.prototype, "version", void 0);
    __decorate([
        serialization_1.property(AdaptiveCard.fallbackTextProperty)
    ], AdaptiveCard.prototype, "fallbackText", void 0);
    __decorate([
        serialization_1.property(AdaptiveCard.speakProperty)
    ], AdaptiveCard.prototype, "speak", void 0);
    return AdaptiveCard;
}(ContainerWithActions));
exports.AdaptiveCard = AdaptiveCard;
var InlineAdaptiveCard = /** @class */ (function (_super) {
    __extends(InlineAdaptiveCard, _super);
    function InlineAdaptiveCard() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.suppressStyle = false;
        return _this;
    }
    InlineAdaptiveCard.prototype.getSchemaKey = function () {
        return "InlineAdaptiveCard";
    };
    InlineAdaptiveCard.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);
    };
    //#endregion
    InlineAdaptiveCard.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    Object.defineProperty(InlineAdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InlineAdaptiveCard.prototype, "defaultStyle", {
        get: function () {
            if (this.suppressStyle) {
                return Enums.ContainerStyle.Default;
            }
            else {
                return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;
            }
        },
        enumerable: false,
        configurable: true
    });
    InlineAdaptiveCard.prototype.render = function (target) {
        var renderedCard = _super.prototype.render.call(this, target);
        if (renderedCard) {
            renderedCard.setAttribute("aria-live", "polite");
            renderedCard.removeAttribute("tabindex");
        }
        return renderedCard;
    };
    return InlineAdaptiveCard;
}(AdaptiveCard));
var GlobalRegistry = /** @class */ (function () {
    function GlobalRegistry() {
    }
    GlobalRegistry.populateWithDefaultElements = function (registry) {
        registry.clear();
        registry.register("Container", Container);
        registry.register("TextBlock", TextBlock);
        registry.register("RichTextBlock", RichTextBlock, serialization_1.Versions.v1_2);
        registry.register("TextRun", TextRun, serialization_1.Versions.v1_2);
        registry.register("Image", Image);
        registry.register("ImageSet", ImageSet);
        registry.register("Media", Media, serialization_1.Versions.v1_1);
        registry.register("FactSet", FactSet);
        registry.register("ColumnSet", ColumnSet);
        registry.register("ActionSet", ActionSet, serialization_1.Versions.v1_2);
        registry.register("Input.Text", TextInput);
        registry.register("Input.Date", DateInput);
        registry.register("Input.Time", TimeInput);
        registry.register("Input.Number", NumberInput);
        registry.register("Input.ChoiceSet", ChoiceSetInput);
        registry.register("Input.Toggle", ToggleInput);
    };
    GlobalRegistry.populateWithDefaultActions = function (registry) {
        registry.clear();
        registry.register(OpenUrlAction.JsonTypeName, OpenUrlAction);
        registry.register(SubmitAction.JsonTypeName, SubmitAction);
        registry.register(ShowCardAction.JsonTypeName, ShowCardAction);
        registry.register(ToggleVisibilityAction.JsonTypeName, ToggleVisibilityAction, serialization_1.Versions.v1_2);
    };
    GlobalRegistry.reset = function () {
        GlobalRegistry.populateWithDefaultElements(GlobalRegistry.elements);
        GlobalRegistry.populateWithDefaultActions(GlobalRegistry.actions);
    };
    GlobalRegistry.elements = new registry_1.CardObjectRegistry();
    GlobalRegistry.actions = new registry_1.CardObjectRegistry();
    return GlobalRegistry;
}());
exports.GlobalRegistry = GlobalRegistry;
GlobalRegistry.reset();
var SerializationContext = /** @class */ (function (_super) {
    __extends(SerializationContext, _super);
    function SerializationContext() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SerializationContext.prototype.internalParseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {
        var result = undefined;
        if (source && typeof source === "object") {
            var tryToFallback = false;
            var typeName = Utils.parseString(source["type"]);
            if (typeName) {
                if (forbiddenTypeNames.indexOf(typeName) >= 0) {
                    logParseEvent(typeName, 1 /* ForbiddenType */);
                }
                else {
                    result = createInstanceCallback(typeName);
                    if (!result) {
                        tryToFallback = allowFallback;
                        logParseEvent(typeName, 0 /* UnknownType */);
                    }
                    else {
                        result.setParent(parent);
                        result.parse(source, this);
                        tryToFallback = result.shouldFallback() && allowFallback;
                    }
                    if (tryToFallback) {
                        var fallback = source["fallback"];
                        if (!fallback && parent) {
                            parent.setShouldFallback(true);
                        }
                        if (typeof fallback === "string" && fallback.toLowerCase() === "drop") {
                            result = undefined;
                        }
                        else if (typeof fallback === "object") {
                            result = this.internalParseCardObject(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, logParseEvent);
                        }
                    }
                }
            }
        }
        return result;
    };
    SerializationContext.prototype.cardObjectParsed = function (o, source) {
        if (o instanceof Action && this.onParseAction) {
            this.onParseAction(o, source, this);
        }
        else if (o instanceof CardElement && this.onParseElement) {
            this.onParseElement(o, source, this);
        }
    };
    SerializationContext.prototype.parseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {
        var result = this.internalParseCardObject(parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent);
        if (result !== undefined) {
            this.cardObjectParsed(result, source);
        }
        return result;
    };
    SerializationContext.prototype.parseElement = function (parent, source, allowFallback) {
        var _this = this;
        return this.parseCardObject(parent, source, [], // Forbidden types not supported for elements for now
        allowFallback, function (typeName) {
            return _this.elementRegistry.createInstance(typeName, _this.targetVersion);
        }, function (typeName, errorType) {
            if (errorType === 0 /* UnknownType */) {
                _this.logParseEvent(Enums.ValidationEvent.UnknownElementType, "Unknown element type: " + typeName + ". Fallback will be used if present.");
            }
            else {
                _this.logParseEvent(Enums.ValidationEvent.ElementTypeNotAllowed, "Element type " + typeName + " is not allowed in this context.");
            }
        });
    };
    SerializationContext.prototype.parseAction = function (parent, source, forbiddenActionTypes, allowFallback) {
        var _this = this;
        return this.parseCardObject(parent, source, forbiddenActionTypes, allowFallback, function (typeName) {
            return _this.actionRegistry.createInstance(typeName, _this.targetVersion);
        }, function (typeName, errorType) {
            if (errorType == 0 /* UnknownType */) {
                return {
                    error: Enums.ValidationEvent.UnknownActionType,
                    message: "Unknown action type: " + typeName + ". Fallback will be used if present."
                };
            }
            else {
                return {
                    error: Enums.ValidationEvent.ActionTypeNotAllowed,
                    message: "Action type " + typeName + " is not allowed in this context."
                };
            }
        });
    };
    Object.defineProperty(SerializationContext.prototype, "elementRegistry", {
        get: function () {
            return this._elementRegistry ? this._elementRegistry : GlobalRegistry.elements;
        },
        enumerable: false,
        configurable: true
    });
    // Not using a property setter here because the setter should accept "undefined"
    // whereas the getter should never return undefined.
    SerializationContext.prototype.setElementRegistry = function (value) {
        this._elementRegistry = value;
    };
    Object.defineProperty(SerializationContext.prototype, "actionRegistry", {
        get: function () {
            return this._actionRegistry ? this._actionRegistry : GlobalRegistry.actions;
        },
        enumerable: false,
        configurable: true
    });
    // Not using a property setter here because the setter should accept "undefined"
    // whereas the getter should never return undefined.
    SerializationContext.prototype.setActionRegistry = function (value) {
        this._actionRegistry = value;
    };
    return SerializationContext;
}(serialization_1.BaseSerializationContext));
exports.SerializationContext = SerializationContext;


/***/ }),

/***/ "./src/card-object.ts":
/*!****************************!*\
  !*** ./src/card-object.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CardObject = exports.ValidationResults = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var host_capabilities_1 = __webpack_require__(/*! ./host-capabilities */ "./src/host-capabilities.ts");
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var ValidationResults = /** @class */ (function () {
    function ValidationResults() {
        this.allIds = {};
        this.validationEvents = [];
    }
    ValidationResults.prototype.addFailure = function (cardObject, event, message) {
        this.validationEvents.push({
            phase: Enums.ValidationPhase.Validation,
            source: cardObject,
            event: event,
            message: message
        });
    };
    return ValidationResults;
}());
exports.ValidationResults = ValidationResults;
var CardObject = /** @class */ (function (_super) {
    __extends(CardObject, _super);
    function CardObject() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        //#endregion
        _this._shouldFallback = false;
        return _this;
    }
    CardObject.prototype.getSchemaKey = function () {
        return this.getJsonTypeName();
    };
    Object.defineProperty(CardObject.prototype, "requires", {
        get: function () {
            return this.getValue(CardObject.requiresProperty);
        },
        enumerable: false,
        configurable: true
    });
    CardObject.prototype.preProcessPropertyValue = function (property, propertyValue) {
        var value = propertyValue === undefined ? this.getValue(property) : propertyValue;
        if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {
            var currentObject = this;
            while (currentObject && !currentObject.onPreProcessPropertyValue) {
                currentObject = currentObject.parent;
            }
            if (currentObject && currentObject.onPreProcessPropertyValue) {
                return currentObject.onPreProcessPropertyValue(this, property, value);
            }
        }
        return value;
    };
    CardObject.prototype.setParent = function (value) {
        this._parent = value;
    };
    CardObject.prototype.setShouldFallback = function (value) {
        this._shouldFallback = value;
    };
    CardObject.prototype.shouldFallback = function () {
        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);
    };
    CardObject.prototype.getRootObject = function () {
        var rootObject = this;
        while (rootObject.parent) {
            rootObject = rootObject.parent;
        }
        return rootObject;
    };
    CardObject.prototype.internalValidateProperties = function (context) {
        if (this.id) {
            if (context.allIds.hasOwnProperty(this.id)) {
                if (context.allIds[this.id] == 1) {
                    context.addFailure(this, Enums.ValidationEvent.DuplicateId, "Duplicate Id: " + this.id);
                }
                context.allIds[this.id] += 1;
            }
            else {
                context.allIds[this.id] = 1;
            }
        }
    };
    CardObject.prototype.validateProperties = function () {
        var result = new ValidationResults();
        this.internalValidateProperties(result);
        return result;
    };
    Object.defineProperty(CardObject.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardObject.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: false,
        configurable: true
    });
    CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "type", undefined, undefined, undefined, function (sender) {
        return sender.getJsonTypeName();
    });
    CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "id");
    CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, "requires", host_capabilities_1.HostCapabilities);
    __decorate([
        serialization_1.property(CardObject.idProperty)
    ], CardObject.prototype, "id", void 0);
    __decorate([
        serialization_1.property(CardObject.requiresProperty)
    ], CardObject.prototype, "requires", null);
    return CardObject;
}(serialization_1.SerializableObject));
exports.CardObject = CardObject;


/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
exports.ContainerFitStatus = exports.ValidationEvent = exports.ValidationPhase = exports.ContainerStyle = exports.InputValidationNecessity = exports.InputTextStyle = exports.ActionIconPlacement = exports.FillMode = exports.Orientation = exports.ShowCardActionMode = exports.ImageStyle = exports.ActionAlignment = exports.VerticalAlignment = exports.HorizontalAlignment = exports.TextColor = exports.Spacing = exports.FontType = exports.TextWeight = exports.TextSize = exports.SizeUnit = exports.ImageSize = exports.Size = exports.ActionStyle = void 0;
// Note the "weird" way these readonly fields are declared is to work around
// a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
// and adopt this syntax for all other static readonly fields.
var ActionStyle = /** @class */ (function () {
    function ActionStyle() {
    }
    ActionStyle.Default = "default";
    ActionStyle.Positive = "positive";
    ActionStyle.Destructive = "destructive";
    return ActionStyle;
}());
exports.ActionStyle = ActionStyle;
var Size;
(function (Size) {
    Size[Size["Auto"] = 0] = "Auto";
    Size[Size["Stretch"] = 1] = "Stretch";
    Size[Size["Small"] = 2] = "Small";
    Size[Size["Medium"] = 3] = "Medium";
    Size[Size["Large"] = 4] = "Large";
})(Size = exports.Size || (exports.Size = {}));
var ImageSize;
(function (ImageSize) {
    ImageSize[ImageSize["Small"] = 0] = "Small";
    ImageSize[ImageSize["Medium"] = 1] = "Medium";
    ImageSize[ImageSize["Large"] = 2] = "Large";
})(ImageSize = exports.ImageSize || (exports.ImageSize = {}));
var SizeUnit;
(function (SizeUnit) {
    SizeUnit[SizeUnit["Weight"] = 0] = "Weight";
    SizeUnit[SizeUnit["Pixel"] = 1] = "Pixel";
})(SizeUnit = exports.SizeUnit || (exports.SizeUnit = {}));
var TextSize;
(function (TextSize) {
    TextSize[TextSize["Small"] = 0] = "Small";
    TextSize[TextSize["Default"] = 1] = "Default";
    TextSize[TextSize["Medium"] = 2] = "Medium";
    TextSize[TextSize["Large"] = 3] = "Large";
    TextSize[TextSize["ExtraLarge"] = 4] = "ExtraLarge";
})(TextSize = exports.TextSize || (exports.TextSize = {}));
var TextWeight;
(function (TextWeight) {
    TextWeight[TextWeight["Lighter"] = 0] = "Lighter";
    TextWeight[TextWeight["Default"] = 1] = "Default";
    TextWeight[TextWeight["Bolder"] = 2] = "Bolder";
})(TextWeight = exports.TextWeight || (exports.TextWeight = {}));
var FontType;
(function (FontType) {
    FontType[FontType["Default"] = 0] = "Default";
    FontType[FontType["Monospace"] = 1] = "Monospace";
})(FontType = exports.FontType || (exports.FontType = {}));
var Spacing;
(function (Spacing) {
    Spacing[Spacing["None"] = 0] = "None";
    Spacing[Spacing["Small"] = 1] = "Small";
    Spacing[Spacing["Default"] = 2] = "Default";
    Spacing[Spacing["Medium"] = 3] = "Medium";
    Spacing[Spacing["Large"] = 4] = "Large";
    Spacing[Spacing["ExtraLarge"] = 5] = "ExtraLarge";
    Spacing[Spacing["Padding"] = 6] = "Padding";
})(Spacing = exports.Spacing || (exports.Spacing = {}));
var TextColor;
(function (TextColor) {
    TextColor[TextColor["Default"] = 0] = "Default";
    TextColor[TextColor["Dark"] = 1] = "Dark";
    TextColor[TextColor["Light"] = 2] = "Light";
    TextColor[TextColor["Accent"] = 3] = "Accent";
    TextColor[TextColor["Good"] = 4] = "Good";
    TextColor[TextColor["Warning"] = 5] = "Warning";
    TextColor[TextColor["Attention"] = 6] = "Attention";
})(TextColor = exports.TextColor || (exports.TextColor = {}));
var HorizontalAlignment;
(function (HorizontalAlignment) {
    HorizontalAlignment[HorizontalAlignment["Left"] = 0] = "Left";
    HorizontalAlignment[HorizontalAlignment["Center"] = 1] = "Center";
    HorizontalAlignment[HorizontalAlignment["Right"] = 2] = "Right";
})(HorizontalAlignment = exports.HorizontalAlignment || (exports.HorizontalAlignment = {}));
var VerticalAlignment;
(function (VerticalAlignment) {
    VerticalAlignment[VerticalAlignment["Top"] = 0] = "Top";
    VerticalAlignment[VerticalAlignment["Center"] = 1] = "Center";
    VerticalAlignment[VerticalAlignment["Bottom"] = 2] = "Bottom";
})(VerticalAlignment = exports.VerticalAlignment || (exports.VerticalAlignment = {}));
var ActionAlignment;
(function (ActionAlignment) {
    ActionAlignment[ActionAlignment["Left"] = 0] = "Left";
    ActionAlignment[ActionAlignment["Center"] = 1] = "Center";
    ActionAlignment[ActionAlignment["Right"] = 2] = "Right";
    ActionAlignment[ActionAlignment["Stretch"] = 3] = "Stretch";
})(ActionAlignment = exports.ActionAlignment || (exports.ActionAlignment = {}));
var ImageStyle;
(function (ImageStyle) {
    ImageStyle[ImageStyle["Default"] = 0] = "Default";
    ImageStyle[ImageStyle["Person"] = 1] = "Person";
})(ImageStyle = exports.ImageStyle || (exports.ImageStyle = {}));
var ShowCardActionMode;
(function (ShowCardActionMode) {
    ShowCardActionMode[ShowCardActionMode["Inline"] = 0] = "Inline";
    ShowCardActionMode[ShowCardActionMode["Popup"] = 1] = "Popup";
})(ShowCardActionMode = exports.ShowCardActionMode || (exports.ShowCardActionMode = {}));
var Orientation;
(function (Orientation) {
    Orientation[Orientation["Horizontal"] = 0] = "Horizontal";
    Orientation[Orientation["Vertical"] = 1] = "Vertical";
})(Orientation = exports.Orientation || (exports.Orientation = {}));
var FillMode;
(function (FillMode) {
    FillMode[FillMode["Cover"] = 0] = "Cover";
    FillMode[FillMode["RepeatHorizontally"] = 1] = "RepeatHorizontally";
    FillMode[FillMode["RepeatVertically"] = 2] = "RepeatVertically";
    FillMode[FillMode["Repeat"] = 3] = "Repeat";
})(FillMode = exports.FillMode || (exports.FillMode = {}));
var ActionIconPlacement;
(function (ActionIconPlacement) {
    ActionIconPlacement[ActionIconPlacement["LeftOfTitle"] = 0] = "LeftOfTitle";
    ActionIconPlacement[ActionIconPlacement["AboveTitle"] = 1] = "AboveTitle";
})(ActionIconPlacement = exports.ActionIconPlacement || (exports.ActionIconPlacement = {}));
var InputTextStyle;
(function (InputTextStyle) {
    InputTextStyle[InputTextStyle["Text"] = 0] = "Text";
    InputTextStyle[InputTextStyle["Tel"] = 1] = "Tel";
    InputTextStyle[InputTextStyle["Url"] = 2] = "Url";
    InputTextStyle[InputTextStyle["Email"] = 3] = "Email";
})(InputTextStyle = exports.InputTextStyle || (exports.InputTextStyle = {}));
var InputValidationNecessity;
(function (InputValidationNecessity) {
    InputValidationNecessity[InputValidationNecessity["Optional"] = 0] = "Optional";
    InputValidationNecessity[InputValidationNecessity["Required"] = 1] = "Required";
    InputValidationNecessity[InputValidationNecessity["RequiredWithVisualCue"] = 2] = "RequiredWithVisualCue";
})(InputValidationNecessity = exports.InputValidationNecessity || (exports.InputValidationNecessity = {}));
/*
    This should really be a string enum, e.g.

        export enum ContainerStyle {
            Default = "default",
            Emphasis = "emphasis"
        }

    However, some hosts do not use a version of TypeScript
    recent enough to understand string enums. This is
    a compatible construct that does not require using
    a more recent version of TypeScript.

    Also note the "weird" way these readonly fields are declared is to work around
    a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    and adopt this syntax for all other static readonly fields.
*/
var ContainerStyle = /** @class */ (function () {
    function ContainerStyle() {
    }
    ContainerStyle.Default = "default";
    ContainerStyle.Emphasis = "emphasis";
    ContainerStyle.Accent = "accent";
    ContainerStyle.Good = "good";
    ContainerStyle.Attention = "attention";
    ContainerStyle.Warning = "warning";
    return ContainerStyle;
}());
exports.ContainerStyle = ContainerStyle;
var ValidationPhase;
(function (ValidationPhase) {
    ValidationPhase[ValidationPhase["Parse"] = 0] = "Parse";
    ValidationPhase[ValidationPhase["ToJSON"] = 1] = "ToJSON";
    ValidationPhase[ValidationPhase["Validation"] = 2] = "Validation";
})(ValidationPhase = exports.ValidationPhase || (exports.ValidationPhase = {}));
var ValidationEvent;
(function (ValidationEvent) {
    ValidationEvent[ValidationEvent["Hint"] = 0] = "Hint";
    ValidationEvent[ValidationEvent["ActionTypeNotAllowed"] = 1] = "ActionTypeNotAllowed";
    ValidationEvent[ValidationEvent["CollectionCantBeEmpty"] = 2] = "CollectionCantBeEmpty";
    ValidationEvent[ValidationEvent["Deprecated"] = 3] = "Deprecated";
    ValidationEvent[ValidationEvent["ElementTypeNotAllowed"] = 4] = "ElementTypeNotAllowed";
    ValidationEvent[ValidationEvent["InteractivityNotAllowed"] = 5] = "InteractivityNotAllowed";
    ValidationEvent[ValidationEvent["InvalidPropertyValue"] = 6] = "InvalidPropertyValue";
    ValidationEvent[ValidationEvent["MissingCardType"] = 7] = "MissingCardType";
    ValidationEvent[ValidationEvent["PropertyCantBeNull"] = 8] = "PropertyCantBeNull";
    ValidationEvent[ValidationEvent["TooManyActions"] = 9] = "TooManyActions";
    ValidationEvent[ValidationEvent["UnknownActionType"] = 10] = "UnknownActionType";
    ValidationEvent[ValidationEvent["UnknownElementType"] = 11] = "UnknownElementType";
    ValidationEvent[ValidationEvent["UnsupportedCardVersion"] = 12] = "UnsupportedCardVersion";
    ValidationEvent[ValidationEvent["DuplicateId"] = 13] = "DuplicateId";
    ValidationEvent[ValidationEvent["UnsupportedProperty"] = 14] = "UnsupportedProperty";
    ValidationEvent[ValidationEvent["Other"] = 15] = "Other";
})(ValidationEvent = exports.ValidationEvent || (exports.ValidationEvent = {}));
var ContainerFitStatus;
(function (ContainerFitStatus) {
    ContainerFitStatus[ContainerFitStatus["FullyInContainer"] = 0] = "FullyInContainer";
    ContainerFitStatus[ContainerFitStatus["Overflowing"] = 1] = "Overflowing";
    ContainerFitStatus[ContainerFitStatus["FullyOutOfContainer"] = 2] = "FullyOutOfContainer";
})(ContainerFitStatus = exports.ContainerFitStatus || (exports.ContainerFitStatus = {}));


/***/ }),

/***/ "./src/host-capabilities.ts":
/*!**********************************!*\
  !*** ./src/host-capabilities.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.HostCapabilities = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var HostCapabilities = /** @class */ (function (_super) {
    __extends(HostCapabilities, _super);
    function HostCapabilities() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._capabilities = {};
        return _this;
    }
    HostCapabilities.prototype.getSchemaKey = function () {
        return "HostCapabilities";
    };
    HostCapabilities.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        if (source) {
            for (var name_1 in source) {
                var jsonVersion = source[name_1];
                if (typeof jsonVersion === "string") {
                    if (jsonVersion == "*") {
                        this.addCapability(name_1, "*");
                    }
                    else {
                        var version = serialization_1.Version.parse(jsonVersion, context);
                        if (version && version.isValid) {
                            this.addCapability(name_1, version);
                        }
                    }
                }
            }
        }
    };
    HostCapabilities.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        for (var key in this._capabilities) {
            target[key] = this._capabilities[key];
        }
    };
    HostCapabilities.prototype.addCapability = function (name, version) {
        this._capabilities[name] = version;
    };
    HostCapabilities.prototype.removeCapability = function (name) {
        delete this._capabilities[name];
    };
    HostCapabilities.prototype.clear = function () {
        this._capabilities = {};
    };
    HostCapabilities.prototype.hasCapability = function (name, version) {
        if (this._capabilities.hasOwnProperty(name)) {
            if (version == "*" || this._capabilities[name] == "*") {
                return true;
            }
            return version.compareTo(this._capabilities[name]) <= 0;
        }
        return false;
    };
    HostCapabilities.prototype.areAllMet = function (hostCapabilities) {
        for (var capabilityName in this._capabilities) {
            if (!hostCapabilities.hasCapability(capabilityName, this._capabilities[capabilityName])) {
                return false;
            }
        }
        return true;
    };
    return HostCapabilities;
}(serialization_1.SerializableObject));
exports.HostCapabilities = HostCapabilities;


/***/ }),

/***/ "./src/host-config.ts":
/*!****************************!*\
  !*** ./src/host-config.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultHostConfig = exports.HostConfig = exports.FontTypeSet = exports.FontTypeDefinition = exports.ContainerStyleSet = exports.ContainerStyleDefinition = exports.ColorSetDefinition = exports.ActionsConfig = exports.ShowCardActionConfig = exports.FactSetConfig = exports.FactTitleDefinition = exports.FactTextDefinition = exports.MediaConfig = exports.ImageSetConfig = exports.AdaptiveCardConfig = exports.TextColorDefinition = exports.ColorDefinition = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var host_capabilities_1 = __webpack_require__(/*! ./host-capabilities */ "./src/host-capabilities.ts");
function parseHostConfigEnum(targetEnum, value, defaultValue) {
    if (typeof value === "string") {
        var parsedValue = Utils.parseEnum(targetEnum, value, defaultValue);
        return parsedValue !== undefined ? parsedValue : defaultValue;
    }
    else if (typeof value === "number") {
        return value;
    }
    else {
        return defaultValue;
    }
}
var ColorDefinition = /** @class */ (function () {
    function ColorDefinition(defaultColor, subtleColor) {
        this.default = "#000000";
        this.subtle = "#666666";
        if (defaultColor) {
            this.default = defaultColor;
        }
        if (subtleColor) {
            this.subtle = subtleColor;
        }
    }
    ColorDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.default = obj["default"] || this.default;
            this.subtle = obj["subtle"] || this.subtle;
        }
    };
    return ColorDefinition;
}());
exports.ColorDefinition = ColorDefinition;
var TextColorDefinition = /** @class */ (function (_super) {
    __extends(TextColorDefinition, _super);
    function TextColorDefinition() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.highlightColors = new ColorDefinition("#22000000", "#11000000");
        return _this;
    }
    TextColorDefinition.prototype.parse = function (obj) {
        _super.prototype.parse.call(this, obj);
        if (obj) {
            this.highlightColors.parse(obj["highlightColors"]);
        }
    };
    return TextColorDefinition;
}(ColorDefinition));
exports.TextColorDefinition = TextColorDefinition;
var AdaptiveCardConfig = /** @class */ (function () {
    function AdaptiveCardConfig(obj) {
        this.allowCustomStyle = false;
        if (obj) {
            this.allowCustomStyle = obj["allowCustomStyle"] || this.allowCustomStyle;
        }
    }
    return AdaptiveCardConfig;
}());
exports.AdaptiveCardConfig = AdaptiveCardConfig;
var ImageSetConfig = /** @class */ (function () {
    function ImageSetConfig(obj) {
        this.imageSize = Enums.Size.Medium;
        this.maxImageHeight = 100;
        if (obj) {
            this.imageSize = obj["imageSize"] != null ? obj["imageSize"] : this.imageSize;
            this.maxImageHeight = Utils.parseNumber(obj["maxImageHeight"], 100);
        }
    }
    ImageSetConfig.prototype.toJSON = function () {
        return {
            imageSize: Enums.Size[this.imageSize],
            maxImageHeight: this.maxImageHeight
        };
    };
    return ImageSetConfig;
}());
exports.ImageSetConfig = ImageSetConfig;
var MediaConfig = /** @class */ (function () {
    function MediaConfig(obj) {
        this.allowInlinePlayback = true;
        if (obj) {
            this.defaultPoster = obj["defaultPoster"];
            this.allowInlinePlayback = obj["allowInlinePlayback"] || this.allowInlinePlayback;
        }
    }
    MediaConfig.prototype.toJSON = function () {
        return {
            defaultPoster: this.defaultPoster,
            allowInlinePlayback: this.allowInlinePlayback
        };
    };
    return MediaConfig;
}());
exports.MediaConfig = MediaConfig;
var FactTextDefinition = /** @class */ (function () {
    function FactTextDefinition(obj) {
        this.size = Enums.TextSize.Default;
        this.color = Enums.TextColor.Default;
        this.isSubtle = false;
        this.weight = Enums.TextWeight.Default;
        this.wrap = true;
        if (obj) {
            this.size = parseHostConfigEnum(Enums.TextSize, obj["size"], Enums.TextSize.Default);
            this.color = parseHostConfigEnum(Enums.TextColor, obj["color"], Enums.TextColor.Default);
            this.isSubtle = obj["isSubtle"] || this.isSubtle;
            this.weight = parseHostConfigEnum(Enums.TextWeight, obj["weight"], this.getDefaultWeight());
            this.wrap = obj["wrap"] != null ? obj["wrap"] : this.wrap;
        }
    }
    ;
    FactTextDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Default;
    };
    FactTextDefinition.prototype.toJSON = function () {
        return {
            size: Enums.TextSize[this.size],
            color: Enums.TextColor[this.color],
            isSubtle: this.isSubtle,
            weight: Enums.TextWeight[this.weight],
            wrap: this.wrap
        };
    };
    return FactTextDefinition;
}());
exports.FactTextDefinition = FactTextDefinition;
var FactTitleDefinition = /** @class */ (function (_super) {
    __extends(FactTitleDefinition, _super);
    function FactTitleDefinition(obj) {
        var _this = _super.call(this, obj) || this;
        _this.maxWidth = 150;
        _this.weight = Enums.TextWeight.Bolder;
        if (obj) {
            _this.maxWidth = obj["maxWidth"] != null ? obj["maxWidth"] : _this.maxWidth;
            _this.weight = parseHostConfigEnum(Enums.TextWeight, obj["weight"], Enums.TextWeight.Bolder);
        }
        return _this;
    }
    FactTitleDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Bolder;
    };
    return FactTitleDefinition;
}(FactTextDefinition));
exports.FactTitleDefinition = FactTitleDefinition;
var FactSetConfig = /** @class */ (function () {
    function FactSetConfig(obj) {
        this.title = new FactTitleDefinition();
        this.value = new FactTextDefinition();
        this.spacing = 10;
        if (obj) {
            this.title = new FactTitleDefinition(obj["title"]);
            this.value = new FactTextDefinition(obj["value"]);
            this.spacing = obj.spacing && obj.spacing != null ? obj.spacing && obj.spacing : this.spacing;
        }
    }
    return FactSetConfig;
}());
exports.FactSetConfig = FactSetConfig;
var ShowCardActionConfig = /** @class */ (function () {
    function ShowCardActionConfig(obj) {
        this.actionMode = Enums.ShowCardActionMode.Inline;
        this.inlineTopMargin = 16;
        this.style = Enums.ContainerStyle.Emphasis;
        if (obj) {
            this.actionMode = parseHostConfigEnum(Enums.ShowCardActionMode, obj["actionMode"], Enums.ShowCardActionMode.Inline);
            this.inlineTopMargin = obj["inlineTopMargin"] != null ? obj["inlineTopMargin"] : this.inlineTopMargin;
            this.style = obj["style"] && typeof obj["style"] === "string" ? obj["style"] : Enums.ContainerStyle.Emphasis;
        }
    }
    ShowCardActionConfig.prototype.toJSON = function () {
        return {
            actionMode: Enums.ShowCardActionMode[this.actionMode],
            inlineTopMargin: this.inlineTopMargin,
            style: this.style
        };
    };
    return ShowCardActionConfig;
}());
exports.ShowCardActionConfig = ShowCardActionConfig;
var ActionsConfig = /** @class */ (function () {
    function ActionsConfig(obj) {
        this.maxActions = 5;
        this.spacing = Enums.Spacing.Default;
        this.buttonSpacing = 20;
        this.showCard = new ShowCardActionConfig();
        this.preExpandSingleShowCardAction = false;
        this.actionsOrientation = Enums.Orientation.Horizontal;
        this.actionAlignment = Enums.ActionAlignment.Left;
        this.iconPlacement = Enums.ActionIconPlacement.LeftOfTitle;
        this.allowTitleToWrap = false;
        this.iconSize = 16;
        if (obj) {
            this.maxActions = obj["maxActions"] != null ? obj["maxActions"] : this.maxActions;
            this.spacing = parseHostConfigEnum(Enums.Spacing, obj.spacing && obj.spacing, Enums.Spacing.Default);
            this.buttonSpacing = obj["buttonSpacing"] != null ? obj["buttonSpacing"] : this.buttonSpacing;
            this.showCard = new ShowCardActionConfig(obj["showCard"]);
            this.preExpandSingleShowCardAction = Utils.parseBool(obj["preExpandSingleShowCardAction"], false);
            this.actionsOrientation = parseHostConfigEnum(Enums.Orientation, obj["actionsOrientation"], Enums.Orientation.Horizontal);
            this.actionAlignment = parseHostConfigEnum(Enums.ActionAlignment, obj["actionAlignment"], Enums.ActionAlignment.Left);
            this.iconPlacement = parseHostConfigEnum(Enums.ActionIconPlacement, obj["iconPlacement"], Enums.ActionIconPlacement.LeftOfTitle);
            this.allowTitleToWrap = obj["allowTitleToWrap"] != null ? obj["allowTitleToWrap"] : this.allowTitleToWrap;
            try {
                var sizeAndUnit = Shared.SizeAndUnit.parse(obj["iconSize"]);
                if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {
                    this.iconSize = sizeAndUnit.physicalSize;
                }
            }
            catch (e) {
                // Swallow this, keep default icon size
            }
        }
    }
    ActionsConfig.prototype.toJSON = function () {
        return {
            maxActions: this.maxActions,
            spacing: Enums.Spacing[this.spacing],
            buttonSpacing: this.buttonSpacing,
            showCard: this.showCard,
            preExpandSingleShowCardAction: this.preExpandSingleShowCardAction,
            actionsOrientation: Enums.Orientation[this.actionsOrientation],
            actionAlignment: Enums.ActionAlignment[this.actionAlignment]
        };
    };
    return ActionsConfig;
}());
exports.ActionsConfig = ActionsConfig;
var ColorSetDefinition = /** @class */ (function () {
    function ColorSetDefinition(obj) {
        this.default = new TextColorDefinition();
        this.dark = new TextColorDefinition();
        this.light = new TextColorDefinition();
        this.accent = new TextColorDefinition();
        this.good = new TextColorDefinition();
        this.warning = new TextColorDefinition();
        this.attention = new TextColorDefinition();
        this.parse(obj);
    }
    ColorSetDefinition.prototype.parseSingleColor = function (obj, propertyName) {
        if (obj) {
            this[propertyName].parse(obj[propertyName]);
        }
    };
    ColorSetDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.parseSingleColor(obj, "default");
            this.parseSingleColor(obj, "dark");
            this.parseSingleColor(obj, "light");
            this.parseSingleColor(obj, "accent");
            this.parseSingleColor(obj, "good");
            this.parseSingleColor(obj, "warning");
            this.parseSingleColor(obj, "attention");
        }
    };
    return ColorSetDefinition;
}());
exports.ColorSetDefinition = ColorSetDefinition;
var ContainerStyleDefinition = /** @class */ (function () {
    function ContainerStyleDefinition(obj) {
        this.foregroundColors = new ColorSetDefinition({
            "default": { default: "#333333", subtle: "#EE333333" },
            "dark": { default: "#000000", subtle: "#66000000" },
            "light": { default: "#FFFFFF", subtle: "#33000000" },
            "accent": { default: "#2E89FC", subtle: "#882E89FC" },
            "good": { default: "#028A02", subtle: "#DD027502" },
            "warning": { default: "#E69500", subtle: "#DDE69500" },
            "attention": { default: "#CC3300", subtle: "#DDCC3300" }
        });
        this.parse(obj);
    }
    ContainerStyleDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.backgroundColor = obj["backgroundColor"];
            this.foregroundColors.parse(obj["foregroundColors"]);
            this.highlightBackgroundColor = obj["highlightBackgroundColor"];
            this.highlightForegroundColor = obj["highlightForegroundColor"];
        }
    };
    Object.defineProperty(ContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    return ContainerStyleDefinition;
}());
exports.ContainerStyleDefinition = ContainerStyleDefinition;
var BuiltInContainerStyleDefinition = /** @class */ (function (_super) {
    __extends(BuiltInContainerStyleDefinition, _super);
    function BuiltInContainerStyleDefinition() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BuiltInContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return BuiltInContainerStyleDefinition;
}(ContainerStyleDefinition));
var ContainerStyleSet = /** @class */ (function () {
    function ContainerStyleSet(obj) {
        this._allStyles = {};
        this._allStyles[Enums.ContainerStyle.Default] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Emphasis] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Accent] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Good] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Attention] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Warning] = new BuiltInContainerStyleDefinition();
        if (obj) {
            this._allStyles[Enums.ContainerStyle.Default].parse(obj[Enums.ContainerStyle.Default]);
            this._allStyles[Enums.ContainerStyle.Emphasis].parse(obj[Enums.ContainerStyle.Emphasis]);
            this._allStyles[Enums.ContainerStyle.Accent].parse(obj[Enums.ContainerStyle.Accent]);
            this._allStyles[Enums.ContainerStyle.Good].parse(obj[Enums.ContainerStyle.Good]);
            this._allStyles[Enums.ContainerStyle.Attention].parse(obj[Enums.ContainerStyle.Attention]);
            this._allStyles[Enums.ContainerStyle.Warning].parse(obj[Enums.ContainerStyle.Warning]);
            var customStyleArray = obj["customStyles"];
            if (customStyleArray && Array.isArray(customStyleArray)) {
                for (var _i = 0, customStyleArray_1 = customStyleArray; _i < customStyleArray_1.length; _i++) {
                    var customStyle = customStyleArray_1[_i];
                    if (customStyle) {
                        var styleName = customStyle["name"];
                        if (styleName && typeof styleName === "string") {
                            if (this._allStyles.hasOwnProperty(styleName)) {
                                this._allStyles[styleName].parse(customStyle["style"]);
                            }
                            else {
                                this._allStyles[styleName] = new ContainerStyleDefinition(customStyle["style"]);
                            }
                        }
                    }
                }
            }
        }
    }
    ContainerStyleSet.prototype.toJSON = function () {
        var _this = this;
        var customStyleArray = [];
        Object.keys(this._allStyles).forEach(function (key) {
            if (!_this._allStyles[key].isBuiltIn) {
                customStyleArray.push({
                    name: key,
                    style: _this._allStyles[key]
                });
            }
        });
        var result = {
            default: this.default,
            emphasis: this.emphasis
        };
        if (customStyleArray.length > 0) {
            result.customStyles = customStyleArray;
        }
        return result;
    };
    ContainerStyleSet.prototype.getStyleByName = function (name, defaultValue) {
        if (name && this._allStyles.hasOwnProperty(name)) {
            return this._allStyles[name];
        }
        else {
            return defaultValue ? defaultValue : this._allStyles[Enums.ContainerStyle.Default];
        }
    };
    Object.defineProperty(ContainerStyleSet.prototype, "default", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Default];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ContainerStyleSet.prototype, "emphasis", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Emphasis];
        },
        enumerable: false,
        configurable: true
    });
    return ContainerStyleSet;
}());
exports.ContainerStyleSet = ContainerStyleSet;
var FontTypeDefinition = /** @class */ (function () {
    function FontTypeDefinition(fontFamily) {
        this.fontFamily = "Segoe UI,Segoe,Segoe WP,Helvetica Neue,Helvetica,sans-serif";
        this.fontSizes = {
            small: 12,
            default: 14,
            medium: 17,
            large: 21,
            extraLarge: 26
        };
        this.fontWeights = {
            lighter: 200,
            default: 400,
            bolder: 600
        };
        if (fontFamily) {
            this.fontFamily = fontFamily;
        }
    }
    FontTypeDefinition.prototype.parse = function (obj) {
        this.fontFamily = obj["fontFamily"] || this.fontFamily;
        this.fontSizes = {
            small: obj.fontSizes && obj.fontSizes["small"] || this.fontSizes.small,
            default: obj.fontSizes && obj.fontSizes["default"] || this.fontSizes.default,
            medium: obj.fontSizes && obj.fontSizes["medium"] || this.fontSizes.medium,
            large: obj.fontSizes && obj.fontSizes["large"] || this.fontSizes.large,
            extraLarge: obj.fontSizes && obj.fontSizes["extraLarge"] || this.fontSizes.extraLarge
        };
        this.fontWeights = {
            lighter: obj.fontWeights && obj.fontWeights["lighter"] || this.fontWeights.lighter,
            default: obj.fontWeights && obj.fontWeights["default"] || this.fontWeights.default,
            bolder: obj.fontWeights && obj.fontWeights["bolder"] || this.fontWeights.bolder
        };
    };
    FontTypeDefinition.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
    return FontTypeDefinition;
}());
exports.FontTypeDefinition = FontTypeDefinition;
var FontTypeSet = /** @class */ (function () {
    function FontTypeSet(obj) {
        this.default = new FontTypeDefinition();
        this.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
        if (obj) {
            this.default.parse(obj["default"]);
            this.monospace.parse(obj["monospace"]);
        }
    }
    FontTypeSet.prototype.getStyleDefinition = function (style) {
        switch (style) {
            case Enums.FontType.Monospace:
                return this.monospace;
            case Enums.FontType.Default:
            default:
                return this.default;
        }
    };
    return FontTypeSet;
}());
exports.FontTypeSet = FontTypeSet;
var HostConfig = /** @class */ (function () {
    function HostConfig(obj) {
        this.hostCapabilities = new host_capabilities_1.HostCapabilities();
        this.choiceSetInputValueSeparator = ",";
        this.supportsInteractivity = true;
        this.spacing = {
            small: 3,
            default: 8,
            medium: 20,
            large: 30,
            extraLarge: 40,
            padding: 15
        };
        this.separator = {
            lineThickness: 1,
            lineColor: "#EEEEEE"
        };
        this.imageSizes = {
            small: 40,
            medium: 80,
            large: 160
        };
        this.containerStyles = new ContainerStyleSet();
        this.actions = new ActionsConfig();
        this.adaptiveCard = new AdaptiveCardConfig();
        this.imageSet = new ImageSetConfig();
        this.media = new MediaConfig();
        this.factSet = new FactSetConfig();
        this.alwaysAllowBleed = false;
        if (obj) {
            if (typeof obj === "string" || obj instanceof String) {
                obj = JSON.parse(obj);
            }
            this.choiceSetInputValueSeparator = (obj && typeof obj["choiceSetInputValueSeparator"] === "string") ? obj["choiceSetInputValueSeparator"] : this.choiceSetInputValueSeparator;
            this.supportsInteractivity = (obj && typeof obj["supportsInteractivity"] === "boolean") ? obj["supportsInteractivity"] : this.supportsInteractivity;
            this._legacyFontType = new FontTypeDefinition();
            this._legacyFontType.parse(obj);
            if (obj.fontTypes) {
                this.fontTypes = new FontTypeSet(obj.fontTypes);
            }
            if (obj.lineHeights) {
                this.lineHeights = {
                    small: obj.lineHeights["small"],
                    default: obj.lineHeights["default"],
                    medium: obj.lineHeights["medium"],
                    large: obj.lineHeights["large"],
                    extraLarge: obj.lineHeights["extraLarge"]
                };
            }
            ;
            this.imageSizes = {
                small: obj.imageSizes && obj.imageSizes["small"] || this.imageSizes.small,
                medium: obj.imageSizes && obj.imageSizes["medium"] || this.imageSizes.medium,
                large: obj.imageSizes && obj.imageSizes["large"] || this.imageSizes.large,
            };
            this.containerStyles = new ContainerStyleSet(obj["containerStyles"]);
            this.spacing = {
                small: obj.spacing && obj.spacing["small"] || this.spacing.small,
                default: obj.spacing && obj.spacing["default"] || this.spacing.default,
                medium: obj.spacing && obj.spacing["medium"] || this.spacing.medium,
                large: obj.spacing && obj.spacing["large"] || this.spacing.large,
                extraLarge: obj.spacing && obj.spacing["extraLarge"] || this.spacing.extraLarge,
                padding: obj.spacing && obj.spacing["padding"] || this.spacing.padding
            };
            this.separator = {
                lineThickness: obj.separator && obj.separator["lineThickness"] || this.separator.lineThickness,
                lineColor: obj.separator && obj.separator["lineColor"] || this.separator.lineColor
            };
            this.actions = new ActionsConfig(obj.actions || this.actions);
            this.adaptiveCard = new AdaptiveCardConfig(obj.adaptiveCard || this.adaptiveCard);
            this.imageSet = new ImageSetConfig(obj["imageSet"]);
            this.factSet = new FactSetConfig(obj["factSet"]);
        }
    }
    HostConfig.prototype.getFontTypeDefinition = function (style) {
        if (this.fontTypes) {
            return this.fontTypes.getStyleDefinition(style);
        }
        else {
            return style == Enums.FontType.Monospace ? FontTypeDefinition.monospace : this._legacyFontType;
        }
    };
    HostConfig.prototype.getEffectiveSpacing = function (spacing) {
        switch (spacing) {
            case Enums.Spacing.Small:
                return this.spacing.small;
            case Enums.Spacing.Default:
                return this.spacing.default;
            case Enums.Spacing.Medium:
                return this.spacing.medium;
            case Enums.Spacing.Large:
                return this.spacing.large;
            case Enums.Spacing.ExtraLarge:
                return this.spacing.extraLarge;
            case Enums.Spacing.Padding:
                return this.spacing.padding;
            default:
                return 0;
        }
    };
    HostConfig.prototype.paddingDefinitionToSpacingDefinition = function (paddingDefinition) {
        return new Shared.SpacingDefinition(this.getEffectiveSpacing(paddingDefinition.top), this.getEffectiveSpacing(paddingDefinition.right), this.getEffectiveSpacing(paddingDefinition.bottom), this.getEffectiveSpacing(paddingDefinition.left));
    };
    HostConfig.prototype.makeCssClassNames = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = [];
        for (var _a = 0, classNames_1 = classNames; _a < classNames_1.length; _a++) {
            var className = classNames_1[_a];
            result.push((this.cssClassNamePrefix ? this.cssClassNamePrefix + "-" : "") + className);
        }
        return result;
    };
    HostConfig.prototype.makeCssClassName = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = this.makeCssClassNames.apply(this, classNames).join(" ");
        return result ? result : "";
    };
    Object.defineProperty(HostConfig.prototype, "fontFamily", {
        get: function () {
            return this._legacyFontType.fontFamily;
        },
        set: function (value) {
            this._legacyFontType.fontFamily = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontSizes", {
        get: function () {
            return this._legacyFontType.fontSizes;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontWeights", {
        get: function () {
            return this._legacyFontType.fontWeights;
        },
        enumerable: false,
        configurable: true
    });
    return HostConfig;
}());
exports.HostConfig = HostConfig;
exports.defaultHostConfig = new HostConfig({
    supportsInteractivity: true,
    spacing: {
        small: 10,
        default: 20,
        medium: 30,
        large: 40,
        extraLarge: 50,
        padding: 20
    },
    separator: {
        lineThickness: 1,
        lineColor: "#EEEEEE"
    },
    fontTypes: {
        default: {
            fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        },
        monospace: {
            fontFamily: "'Courier New', Courier, monospace",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        }
    },
    imageSizes: {
        small: 40,
        medium: 80,
        large: 160
    },
    containerStyles: {
        default: {
            backgroundColor: "#FFFFFF",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        emphasis: {
            backgroundColor: "#08000000",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        accent: {
            backgroundColor: "#C7DEF9",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        good: {
            backgroundColor: "#CCFFCC",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        attention: {
            backgroundColor: "#FFC5B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        warning: {
            backgroundColor: "#FFE2B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        }
    },
    actions: {
        maxActions: 5,
        spacing: Enums.Spacing.Default,
        buttonSpacing: 10,
        showCard: {
            actionMode: Enums.ShowCardActionMode.Inline,
            inlineTopMargin: 16
        },
        actionsOrientation: Enums.Orientation.Horizontal,
        actionAlignment: Enums.ActionAlignment.Left
    },
    adaptiveCard: {
        allowCustomStyle: false
    },
    imageSet: {
        imageSize: Enums.Size.Medium,
        maxImageHeight: 100
    },
    factSet: {
        title: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Bolder,
            wrap: true,
            maxWidth: 150,
        },
        value: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Default,
            wrap: true,
        },
        spacing: 10
    }
});


/***/ }),

/***/ "./src/registry.ts":
/*!*************************!*\
  !*** ./src/registry.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CardObjectRegistry = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var CardObjectRegistry = /** @class */ (function () {
    function CardObjectRegistry() {
        this._items = {};
    }
    CardObjectRegistry.prototype.findByName = function (typeName) {
        return this._items.hasOwnProperty(typeName) ? this._items[typeName] : undefined;
    };
    CardObjectRegistry.prototype.clear = function () {
        this._items = {};
    };
    CardObjectRegistry.prototype.register = function (typeName, objectType, schemaVersion) {
        if (schemaVersion === void 0) { schemaVersion = serialization_1.Versions.v1_0; }
        var registrationInfo = this.findByName(typeName);
        if (registrationInfo !== undefined) {
            registrationInfo.objectType = objectType;
        }
        else {
            registrationInfo = {
                typeName: typeName,
                objectType: objectType,
                schemaVersion: schemaVersion
            };
        }
        this._items[typeName] = registrationInfo;
    };
    CardObjectRegistry.prototype.unregister = function (typeName) {
        delete this._items[typeName];
    };
    CardObjectRegistry.prototype.createInstance = function (typeName, targetVersion) {
        var registrationInfo = this.findByName(typeName);
        return (registrationInfo && registrationInfo.schemaVersion.compareTo(targetVersion) <= 0) ? new registrationInfo.objectType() : undefined;
    };
    CardObjectRegistry.prototype.getItemCount = function () {
        return Object.keys(this._items).length;
    };
    CardObjectRegistry.prototype.getItemAt = function (index) {
        return Object.values(this._items)[index];
    };
    return CardObjectRegistry;
}());
exports.CardObjectRegistry = CardObjectRegistry;


/***/ }),

/***/ "./src/serialization.ts":
/*!******************************!*\
  !*** ./src/serialization.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SerializableObject = exports.property = exports.SerializableObjectSchema = exports.CustomProperty = exports.SerializableObjectCollectionProperty = exports.SerializableObjectProperty = exports.EnumProperty = exports.ValueSetProperty = exports.PixelSizeProperty = exports.NumProperty = exports.BoolProperty = exports.StringProperty = exports.PropertyDefinition = exports.BaseSerializationContext = exports.isVersionLessOrEqual = exports.Versions = exports.Version = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var Version = /** @class */ (function () {
    function Version(major, minor, label) {
        if (major === void 0) { major = 1; }
        if (minor === void 0) { minor = 1; }
        this._isValid = true;
        this._major = major;
        this._minor = minor;
        this._label = label;
    }
    Version.parse = function (versionString, context) {
        if (!versionString) {
            return undefined;
        }
        var result = new Version();
        result._versionString = versionString;
        var regEx = /(\d+).(\d+)/gi;
        var matches = regEx.exec(versionString);
        if (matches != null && matches.length == 3) {
            result._major = parseInt(matches[1]);
            result._minor = parseInt(matches[2]);
        }
        else {
            result._isValid = false;
        }
        if (!result._isValid) {
            context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid version string: " + result._versionString);
        }
        return result;
    };
    Version.prototype.toString = function () {
        return !this._isValid ? this._versionString : this._major + "." + this._minor;
    };
    Version.prototype.toJSON = function () {
        return this.toString();
    };
    Version.prototype.compareTo = function (otherVersion) {
        if (!this.isValid || !otherVersion.isValid) {
            throw new Error("Cannot compare invalid version.");
        }
        if (this.major > otherVersion.major) {
            return 1;
        }
        else if (this.major < otherVersion.major) {
            return -1;
        }
        else if (this.minor > otherVersion.minor) {
            return 1;
        }
        else if (this.minor < otherVersion.minor) {
            return -1;
        }
        return 0;
    };
    Object.defineProperty(Version.prototype, "label", {
        get: function () {
            return this._label ? this._label : this.toString();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "major", {
        get: function () {
            return this._major;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "minor", {
        get: function () {
            return this._minor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "isValid", {
        get: function () {
            return this._isValid;
        },
        enumerable: false,
        configurable: true
    });
    return Version;
}());
exports.Version = Version;
var Versions = /** @class */ (function () {
    function Versions() {
    }
    Versions.v1_0 = new Version(1, 0);
    Versions.v1_1 = new Version(1, 1);
    Versions.v1_2 = new Version(1, 2);
    Versions.v1_3 = new Version(1, 3, "1.3 (Preview)");
    Versions.latest = Versions.v1_2;
    return Versions;
}());
exports.Versions = Versions;
function isVersionLessOrEqual(version, targetVersion) {
    if (version instanceof Version) {
        if (targetVersion instanceof Version) {
            return targetVersion.compareTo(version) >= 0;
        }
        else {
            // Target version is *
            return true;
        }
    }
    else {
        // Version is *
        return true;
    }
}
exports.isVersionLessOrEqual = isVersionLessOrEqual;
var BaseSerializationContext = /** @class */ (function () {
    function BaseSerializationContext(targetVersion) {
        if (targetVersion === void 0) { targetVersion = Versions.latest; }
        this.targetVersion = targetVersion;
        this._validationEvents = [];
    }
    BaseSerializationContext.prototype.serializeValue = function (target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {
            delete target[propertyName];
        }
        else {
            target[propertyName] = propertyValue;
        }
    };
    BaseSerializationContext.prototype.serializeNumber = function (target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {
            delete target[propertyName];
        }
        else {
            target[propertyName] = propertyValue;
        }
    };
    BaseSerializationContext.prototype.serializeEnum = function (enumType, target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        var targetValue = target[propertyName];
        var canDeleteTarget = targetValue == undefined ? true : enumType[targetValue] !== undefined;
        if (propertyValue == defaultValue) {
            if (canDeleteTarget) {
                delete target[propertyName];
            }
        }
        else {
            if (propertyValue == undefined) {
                if (canDeleteTarget) {
                    delete target[propertyName];
                }
            }
            else {
                target[propertyName] = enumType[propertyValue];
            }
        }
    };
    BaseSerializationContext.prototype.serializeArray = function (target, propertyName, propertyValue) {
        var items = [];
        if (propertyValue) {
            for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {
                var item = propertyValue_1[_i];
                var serializedItem = undefined;
                if (item instanceof SerializableObject) {
                    serializedItem = item.toJSON(this);
                }
                else if (item.toJSON) {
                    serializedItem = item.toJSON();
                }
                else {
                    serializedItem = item;
                }
                if (serializedItem !== undefined) {
                    items.push(serializedItem);
                }
            }
        }
        if (items.length == 0) {
            if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {
                delete target[propertyName];
            }
        }
        else {
            this.serializeValue(target, propertyName, items);
        }
    };
    BaseSerializationContext.prototype.clearEvents = function () {
        this._validationEvents = [];
    };
    BaseSerializationContext.prototype.logEvent = function (phase, event, message, source) {
        this._validationEvents.push({
            phase: phase,
            event: event,
            message: message
        });
    };
    BaseSerializationContext.prototype.logParseEvent = function (event, message, source) {
        this.logEvent(Enums.ValidationPhase.Parse, event, message, source);
    };
    BaseSerializationContext.prototype.getEventAt = function (index) {
        return this._validationEvents[index];
    };
    Object.defineProperty(BaseSerializationContext.prototype, "eventCount", {
        get: function () {
            return this._validationEvents.length;
        },
        enumerable: false,
        configurable: true
    });
    return BaseSerializationContext;
}());
exports.BaseSerializationContext = BaseSerializationContext;
var SimpleSerializationContext = /** @class */ (function (_super) {
    __extends(SimpleSerializationContext, _super);
    function SimpleSerializationContext() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return SimpleSerializationContext;
}(BaseSerializationContext));
var PropertyDefinition = /** @class */ (function () {
    function PropertyDefinition(targetVersion, name, defaultValue, onGetInitialValue) {
        this.targetVersion = targetVersion;
        this.name = name;
        this.defaultValue = defaultValue;
        this.onGetInitialValue = onGetInitialValue;
        this.sequentialNumber = PropertyDefinition._sequentialNumber;
        PropertyDefinition._sequentialNumber++;
    }
    PropertyDefinition.prototype.getInternalName = function () {
        return this.name;
    };
    PropertyDefinition.prototype.parse = function (sender, source, context) {
        return source[this.name];
    };
    PropertyDefinition.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value, this.defaultValue);
    };
    PropertyDefinition._sequentialNumber = 0;
    return PropertyDefinition;
}());
exports.PropertyDefinition = PropertyDefinition;
var StringProperty = /** @class */ (function (_super) {
    __extends(StringProperty, _super);
    function StringProperty(targetVersion, name, treatEmptyAsUndefined, regEx, defaultValue, onGetInitialValue) {
        if (treatEmptyAsUndefined === void 0) { treatEmptyAsUndefined = true; }
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.treatEmptyAsUndefined = treatEmptyAsUndefined;
        _this.regEx = regEx;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        return _this;
    }
    StringProperty.prototype.parse = function (sender, source, context) {
        var parsedValue = Utils.parseString(source[this.name], this.defaultValue);
        var isUndefined = parsedValue === undefined || (parsedValue === "" && this.treatEmptyAsUndefined);
        if (!isUndefined && this.regEx !== undefined) {
            var matches = this.regEx.exec(parsedValue);
            if (!matches) {
                context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid \"" + this.name + "\" value \"" + parsedValue + "\"", sender);
                return undefined;
            }
        }
        return parsedValue;
    };
    StringProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value === "" && this.treatEmptyAsUndefined ? undefined : value, this.defaultValue);
    };
    return StringProperty;
}(PropertyDefinition));
exports.StringProperty = StringProperty;
var BoolProperty = /** @class */ (function (_super) {
    __extends(BoolProperty, _super);
    function BoolProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BoolProperty.prototype.parse = function (sender, source, context) {
        return Utils.parseBool(source[this.name], this.defaultValue);
    };
    BoolProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value, this.defaultValue);
    };
    return BoolProperty;
}(PropertyDefinition));
exports.BoolProperty = BoolProperty;
var NumProperty = /** @class */ (function (_super) {
    __extends(NumProperty, _super);
    function NumProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumProperty.prototype.parse = function (sender, source, context) {
        return Utils.parseNumber(source[this.name], this.defaultValue);
    };
    NumProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeNumber(target, this.name, value, this.defaultValue);
    };
    return NumProperty;
}(PropertyDefinition));
exports.NumProperty = NumProperty;
var PixelSizeProperty = /** @class */ (function (_super) {
    __extends(PixelSizeProperty, _super);
    function PixelSizeProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PixelSizeProperty.prototype.parse = function (sender, source, context) {
        var result = undefined;
        var value = source[this.name];
        if (typeof value === "string") {
            var isValid = false;
            try {
                var size = shared_1.SizeAndUnit.parse(value, true);
                if (size.unit == Enums.SizeUnit.Pixel) {
                    result = size.physicalSize;
                    isValid = true;
                }
            }
            catch (_a) {
                // Do nothing. A parse error is emitted below
            }
            if (!isValid) {
                context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid \"minHeight\" value: " + source[this.name], sender);
            }
        }
        return result;
    };
    PixelSizeProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, typeof value === "number" && !isNaN(value) ? value + "px" : undefined);
    };
    return PixelSizeProperty;
}(PropertyDefinition));
exports.PixelSizeProperty = PixelSizeProperty;
var ValueSetProperty = /** @class */ (function (_super) {
    __extends(ValueSetProperty, _super);
    function ValueSetProperty(targetVersion, name, values, defaultValue, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.values = values;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        return _this;
    }
    ValueSetProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.defaultValue;
        }
        if (typeof sourceValue === "string") {
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (sourceValue.toLowerCase() === versionedValue.value.toLowerCase()) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        return versionedValue.value;
                    }
                    else {
                        context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "\"" + this.name + "\" value \"" + sourceValue + "\" is supported in version " + targetVersion.toString() + ", but you are using version " + context.targetVersion.toString(), sender);
                        return this.defaultValue;
                    }
                }
            }
        }
        context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid \"" + this.name + "\" value \"" + sourceValue + "\"", sender);
        return this.defaultValue;
    };
    ValueSetProperty.prototype.toJSON = function (sender, target, value, context) {
        var valueFound = false;
        for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
            var versionedValue = _a[_i];
            if (versionedValue.value === value) {
                var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                if (targetVersion.compareTo(context.targetVersion) <= 0) {
                    valueFound = true;
                    break;
                }
                else {
                    context.logEvent(Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, "\"" + this.name + "\" value \"" + value + "\" is supported in version " + targetVersion.toString() + ", but you are using version " + context.targetVersion.toString(), sender);
                }
            }
        }
        if (valueFound) {
            context.serializeValue(target, this.name, value, this.defaultValue);
        }
    };
    return ValueSetProperty;
}(PropertyDefinition));
exports.ValueSetProperty = ValueSetProperty;
var EnumProperty = /** @class */ (function (_super) {
    __extends(EnumProperty, _super);
    function EnumProperty(targetVersion, name, enumType, defaultValue, values, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.enumType = enumType;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        _this._values = [];
        if (!values) {
            for (var key in enumType) {
                var keyAsNumber = parseInt(key, 10);
                if (keyAsNumber >= 0) {
                    _this._values.push({ value: keyAsNumber });
                }
            }
        }
        else {
            _this._values = values;
        }
        return _this;
    }
    EnumProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (typeof sourceValue !== "string") {
            return this.defaultValue;
        }
        var enumValue = Utils.getEnumValueByName(this.enumType, sourceValue);
        if (enumValue !== undefined) {
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (versionedValue.value === enumValue) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        return enumValue;
                    }
                    else {
                        context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "\"" + this.name + "\" value \"" + sourceValue + "\" is supported in version " + targetVersion.toString() + ", but you are using version " + context.targetVersion.toString(), sender);
                        return this.defaultValue;
                    }
                }
            }
        }
        context.logParseEvent(Enums.ValidationEvent.InvalidPropertyValue, "Invalid \"" + this.name + "\" value \"" + sourceValue + "\"", sender);
        return this.defaultValue;
    };
    EnumProperty.prototype.toJSON = function (sender, target, value, context) {
        if (value !== undefined) {
            var valueFound = false;
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (versionedValue.value === value) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        valueFound = true;
                        break;
                    }
                    else {
                        context.logEvent(Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, "Invalid \"" + this.name + "\" value \"" + value + "\"", sender);
                    }
                }
            }
            if (valueFound) {
                context.serializeEnum(this.enumType, target, this.name, value, this.defaultValue);
            }
        }
    };
    Object.defineProperty(EnumProperty.prototype, "values", {
        get: function () {
            return this._values;
        },
        enumerable: false,
        configurable: true
    });
    return EnumProperty;
}(PropertyDefinition));
exports.EnumProperty = EnumProperty;
var SerializableObjectProperty = /** @class */ (function (_super) {
    __extends(SerializableObjectProperty, _super);
    function SerializableObjectProperty(targetVersion, name, objectType) {
        var _this = _super.call(this, targetVersion, name, undefined, function (sender) { return new _this.objectType(); }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.objectType = objectType;
        return _this;
    }
    SerializableObjectProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.onGetInitialValue ? this.onGetInitialValue(sender) : this.defaultValue;
        }
        var result = new this.objectType();
        result.parse(sourceValue, context);
        return result;
    };
    SerializableObjectProperty.prototype.toJSON = function (sender, target, value, context) {
        var serializedValue = value !== undefined ? value.toJSON(context) : value;
        if (typeof serializedValue === "object" && Object.keys(serializedValue).length === 0) {
            serializedValue = undefined;
        }
        _super.prototype.toJSON.call(this, sender, target, serializedValue, context);
    };
    return SerializableObjectProperty;
}(PropertyDefinition));
exports.SerializableObjectProperty = SerializableObjectProperty;
var SerializableObjectCollectionProperty = /** @class */ (function (_super) {
    __extends(SerializableObjectCollectionProperty, _super);
    function SerializableObjectCollectionProperty(targetVersion, name, objectType, onItemAdded) {
        var _this = _super.call(this, targetVersion, name, undefined, function (sender) { return []; }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.objectType = objectType;
        _this.onItemAdded = onItemAdded;
        return _this;
    }
    SerializableObjectCollectionProperty.prototype.parse = function (sender, source, context) {
        var result = [];
        var sourceCollection = source[this.name];
        if (Array.isArray(sourceCollection)) {
            for (var _i = 0, sourceCollection_1 = sourceCollection; _i < sourceCollection_1.length; _i++) {
                var sourceItem = sourceCollection_1[_i];
                var item = new this.objectType();
                item.parse(sourceItem, context);
                result.push(item);
                if (this.onItemAdded) {
                    this.onItemAdded(sender, item);
                }
            }
        }
        return result.length > 0 ? result : (this.onGetInitialValue ? this.onGetInitialValue(sender) : undefined);
    };
    SerializableObjectCollectionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeArray(target, this.name, value);
    };
    return SerializableObjectCollectionProperty;
}(PropertyDefinition));
exports.SerializableObjectCollectionProperty = SerializableObjectCollectionProperty;
var CustomProperty = /** @class */ (function (_super) {
    __extends(CustomProperty, _super);
    function CustomProperty(targetVersion, name, onParse, onToJSON, defaultValue, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.onParse = onParse;
        _this.onToJSON = onToJSON;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        if (!_this.onParse) {
            throw new Error("CustomPropertyDefinition instances must have an onParse handler.");
        }
        if (!_this.onToJSON) {
            throw new Error("CustomPropertyDefinition instances must have an onToJSON handler.");
        }
        return _this;
    }
    CustomProperty.prototype.parse = function (sender, source, context) {
        return this.onParse(sender, this, source, context);
    };
    CustomProperty.prototype.toJSON = function (sender, target, value, context) {
        this.onToJSON(sender, this, target, value, context);
    };
    return CustomProperty;
}(PropertyDefinition));
exports.CustomProperty = CustomProperty;
var SerializableObjectSchema = /** @class */ (function () {
    function SerializableObjectSchema() {
        this._properties = [];
    }
    SerializableObjectSchema.prototype.indexOf = function (property) {
        for (var i = 0; i < this._properties.length; i++) {
            if (this._properties[i] === property) {
                return i;
            }
        }
        return -1;
    };
    SerializableObjectSchema.prototype.add = function () {
        var properties = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            properties[_i] = arguments[_i];
        }
        for (var i = 0; i < properties.length; i++) {
            if (this.indexOf(properties[i]) === -1) {
                this._properties.push(properties[i]);
            }
        }
    };
    SerializableObjectSchema.prototype.remove = function () {
        var properties = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            properties[_i] = arguments[_i];
        }
        for (var _a = 0, properties_1 = properties; _a < properties_1.length; _a++) {
            var property_1 = properties_1[_a];
            while (true) {
                var index = this.indexOf(property_1);
                if (index >= 0) {
                    this._properties.splice(index, 1);
                }
                else {
                    break;
                }
            }
        }
    };
    SerializableObjectSchema.prototype.getItemAt = function (index) {
        return this._properties[index];
    };
    SerializableObjectSchema.prototype.getCount = function () {
        return this._properties.length;
    };
    return SerializableObjectSchema;
}());
exports.SerializableObjectSchema = SerializableObjectSchema;
// This is a decorator function, used to map SerializableObject descendant class members to
// schema properties
function property(property) {
    return function (target, propertyKey) {
        var descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};
        if (!descriptor.get && !descriptor.set) {
            descriptor.get = function () { return this.getValue(property); };
            descriptor.set = function (value) { this.setValue(property, value); };
            Object.defineProperty(target, propertyKey, descriptor);
        }
    };
}
exports.property = property;
var SerializableObject = /** @class */ (function () {
    function SerializableObject() {
        this._propertyBag = {};
        this._rawProperties = {};
        this.maxVersion = Versions.v1_3;
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_2 = s.getItemAt(i);
            if (property_2.onGetInitialValue) {
                this.setValue(property_2, property_2.onGetInitialValue(this));
            }
        }
    }
    SerializableObject.prototype.populateSchema = function (schema) {
        var ctor = this.constructor;
        var properties = [];
        for (var propertyName in ctor) {
            try {
                var propertyValue = ctor[propertyName];
                if (propertyValue instanceof PropertyDefinition) {
                    properties.push(propertyValue);
                }
            }
            catch (_a) {
                // If a property happens to have a getter function and
                // it throws an exception, we need to catch it here
            }
        }
        if (properties.length > 0) {
            var sortedProperties = properties.sort(function (p1, p2) {
                if (p1.sequentialNumber > p2.sequentialNumber) {
                    return 1;
                }
                else if (p1.sequentialNumber < p2.sequentialNumber) {
                    return -1;
                }
                return 0;
            });
            schema.add.apply(schema, sortedProperties);
        }
        if (SerializableObject.onRegisterCustomProperties) {
            SerializableObject.onRegisterCustomProperties(this, schema);
        }
    };
    SerializableObject.prototype.getValue = function (property) {
        return this._propertyBag.hasOwnProperty(property.getInternalName()) ? this._propertyBag[property.getInternalName()] : property.defaultValue;
    };
    SerializableObject.prototype.setValue = function (property, value) {
        if (value === undefined || value === null) {
            delete this._propertyBag[property.getInternalName()];
        }
        else {
            this._propertyBag[property.getInternalName()] = value;
        }
    };
    SerializableObject.prototype.internalParse = function (source, context) {
        this._propertyBag = {};
        this._rawProperties = shared_1.GlobalSettings.enableFullJsonRoundTrip ? (source ? source : {}) : {};
        if (source) {
            var s = this.getSchema();
            for (var i = 0; i < s.getCount(); i++) {
                var property_3 = s.getItemAt(i);
                var propertyValue = property_3.onGetInitialValue ? property_3.onGetInitialValue(this) : undefined;
                if (source.hasOwnProperty(property_3.name)) {
                    if (property_3.targetVersion.compareTo(context.targetVersion) <= 0) {
                        propertyValue = property_3.parse(this, source, context);
                    }
                    else {
                        context.logParseEvent(Enums.ValidationEvent.UnsupportedProperty, "Property \"" + property_3.name + "\" is supported in version " + property_3.targetVersion.toString() + ", but you are using version " + context.targetVersion.toString(), this);
                    }
                }
                this.setValue(property_3, propertyValue);
            }
        }
        else {
            this.resetDefaultValues();
        }
    };
    SerializableObject.prototype.internalToJSON = function (target, context) {
        var s = this.getSchema();
        var serializedProperties = [];
        for (var i = 0; i < s.getCount(); i++) {
            var property_4 = s.getItemAt(i);
            // Avoid serializing the same property multiple times. This is necessary
            // because some property definitions map to the same underlying schema
            // property
            if (property_4.targetVersion.compareTo(context.targetVersion) <= 0 && serializedProperties.indexOf(property_4.name) === -1) {
                property_4.toJSON(this, target, this.getValue(property_4), context);
                serializedProperties.push(property_4.name);
            }
        }
    };
    SerializableObject.prototype.shouldSerialize = function (context) {
        return true;
    };
    SerializableObject.prototype.parse = function (source, context) {
        this.internalParse(source, context ? context : new SimpleSerializationContext());
    };
    SerializableObject.prototype.toJSON = function (context) {
        var effectiveContext = context ? context : new SimpleSerializationContext();
        if (this.shouldSerialize(effectiveContext)) {
            var result = void 0;
            if (shared_1.GlobalSettings.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === "object") {
                result = this._rawProperties;
            }
            else {
                result = {};
            }
            this.internalToJSON(result, effectiveContext);
            return result;
        }
        else {
            return undefined;
        }
    };
    SerializableObject.prototype.hasDefaultValue = function (property) {
        return this.getValue(property) === property.defaultValue;
    };
    SerializableObject.prototype.hasAllDefaultValues = function () {
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_5 = s.getItemAt(i);
            if (!this.hasDefaultValue(property_5)) {
                return false;
            }
        }
        return true;
    };
    SerializableObject.prototype.resetDefaultValues = function () {
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_6 = s.getItemAt(i);
            this.setValue(property_6, property_6.defaultValue);
        }
    };
    SerializableObject.prototype.setCustomProperty = function (name, value) {
        var shouldDeleteProperty = (typeof value === "string" && !value) || value === undefined || value === null;
        if (shouldDeleteProperty) {
            delete this._rawProperties[name];
        }
        else {
            this._rawProperties[name] = value;
        }
    };
    SerializableObject.prototype.getCustomProperty = function (name) {
        return this._rawProperties[name];
    };
    SerializableObject.prototype.getSchema = function () {
        var schema = SerializableObject._schemaCache[this.getSchemaKey()];
        if (!schema) {
            schema = new SerializableObjectSchema();
            this.populateSchema(schema);
            SerializableObject._schemaCache[this.getSchemaKey()] = schema;
        }
        return schema;
    };
    SerializableObject._schemaCache = {};
    return SerializableObject;
}());
exports.SerializableObject = SerializableObject;


/***/ }),

/***/ "./src/shared.ts":
/*!***********************!*\
  !*** ./src/shared.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.UUID = exports.SizeAndUnit = exports.PaddingDefinition = exports.SpacingDefinition = exports.StringWithSubstitutions = exports.ContentTypes = exports.GlobalSettings = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var GlobalSettings = /** @class */ (function () {
    function GlobalSettings() {
    }
    GlobalSettings.useAdvancedTextBlockTruncation = true;
    GlobalSettings.useAdvancedCardBottomTruncation = false;
    GlobalSettings.useMarkdownInRadioButtonAndCheckbox = true;
    GlobalSettings.allowMarkForTextHighlighting = false;
    GlobalSettings.alwaysBleedSeparators = false;
    GlobalSettings.enableFullJsonRoundTrip = false;
    GlobalSettings.useBuiltInInputValidation = true;
    GlobalSettings.displayInputValidationErrors = true;
    GlobalSettings.allowPreProcessingPropertyValues = false;
    GlobalSettings.setTabIndexAtCardRoot = true;
    return GlobalSettings;
}());
exports.GlobalSettings = GlobalSettings;
exports.ContentTypes = {
    applicationJson: "application/json",
    applicationXWwwFormUrlencoded: "application/x-www-form-urlencoded"
};
var StringWithSubstitutions = /** @class */ (function () {
    function StringWithSubstitutions() {
        this._isProcessed = false;
    }
    StringWithSubstitutions.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        if (!referencedInputs) {
            throw new Error("The referencedInputs parameter cannot be null.");
        }
        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {
            var input = inputs_1[_i];
            var matches = new RegExp("\\{{2}(" + input.id + ").value\\}{2}", "gi").exec(this._original);
            if (matches != null && input.id) {
                referencedInputs[input.id] = input;
            }
        }
    };
    StringWithSubstitutions.prototype.substituteInputValues = function (inputs, contentType) {
        this._processed = this._original;
        if (this._original) {
            var regEx = /\{{2}([a-z0-9_$@]+).value\}{2}/gi;
            var matches = void 0;
            while ((matches = regEx.exec(this._original)) !== null) {
                for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
                    var key = _a[_i];
                    if (key.toLowerCase() == matches[1].toLowerCase()) {
                        var matchedInput = inputs[key];
                        var valueForReplace = "";
                        if (matchedInput.value) {
                            valueForReplace = matchedInput.value;
                        }
                        if (contentType === exports.ContentTypes.applicationJson) {
                            valueForReplace = JSON.stringify(valueForReplace);
                            valueForReplace = valueForReplace.slice(1, -1);
                        }
                        else if (contentType === exports.ContentTypes.applicationXWwwFormUrlencoded) {
                            valueForReplace = encodeURIComponent(valueForReplace);
                        }
                        this._processed = this._processed.replace(matches[0], valueForReplace);
                        break;
                    }
                }
            }
        }
        this._isProcessed = true;
    };
    StringWithSubstitutions.prototype.getOriginal = function () {
        return this._original;
    };
    StringWithSubstitutions.prototype.get = function () {
        if (!this._isProcessed) {
            return this._original;
        }
        else {
            return this._processed;
        }
    };
    StringWithSubstitutions.prototype.set = function (value) {
        this._original = value;
        this._isProcessed = false;
    };
    return StringWithSubstitutions;
}());
exports.StringWithSubstitutions = StringWithSubstitutions;
var SpacingDefinition = /** @class */ (function () {
    function SpacingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = 0; }
        if (right === void 0) { right = 0; }
        if (bottom === void 0) { bottom = 0; }
        if (left === void 0) { left = 0; }
        this.left = 0;
        this.top = 0;
        this.right = 0;
        this.bottom = 0;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return SpacingDefinition;
}());
exports.SpacingDefinition = SpacingDefinition;
var PaddingDefinition = /** @class */ (function () {
    function PaddingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = Enums.Spacing.None; }
        if (right === void 0) { right = Enums.Spacing.None; }
        if (bottom === void 0) { bottom = Enums.Spacing.None; }
        if (left === void 0) { left = Enums.Spacing.None; }
        this.top = Enums.Spacing.None;
        this.right = Enums.Spacing.None;
        this.bottom = Enums.Spacing.None;
        this.left = Enums.Spacing.None;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return PaddingDefinition;
}());
exports.PaddingDefinition = PaddingDefinition;
var SizeAndUnit = /** @class */ (function () {
    function SizeAndUnit(physicalSize, unit) {
        this.physicalSize = physicalSize;
        this.unit = unit;
    }
    SizeAndUnit.parse = function (input, requireUnitSpecifier) {
        if (requireUnitSpecifier === void 0) { requireUnitSpecifier = false; }
        var result = new SizeAndUnit(0, Enums.SizeUnit.Weight);
        if (typeof input === "number") {
            result.physicalSize = input;
            return result;
        }
        else if (typeof input === "string") {
            var regExp = /^([0-9]+)(px|\*)?$/g;
            var matches = regExp.exec(input);
            var expectedMatchCount = requireUnitSpecifier ? 3 : 2;
            if (matches && matches.length >= expectedMatchCount) {
                result.physicalSize = parseInt(matches[1]);
                if (matches.length == 3) {
                    if (matches[2] == "px") {
                        result.unit = Enums.SizeUnit.Pixel;
                    }
                }
                return result;
            }
        }
        throw new Error("Invalid size: " + input);
    };
    return SizeAndUnit;
}());
exports.SizeAndUnit = SizeAndUnit;
/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/
var UUID = /** @class */ (function () {
    function UUID() {
    }
    UUID.generate = function () {
        var d0 = Math.random() * 0xffffffff | 0;
        var d1 = Math.random() * 0xffffffff | 0;
        var d2 = Math.random() * 0xffffffff | 0;
        var d3 = Math.random() * 0xffffffff | 0;
        return UUID.lut[d0 & 0xff] + UUID.lut[d0 >> 8 & 0xff] + UUID.lut[d0 >> 16 & 0xff] + UUID.lut[d0 >> 24 & 0xff] + '-' +
            UUID.lut[d1 & 0xff] + UUID.lut[d1 >> 8 & 0xff] + '-' + UUID.lut[d1 >> 16 & 0x0f | 0x40] + UUID.lut[d1 >> 24 & 0xff] + '-' +
            UUID.lut[d2 & 0x3f | 0x80] + UUID.lut[d2 >> 8 & 0xff] + '-' + UUID.lut[d2 >> 16 & 0xff] + UUID.lut[d2 >> 24 & 0xff] +
            UUID.lut[d3 & 0xff] + UUID.lut[d3 >> 8 & 0xff] + UUID.lut[d3 >> 16 & 0xff] + UUID.lut[d3 >> 24 & 0xff];
    };
    UUID.initialize = function () {
        for (var i = 0; i < 256; i++) {
            UUID.lut[i] = (i < 16 ? '0' : '') + i.toString(16);
        }
    };
    UUID.lut = [];
    return UUID;
}());
exports.UUID = UUID;
UUID.initialize();


/***/ }),

/***/ "./src/text-formatters.ts":
/*!********************************!*\
  !*** ./src/text-formatters.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatText = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var AbstractTextFormatter = /** @class */ (function () {
    function AbstractTextFormatter(regularExpression) {
        this._regularExpression = regularExpression;
    }
    AbstractTextFormatter.prototype.format = function (lang, input) {
        var matches;
        if (input) {
            var result = input;
            while ((matches = this._regularExpression.exec(input)) != null) {
                result = result.replace(matches[0], this.internalFormat(lang, matches));
            }
            ;
            return result;
        }
        else {
            return input;
        }
    };
    return AbstractTextFormatter;
}());
var DateFormatter = /** @class */ (function (_super) {
    __extends(DateFormatter, _super);
    function DateFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        var format = matches[2] != undefined ? matches[2].toLowerCase() : "compact";
        if (format != "compact") {
            return date.toLocaleDateString(lang, { day: "numeric", weekday: format, month: format, year: "numeric" });
        }
        else {
            return date.toLocaleDateString();
        }
    };
    return DateFormatter;
}(AbstractTextFormatter));
var TimeFormatter = /** @class */ (function (_super) {
    __extends(TimeFormatter, _super);
    function TimeFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        return date.toLocaleTimeString(lang, { hour: 'numeric', minute: '2-digit' });
    };
    return TimeFormatter;
}(AbstractTextFormatter));
function formatText(lang, text) {
    var formatters = [
        new DateFormatter(/\{{2}DATE\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))(?:, ?(COMPACT|LONG|SHORT))?\)\}{2}/g),
        new TimeFormatter(/\{{2}TIME\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))\)\}{2}/g)
    ];
    var result = text;
    for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {
        var formatter = formatters_1[_i];
        result = formatter.format(lang, result);
    }
    return result;
}
exports.formatText = formatText;


/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.getFitStatus = exports.truncate = exports.stringToCssColor = exports.renderSeparation = exports.parseEnum = exports.getEnumValueByName = exports.parseBool = exports.parseNumber = exports.parseString = exports.appendChild = exports.generateUniqueId = exports.isMobileOS = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
function isMobileOS() {
    var userAgent = window.navigator.userAgent;
    return !!userAgent.match(/Android/i) || !!userAgent.match(/iPad/i) || !!userAgent.match(/iPhone/i);
}
exports.isMobileOS = isMobileOS;
/**
 * Generate a UUID prepended with "__ac-"
 */
function generateUniqueId() {
    return "__ac-" + Shared.UUID.generate();
}
exports.generateUniqueId = generateUniqueId;
function appendChild(node, child) {
    if (child) {
        node.appendChild(child);
    }
}
exports.appendChild = appendChild;
function parseString(obj, defaultValue) {
    return typeof obj === "string" ? obj : defaultValue;
}
exports.parseString = parseString;
function parseNumber(obj, defaultValue) {
    return typeof obj === "number" ? obj : defaultValue;
}
exports.parseNumber = parseNumber;
function parseBool(value, defaultValue) {
    if (typeof value === "boolean") {
        return value;
    }
    else if (typeof value === "string") {
        switch (value.toLowerCase()) {
            case "true":
                return true;
            case "false":
                return false;
            default:
                return defaultValue;
        }
    }
    return defaultValue;
}
exports.parseBool = parseBool;
function getEnumValueByName(enumType, name) {
    for (var key in enumType) {
        var keyAsNumber = parseInt(key, 10);
        if (keyAsNumber >= 0) {
            var value = enumType[key];
            if (value && typeof value === "string" && value.toLowerCase() === name.toLowerCase()) {
                return keyAsNumber;
            }
        }
    }
    return undefined;
}
exports.getEnumValueByName = getEnumValueByName;
function parseEnum(enumType, name, defaultValue) {
    if (!name) {
        return defaultValue;
    }
    var enumValue = getEnumValueByName(enumType, name);
    return enumValue !== undefined ? enumValue : defaultValue;
}
exports.parseEnum = parseEnum;
function renderSeparation(hostConfig, separationDefinition, orientation) {
    if (separationDefinition.spacing > 0 || (separationDefinition.lineThickness && separationDefinition.lineThickness > 0)) {
        var separator = document.createElement("div");
        separator.className = hostConfig.makeCssClassName("ac-" + (orientation == Enums.Orientation.Horizontal ? "horizontal" : "vertical") + "-separator");
        var color = separationDefinition.lineColor ? stringToCssColor(separationDefinition.lineColor) : "";
        if (orientation == Enums.Orientation.Horizontal) {
            if (separationDefinition.lineThickness) {
                separator.style.paddingTop = (separationDefinition.spacing / 2) + "px";
                separator.style.marginBottom = (separationDefinition.spacing / 2) + "px";
                separator.style.borderBottom = separationDefinition.lineThickness + "px solid " + color;
            }
            else {
                separator.style.height = separationDefinition.spacing + "px";
            }
        }
        else {
            if (separationDefinition.lineThickness) {
                separator.style.paddingLeft = (separationDefinition.spacing / 2) + "px";
                separator.style.marginRight = (separationDefinition.spacing / 2) + "px";
                separator.style.borderRight = separationDefinition.lineThickness + "px solid " + color;
            }
            else {
                separator.style.width = separationDefinition.spacing + "px";
            }
        }
        separator.style.overflow = "hidden";
        separator.style.flex = "0 0 auto";
        return separator;
    }
    else {
        return undefined;
    }
}
exports.renderSeparation = renderSeparation;
function stringToCssColor(color) {
    if (color) {
        var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;
        var matches = regEx.exec(color);
        if (matches && matches[4]) {
            var a = parseInt(matches[1], 16) / 255;
            var r = parseInt(matches[2], 16);
            var g = parseInt(matches[3], 16);
            var b = parseInt(matches[4], 16);
            return "rgba(" + r + "," + g + "," + b + "," + a + ")";
        }
    }
    return color;
}
exports.stringToCssColor = stringToCssColor;
function truncate(element, maxHeight, lineHeight) {
    var fits = function () {
        // Allow a one pixel overflow to account for rounding differences
        // between browsers
        return maxHeight - element.scrollHeight >= -1.0;
    };
    if (fits())
        return;
    var fullText = element.innerHTML;
    var truncateAt = function (idx) {
        element.innerHTML = fullText.substring(0, idx) + '...';
    };
    var breakableIndices = findBreakableIndices(fullText);
    var lo = 0;
    var hi = breakableIndices.length;
    var bestBreakIdx = 0;
    // Do a binary search for the longest string that fits
    while (lo < hi) {
        var mid = Math.floor((lo + hi) / 2);
        truncateAt(breakableIndices[mid]);
        if (fits()) {
            bestBreakIdx = breakableIndices[mid];
            lo = mid + 1;
        }
        else {
            hi = mid;
        }
    }
    truncateAt(bestBreakIdx);
    // If we have extra room, try to expand the string letter by letter
    // (covers the case where we have to break in the middle of a long word)
    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {
        var idx = findNextCharacter(fullText, bestBreakIdx);
        while (idx < fullText.length) {
            truncateAt(idx);
            if (fits()) {
                bestBreakIdx = idx;
                idx = findNextCharacter(fullText, idx);
            }
            else {
                break;
            }
        }
        truncateAt(bestBreakIdx);
    }
}
exports.truncate = truncate;
function findBreakableIndices(html) {
    var results = [];
    var idx = findNextCharacter(html, -1);
    while (idx < html.length) {
        if (html[idx] == ' ') {
            results.push(idx);
        }
        idx = findNextCharacter(html, idx);
    }
    return results;
}
function findNextCharacter(html, currIdx) {
    currIdx += 1;
    // If we found the start of an HTML tag, keep advancing until we get
    // past it, so we don't end up truncating in the middle of the tag
    while (currIdx < html.length && html[currIdx] == '<') {
        while (currIdx < html.length && html[currIdx++] != '>')
            ;
    }
    return currIdx;
}
function getFitStatus(element, containerEnd) {
    var start = element.offsetTop;
    var end = start + element.clientHeight;
    if (end <= containerEnd) {
        return Enums.ContainerFitStatus.FullyInContainer;
    }
    else if (start < containerEnd) {
        return Enums.ContainerFitStatus.Overflowing;
    }
    else {
        return Enums.ContainerFitStatus.FullyOutOfContainer;
    }
}
exports.getFitStatus = getFitStatus;


/***/ })

/******/ });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvYWRhcHRpdmVjYXJkcy50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL2NhcmQtZWxlbWVudHMudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy9jYXJkLW9iamVjdC50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL2VudW1zLnRzIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvaG9zdC1jYXBhYmlsaXRpZXMudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy9ob3N0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3JlZ2lzdHJ5LnRzIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvc2VyaWFsaXphdGlvbi50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3NoYXJlZC50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3RleHQtZm9ybWF0dGVycy50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO1FDVkE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFF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R0FBRyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDdEM7SUFFRCxPQUFPLE9BQU8sQ0FBQztBQUNuQixDQUFDO0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxJQUFZLEVBQUUsT0FBZTtJQUNwRCxPQUFPLElBQUksQ0FBQyxDQUFDO0lBRWIsb0VBQW9FO0lBQ3BFLGtFQUFrRTtJQUNsRSxPQUFPLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEVBQUU7UUFDbEQsT0FBTyxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxHQUFHO1lBQUMsQ0FBQztLQUMzRDtJQUVELE9BQU8sT0FBTyxDQUFDO0FBQ25CLENBQUM7QUFFRCxTQUFnQixZQUFZLENBQUMsT0FBb0IsRUFBRSxZQUFvQjtJQUNuRSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQzlCLElBQUksR0FBRyxHQUFHLEtBQUssR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0lBRXZDLElBQUksR0FBRyxJQUFJLFlBQVksRUFBRTtRQUNyQixPQUFPLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsQ0FBQztLQUNwRDtTQUNJLElBQUksS0FBSyxHQUFHLFlBQVksRUFBRTtRQUMzQixPQUFPLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUM7S0FDL0M7U0FDSTtRQUNELE9BQU8sS0FBSyxDQUFDLGtCQUFrQixDQUFDLG1CQUFtQixDQUFDO0tBQ3ZEO0FBQ0wsQ0FBQztBQWJELG9DQWFDIiwiZmlsZSI6ImFkYXB0aXZlY2FyZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJBZGFwdGl2ZUNhcmRzXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkFkYXB0aXZlQ2FyZHNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL2FkYXB0aXZlY2FyZHMudHNcIik7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5leHBvcnQgKiBmcm9tIFwiLi9zZXJpYWxpemF0aW9uXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3JlZ2lzdHJ5XCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NhcmQtb2JqZWN0XCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NhcmQtZWxlbWVudHNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vZW51bXNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vaG9zdC1jb25maWdcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vc2hhcmVkXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3V0aWxzXCI7XHJcbmV4cG9ydCB7IElBZGFwdGl2ZUNhcmQsIElDYXJkRWxlbWVudCB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBFbnVtcyBmcm9tIFwiLi9lbnVtc1wiO1xyXG5pbXBvcnQgeyBQYWRkaW5nRGVmaW5pdGlvbiwgR2xvYmFsU2V0dGluZ3MsIFNpemVBbmRVbml0LFNwYWNpbmdEZWZpbml0aW9uLFxyXG4gICAgRGljdGlvbmFyeSwgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMsIENvbnRlbnRUeXBlcywgSUlucHV0LCBJUmVzb3VyY2VJbmZvcm1hdGlvbiB9IGZyb20gXCIuL3NoYXJlZFwiO1xyXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBIb3N0Q29uZmlnLCBkZWZhdWx0SG9zdENvbmZpZywgRm9udFR5cGVEZWZpbml0aW9uLCBDb2xvclNldERlZmluaXRpb24sIFRleHRDb2xvckRlZmluaXRpb24sIENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbiB9IGZyb20gXCIuL2hvc3QtY29uZmlnXCI7XHJcbmltcG9ydCAqIGFzIFRleHRGb3JtYXR0ZXJzIGZyb20gXCIuL3RleHQtZm9ybWF0dGVyc1wiO1xyXG5pbXBvcnQgeyBIb3N0Q2FwYWJpbGl0aWVzIH0gZnJvbSBcIi4vaG9zdC1jYXBhYmlsaXRpZXNcIjtcclxuaW1wb3J0IHsgQ2FyZE9iamVjdCwgVmFsaWRhdGlvblJlc3VsdHMgfSBmcm9tIFwiLi9jYXJkLW9iamVjdFwiO1xyXG5pbXBvcnQgeyBWZXJzaW9ucywgVmVyc2lvbiwgcHJvcGVydHksIEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCwgU2VyaWFsaXphYmxlT2JqZWN0LCBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEsIFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgQm9vbFByb3BlcnR5LCBWYWx1ZVNldFByb3BlcnR5LCBFbnVtUHJvcGVydHksIFNlcmlhbGl6YWJsZU9iamVjdENvbGxlY3Rpb25Qcm9wZXJ0eSwgU2VyaWFsaXphYmxlT2JqZWN0UHJvcGVydHksIFBpeGVsU2l6ZVByb3BlcnR5LFxyXG4gICAgTnVtUHJvcGVydHksIFByb3BlcnR5QmFnLCBDdXN0b21Qcm9wZXJ0eSwgUHJvcGVydHlEZWZpbml0aW9uIH0gZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xyXG5pbXBvcnQgeyBDYXJkT2JqZWN0UmVnaXN0cnkgfSBmcm9tIFwiLi9yZWdpc3RyeVwiO1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZEVsZW1lbnRIZWlnaHQgPSBcImF1dG9cIiB8IFwic3RyZXRjaFwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhcmRFbGVtZW50IGV4dGVuZHMgQ2FyZE9iamVjdCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IGxhbmdQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcImxhbmdcIiwgdHJ1ZSwgL15bYS16XXsyLDN9JC9pZyk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaXNWaXNpYmxlUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiaXNWaXNpYmxlXCIsIHRydWUpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNlcGFyYXRvclByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInNlcGFyYXRvclwiLCBmYWxzZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaGVpZ2h0UHJvcGVydHkgPSBuZXcgVmFsdWVTZXRQcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8xLFxyXG4gICAgICAgIFwiaGVpZ2h0XCIsXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICB7IHZhbHVlOiBcImF1dG9cIiB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiBcInN0cmV0Y2hcIiB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBcImF1dG9cIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwiaG9yaXpvbnRhbEFsaWdubWVudFwiLFxyXG4gICAgICAgIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQsXHJcbiAgICAgICAgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5MZWZ0KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzcGFjaW5nUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJzcGFjaW5nXCIsXHJcbiAgICAgICAgRW51bXMuU3BhY2luZyxcclxuICAgICAgICBFbnVtcy5TcGFjaW5nLkRlZmF1bHQpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5ob3Jpem9udGFsQWxpZ25tZW50UHJvcGVydHkpXHJcbiAgICBob3Jpem9udGFsQWxpZ25tZW50OiBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50O1xyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5zcGFjaW5nUHJvcGVydHkpXHJcbiAgICBzcGFjaW5nOiBFbnVtcy5TcGFjaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5zZXBhcmF0b3JQcm9wZXJ0eSlcclxuICAgIHNlcGFyYXRvcjogYm9vbGVhbjtcclxuXHJcbiAgICBAcHJvcGVydHkoQ2FyZEVsZW1lbnQuaGVpZ2h0UHJvcGVydHkpXHJcbiAgICBoZWlnaHQ6IENhcmRFbGVtZW50SGVpZ2h0O1xyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5sYW5nUHJvcGVydHkpXHJcbiAgICBnZXQgbGFuZygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBsYW5nID0gdGhpcy5nZXRWYWx1ZShDYXJkRWxlbWVudC5sYW5nUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBpZiAobGFuZykge1xyXG4gICAgICAgICAgICByZXR1cm4gbGFuZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmxhbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldCBsYW5nKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKENhcmRFbGVtZW50LmxhbmdQcm9wZXJ0eSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5pc1Zpc2libGVQcm9wZXJ0eSlcclxuICAgIGdldCBpc1Zpc2libGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoQ2FyZEVsZW1lbnQuaXNWaXNpYmxlUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc1Zpc2libGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyBnb2luZyB0byBiZSBoaWRkZW4sIHJlc2V0IGFueSBjaGFuZ2VzIHRoYXQgd2VyZSBkdWVcclxuICAgICAgICAvLyB0byBvdmVyZmxvdyB0cnVuY2F0aW9uICh0aGlzIGVuc3VyZXMgdGhhdCBpZiB0aGUgZWxlbWVudCBpcyBsYXRlclxyXG4gICAgICAgIC8vIHVuLWhpZGRlbiBpdCBoYXMgdGhlIHJpZ2h0IGNvbnRlbnQpXHJcbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24gJiYgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5kb092ZXJmbG93VHJ1bmNhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKENhcmRFbGVtZW50LmlzVmlzaWJsZVByb3BlcnR5LCB2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkRWxlbWVudFZpc2liaWxpdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfaG9zdENvbmZpZz86IEhvc3RDb25maWc7XHJcbiAgICBwcml2YXRlIF9zZXBhcmF0b3JFbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF90cnVuY2F0ZWREdWVUb092ZXJmbG93OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9kZWZhdWx0UmVuZGVyZWRFbGVtZW50RGlzcGxheU1vZGU/OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9wYWRkaW5nPzogUGFkZGluZ0RlZmluaXRpb247XHJcblxyXG4gICAgcHJpdmF0ZSBpbnRlcm5hbFJlbmRlclNlcGFyYXRvcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IHJlbmRlcmVkU2VwYXJhdG9yID0gVXRpbHMucmVuZGVyU2VwYXJhdGlvbihcclxuICAgICAgICAgICAgdGhpcy5ob3N0Q29uZmlnLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB0aGlzLmhvc3RDb25maWcuZ2V0RWZmZWN0aXZlU3BhY2luZyh0aGlzLnNwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgbGluZVRoaWNrbmVzczogdGhpcy5zZXBhcmF0b3IgPyB0aGlzLmhvc3RDb25maWcuc2VwYXJhdG9yLmxpbmVUaGlja25lc3MgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBsaW5lQ29sb3I6IHRoaXMuc2VwYXJhdG9yID8gdGhpcy5ob3N0Q29uZmlnLnNlcGFyYXRvci5saW5lQ29sb3IgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JPcmllbnRhdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuYWx3YXlzQmxlZWRTZXBhcmF0b3JzICYmIHJlbmRlcmVkU2VwYXJhdG9yICYmIHRoaXMuc2VwYXJhdG9yT3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRqdXN0IHNlcGFyYXRvcidzIG1hcmdpbnMgaWYgdGhlIG9wdGlvbiB0byBhbHdheXMgYmxlZWQgc2VwYXJhdG9ycyBpcyB0dXJuZWQgb25cclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRDb250YWluZXIgPSB0aGlzLmdldFBhcmVudENvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRDb250YWluZXIgJiYgcGFyZW50Q29udGFpbmVyLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRQaHlzaWNhbFBhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHBhcmVudENvbnRhaW5lci5nZXRFZmZlY3RpdmVQYWRkaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZFNlcGFyYXRvci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBwYXJlbnRQaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZFNlcGFyYXRvci5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgcGFyZW50UGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZWRTZXBhcmF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZW5kZXJlZEVsZW1lbnRWaXNpYmlsaXR5KCkge1xyXG4gICAgICAgIGxldCBkaXNwbGF5TW9kZSA9IHRoaXMuaXNEZXNpZ25Nb2RlKCkgfHwgdGhpcy5pc1Zpc2libGUgPyB0aGlzLl9kZWZhdWx0UmVuZGVyZWRFbGVtZW50RGlzcGxheU1vZGUgOiBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZGlzcGxheU1vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheU1vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuaXNGaXJzdEVsZW1lbnQodGhpcykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlcGFyYXRvckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3BsYXlNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheU1vZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXBhcmF0b3JFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVFbGVtZW50RHVlVG9PdmVyZmxvdygpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQodGhpcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dFbGVtZW50SGlkZGVuRHVlVG9PdmVyZmxvdygpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50ICYmICF0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICByYWlzZUVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEV2ZW50KHRoaXMsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFya2VkIHByaXZhdGUgdG8gZW11bGF0ZSBpbnRlcm5hbCBhY2Nlc3NcclxuICAgIHByaXZhdGUgaGFuZGxlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUgfHwgdGhpcy5pc0hpZGRlbkR1ZVRvT3ZlcmZsb3coKSkge1xyXG4gICAgICAgICAgICBsZXQgaGFuZGxlZCA9IHRoaXMudHJ1bmNhdGVPdmVyZmxvdyhtYXhIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXZlbiBpZiB3ZSB3ZXJlIHVuYWJsZSB0byB0cnVuY2F0ZSB0aGUgZWxlbWVudCB0byBmaXQgdGhpcyB0aW1lLFxyXG4gICAgICAgICAgICAvLyBpdCBzdGlsbCBjb3VsZCBoYXZlIGJlZW4gcHJldmlvdXNseSB0cnVuY2F0ZWRcclxuICAgICAgICAgICAgdGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdyA9IGhhbmRsZWQgfHwgdGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdztcclxuXHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudER1ZVRvT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVkICYmICF0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNYXJrZWQgcHJpdmF0ZSB0byBlbXVsYXRlIGludGVybmFsIGFjY2Vzc1xyXG4gICAgcHJpdmF0ZSByZXNldE92ZXJmbG93KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBzaXplQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdykge1xyXG4gICAgICAgICAgICB0aGlzLnVuZG9PdmVyZmxvd1RydW5jYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzaXplQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbkR1ZVRvT3ZlcmZsb3coKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dFbGVtZW50SGlkZGVuRHVlVG9PdmVyZmxvdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNpemVDaGFuZ2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBzdHlsZURlZmluaXRpb24gPSB0aGlzLmdldEVmZmVjdGl2ZVN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIGxldCBmb3JlZ3JvdW5kQ3NzQ29sb3IgPSBVdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHN0eWxlRGVmaW5pdGlvbi5mb3JlZ3JvdW5kQ29sb3JzLmRlZmF1bHQuc3VidGxlKTtcclxuXHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyID0gXCIxcHggZGFzaGVkIFwiICsgZm9yZWdyb3VuZENzc0NvbG9yO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZyA9IFwiNHB4XCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSBcIjMycHhcIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gXCIxMHB4XCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5jb2xvciA9IDxzdHJpbmc+Zm9yZWdyb3VuZENzc0NvbG9yO1xyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gXCJFbXB0eSBcIiArIHRoaXMuZ2V0SnNvblR5cGVOYW1lKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhZGp1c3RSZW5kZXJlZEVsZW1lbnRTaXplKHJlbmRlcmVkRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5oZWlnaHQgPT09IFwiYXV0b1wiKSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpc0Rpc3BsYXllZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pc1Zpc2libGUgJiYgdGhpcy5fcmVuZGVyZWRFbGVtZW50Lm9mZnNldEhlaWdodCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZUludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhcHBseVBhZGRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuYWx3YXlzQmxlZWRTZXBhcmF0b3JzICYmIHRoaXMuc2VwYXJhdG9yT3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCAmJiAhdGhpcy5pc0JsZWVkaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYWRkaW5nID0gbmV3IFBhZGRpbmdEZWZpbml0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbW1lZGlhdGVTdXJyb3VuZGluZ1BhZGRpbmcocGFkZGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBoeXNpY2FsUGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIi1cIiArIHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcucmlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqIENhbGxlZCB3aGVuIHRoaXMgZWxlbWVudCBvdmVyZmxvd3MgdGhlIGJvdHRvbSBvZiB0aGUgY2FyZC5cclxuICAgICAqIG1heEhlaWdodCB3aWxsIGJlIHRoZSBhbW91bnQgb2Ygc3BhY2Ugc3RpbGwgYXZhaWxhYmxlIG9uIHRoZSBjYXJkICgwIGlmXHJcbiAgICAgKiB0aGUgZWxlbWVudCBpcyBmdWxseSBvZmYgdGhlIGNhcmQpLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdHJ1bmNhdGVPdmVyZmxvdyhtYXhIZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIENoaWxkIGltcGxlbWVudGF0aW9ucyBzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGVsZW1lbnQgaGFuZGxlZFxyXG4gICAgICAgIC8vIHRoZSB0cnVuY2F0aW9uIHJlcXVlc3Qgc3VjaCB0aGF0IGl0cyBjb250ZW50IGZpdHMgd2l0aGluIG1heEhlaWdodCxcclxuICAgICAgICAvLyBmYWxzZSBpZiB0aGUgZWxlbWVudCBzaG91bGQgZmFsbCBiYWNrIHRvIGJlaW5nIGhpZGRlblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgICogVGhpcyBzaG91bGQgcmV2ZXJzZSBhbnkgY2hhbmdlcyBwZXJmb3JtZWQgaW4gdHJ1bmNhdGVPdmVyZmxvdygpLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdW5kb092ZXJmbG93VHJ1bmNhdGlvbigpIHsgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXREZWZhdWx0UGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYWRkaW5nRGVmaW5pdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRIYXNCYWNrZ3JvdW5kKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0UGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZGRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFBhZGRpbmcodmFsdWU6IFBhZGRpbmdEZWZpbml0aW9uIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5fcGFkZGluZyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG91bGRTZXJpYWxpemUoY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5lbGVtZW50UmVnaXN0cnkuZmluZEJ5TmFtZSh0aGlzLmdldEpzb25UeXBlTmFtZSgpKSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgdXNlRGVmYXVsdFNpemluZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGFsbG93Q3VzdG9tUGFkZGluZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHNlcGFyYXRvck9yaWVudGF0aW9uKCk6IEVudW1zLk9yaWVudGF0aW9uIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGRlZmF1bHRTdHlsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGN1c3RvbUNzc1NlbGVjdG9yPzogc3RyaW5nO1xyXG5cclxuICAgIHBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0PzogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBzdXBlci5wYXJzZShzb3VyY2UsIGNvbnRleHQgPyBjb250ZXh0IDogbmV3IFNlcmlhbGl6YXRpb25Db250ZXh0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihjb250ZXh0PzogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBQcm9wZXJ0eUJhZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnRvSlNPTihjb250ZXh0ID8gY29udGV4dCA6IG5ldyBTZXJpYWxpemF0aW9uQ29udGV4dCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc1N0cmluZygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQmxlZWRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVmZmVjdGl2ZVN0eWxlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRFZmZlY3RpdmVTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVmZmVjdGl2ZVN0eWxlRGVmaW5pdGlvbigpOiBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RDb25maWcuY29udGFpbmVyU3R5bGVzLmdldFN0eWxlQnlOYW1lKHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Rm9yYmlkZGVuQWN0aW9uVHlwZXMoKTogQWN0aW9uVHlwZVtdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKFxyXG4gICAgICAgIHJlc3VsdDogUGFkZGluZ0RlZmluaXRpb24sXHJcbiAgICAgICAgcHJvY2Vzc1RvcDogYm9vbGVhbiA9IHRydWUsXHJcbiAgICAgICAgcHJvY2Vzc1JpZ2h0OiBib29sZWFuID0gdHJ1ZSxcclxuICAgICAgICBwcm9jZXNzQm90dG9tOiBib29sZWFuID0gdHJ1ZSxcclxuICAgICAgICBwcm9jZXNzTGVmdDogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGRvUHJvY2Vzc1RvcCA9IHByb2Nlc3NUb3AgJiYgdGhpcy5wYXJlbnQuaXNUb3BFbGVtZW50KHRoaXMpO1xyXG4gICAgICAgICAgICBsZXQgZG9Qcm9jZXNzUmlnaHQgPSBwcm9jZXNzUmlnaHQgJiYgdGhpcy5wYXJlbnQuaXNSaWdodE1vc3RFbGVtZW50KHRoaXMpO1xyXG4gICAgICAgICAgICBsZXQgZG9Qcm9jZXNzQm90dG9tID0gcHJvY2Vzc0JvdHRvbSAmJiB0aGlzLnBhcmVudC5pc0JvdHRvbUVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgICAgIGxldCBkb1Byb2Nlc3NMZWZ0ID0gcHJvY2Vzc0xlZnQgJiYgdGhpcy5wYXJlbnQuaXNMZWZ0TW9zdEVsZW1lbnQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWZmZWN0aXZlUGFkZGluZyA9IHRoaXMucGFyZW50LmdldEVmZmVjdGl2ZVBhZGRpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlZmZlY3RpdmVQYWRkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzVG9wICYmIGVmZmVjdGl2ZVBhZGRpbmcudG9wICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC50b3AgPSBlZmZlY3RpdmVQYWRkaW5nLnRvcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzVG9wID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc1JpZ2h0ICYmIGVmZmVjdGl2ZVBhZGRpbmcucmlnaHQgIT0gRW51bXMuU3BhY2luZy5Ob25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJpZ2h0ID0gZWZmZWN0aXZlUGFkZGluZy5yaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzUmlnaHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzQm90dG9tICYmIGVmZmVjdGl2ZVBhZGRpbmcuYm90dG9tICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ib3R0b20gPSBlZmZlY3RpdmVQYWRkaW5nLmJvdHRvbTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc0xlZnQgJiYgZWZmZWN0aXZlUGFkZGluZy5sZWZ0ICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5sZWZ0ID0gZWZmZWN0aXZlUGFkZGluZy5sZWZ0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkb1Byb2Nlc3NMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkb1Byb2Nlc3NUb3AgfHwgZG9Qcm9jZXNzUmlnaHQgfHwgZG9Qcm9jZXNzQm90dG9tIHx8IGRvUHJvY2Vzc0xlZnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEltbWVkaWF0ZVN1cnJvdW5kaW5nUGFkZGluZyhcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQsXHJcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzVG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvUHJvY2Vzc1JpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGRvUHJvY2Vzc0JvdHRvbSxcclxuICAgICAgICAgICAgICAgICAgICBkb1Byb2Nlc3NMZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25Db3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkF0KGluZGV4OiBudW1iZXIpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZS5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudCBpbnN0YW5jZW9mIENhcmRFbGVtZW50Q29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5yZW1vdmVJdGVtKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5vdmVycmlkZUludGVybmFsUmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5fc2VwYXJhdG9yRWxlbWVudCA9IHRoaXMuaW50ZXJuYWxSZW5kZXJTZXBhcmF0b3IoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Dc3NTZWxlY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jdXN0b21Dc3NTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcclxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFJlbmRlcmVkRWxlbWVudERpc3BsYXlNb2RlID0gdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPyB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0UmVuZGVyZWRFbGVtZW50U2l6ZSh0aGlzLl9yZW5kZXJlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNEZXNpZ25Nb2RlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTGF5b3V0KHByb2Nlc3NDaGlsZHJlbjogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkRWxlbWVudFZpc2liaWxpdHkoKTtcclxuICAgICAgICB0aGlzLmFwcGx5UGFkZGluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluZGV4T2YoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEZXNpZ25Nb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCByb290RWxlbWVudCA9IHRoaXMuZ2V0Um9vdEVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvb3RFbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmVDYXJkICYmIHJvb3RFbGVtZW50LmRlc2lnbk1vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaXJzdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0xhc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBdFRoZVZlcnlMZWZ0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzTGVmdE1vc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5TGVmdCgpIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0F0VGhlVmVyeVJpZ2h0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzUmlnaHRNb3N0RWxlbWVudCh0aGlzKSAmJiB0aGlzLnBhcmVudC5pc0F0VGhlVmVyeVJpZ2h0KCkgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQXRUaGVWZXJ5VG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzRmlyc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5VG9wKCkgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQXRUaGVWZXJ5Qm90dG9tKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzTGFzdEVsZW1lbnQodGhpcykgJiYgdGhpcy5wYXJlbnQuaXNBdFRoZVZlcnlCb3R0b20oKSA6IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCbGVlZGluZ0F0VG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0JsZWVkaW5nQXRCb3R0b20oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTGVmdE1vc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNSaWdodE1vc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNUb3BFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGaXJzdEVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCb3R0b21FbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNMYXN0RWxlbWVudChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpc0hpZGRlbkR1ZVRvT3ZlcmZsb3coKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID09ICdoaWRkZW4nO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvb3RFbGVtZW50KCk6IENhcmRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb290T2JqZWN0KCkgYXMgQ2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGFyZW50Q29udGFpbmVyKCk6IENvbnRhaW5lciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRFbGVtZW50ID0gdGhpcy5wYXJlbnQ7XHJcblxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8Q29udGFpbmVyPmN1cnJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsSW5wdXRzKCk6IElucHV0W10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbGVtZW50QnlJZChpZDogc3RyaW5nKTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlkID09PSBpZCA/IHRoaXMgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uQnlJZChpZDogc3RyaW5nKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVmZmVjdGl2ZVBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24ge1xyXG4gICAgICAgIGxldCBwYWRkaW5nID0gdGhpcy5nZXRQYWRkaW5nKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAocGFkZGluZyAmJiB0aGlzLmFsbG93Q3VzdG9tUGFkZGluZykgPyBwYWRkaW5nIDogdGhpcy5nZXREZWZhdWx0UGFkZGluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBob3N0Q29uZmlnKCk6IEhvc3RDb25maWcge1xyXG4gICAgICAgIGlmICh0aGlzLl9ob3N0Q29uZmlnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ob3N0Q29uZmlnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuaG9zdENvbmZpZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0SG9zdENvbmZpZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXQgaG9zdENvbmZpZyh2YWx1ZTogSG9zdENvbmZpZykge1xyXG4gICAgICAgIHRoaXMuX2hvc3RDb25maWcgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmluZGV4T2YodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzSW50ZXJhY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzSW5saW5lKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGFzVmlzaWJsZVNlcGFyYXRvcigpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5zZXBhcmF0b3JFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5wYXJlbnQuaXNGaXJzdEVsZW1lbnQodGhpcykgJiYgKHRoaXMuaXNWaXNpYmxlIHx8IHRoaXMuaXNEZXNpZ25Nb2RlKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VwYXJhdG9yRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcGFyYXRvckVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhcmVudCgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIDxDYXJkRWxlbWVudD50aGlzLl9wYXJlbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBY3Rpb25Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSA8Q2FyZEVsZW1lbnQ+c2VuZGVyO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5wYXJzZUFjdGlvbihcclxuICAgICAgICAgICAgcGFyZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VbdGhpcy5uYW1lXSxcclxuICAgICAgICAgICAgdGhpcy5mb3JiaWRkZW5BY3Rpb25UeXBlcyxcclxuICAgICAgICAgICAgcGFyZW50LmlzRGVzaWduTW9kZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBBY3Rpb24gfCB1bmRlZmluZWQsIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHRoaXMubmFtZSwgdmFsdWUgPyB2YWx1ZS50b0pTT04oY29udGV4dCkgOiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGZvcmJpZGRlbkFjdGlvblR5cGVzOiBzdHJpbmdbXSA9IFtdKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VUZXh0QmxvY2sgZXh0ZW5kcyBDYXJkRWxlbWVudCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHRleHRQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwidGV4dFwiLFxyXG4gICAgICAgIHRydWUpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNpemVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcInNpemVcIixcclxuICAgICAgICBFbnVtcy5UZXh0U2l6ZSxcclxuICAgICAgICBFbnVtcy5UZXh0U2l6ZS5EZWZhdWx0KTtcclxuICAgIHN0YXRpYyByZWFkb25seSB3ZWlnaHRQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcIndlaWdodFwiLFxyXG4gICAgICAgIEVudW1zLlRleHRXZWlnaHQsXHJcbiAgICAgICAgRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBjb2xvclByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwiY29sb3JcIixcclxuICAgICAgICBFbnVtcy5UZXh0Q29sb3IsXHJcbiAgICAgICAgRW51bXMuVGV4dENvbG9yLkRlZmF1bHQpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGlzU3VidGxlUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJpc1N1YnRsZVwiLFxyXG4gICAgICAgIGZhbHNlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBmb250VHlwZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8yLFxyXG4gICAgICAgIFwiZm9udFR5cGVcIixcclxuICAgICAgICBFbnVtcy5Gb250VHlwZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc2VsZWN0QWN0aW9uUHJvcGVydHkgPSBuZXcgQWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJzZWxlY3RBY3Rpb25cIiwgWyBcIkFjdGlvbi5TaG93Q2FyZFwiIF0pO1xyXG5cclxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlU2NoZW1hKHNjaGVtYSk7XHJcblxyXG4gICAgICAgIC8vIHNlbGVjdEFjdGlvbiBpcyBkZWNsYXJlZCBvbiBCYXNlVGV4dEJsb2NrIGJ1dCBpcyBvbmx5IGV4cG9zZWQgb24gVGV4dFJ1bixcclxuICAgICAgICAvLyBzbyB0aGUgcHJvcGVydHkgaXMgcmVtb3ZlZCBmcm9tIHRoZSBCYXNlVGV4dEJsb2NrIHNjaGVtYS5cclxuICAgICAgICBzY2hlbWEucmVtb3ZlKEJhc2VUZXh0QmxvY2suc2VsZWN0QWN0aW9uUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnNpemVQcm9wZXJ0eSlcclxuICAgIHNpemU6IEVudW1zLlRleHRTaXplID0gRW51bXMuVGV4dFNpemUuRGVmYXVsdDtcclxuXHJcbiAgICBAcHJvcGVydHkoQmFzZVRleHRCbG9jay53ZWlnaHRQcm9wZXJ0eSlcclxuICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodCA9IEVudW1zLlRleHRXZWlnaHQuRGVmYXVsdDtcclxuXHJcbiAgICBAcHJvcGVydHkoQmFzZVRleHRCbG9jay5jb2xvclByb3BlcnR5KVxyXG4gICAgY29sb3I6IEVudW1zLlRleHRDb2xvciA9IEVudW1zLlRleHRDb2xvci5EZWZhdWx0O1xyXG5cclxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLmZvbnRUeXBlUHJvcGVydHkpXHJcbiAgICBmb250VHlwZT86IEVudW1zLkZvbnRUeXBlO1xyXG5cclxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLmlzU3VidGxlUHJvcGVydHkpXHJcbiAgICBpc1N1YnRsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnRleHRQcm9wZXJ0eSlcclxuICAgIGdldCB0ZXh0KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoQmFzZVRleHRCbG9jay50ZXh0UHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0ZXh0KHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLnNldFRleHQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnNlbGVjdEFjdGlvblByb3BlcnR5KVxyXG4gICAgc2VsZWN0QWN0aW9uPzogQWN0aW9uO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRGb250U2l6ZShmb250VHlwZTogRm9udFR5cGVEZWZpbml0aW9uKTogbnVtYmVyIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbnRUeXBlLmZvbnRTaXplcy5zbWFsbDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9udFR5cGUuZm9udFNpemVzLm1lZGl1bTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMubGFyZ2U7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMuZXh0cmFMYXJnZTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMuZGVmYXVsdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldENvbG9yRGVmaW5pdGlvbihjb2xvclNldDogQ29sb3JTZXREZWZpbml0aW9uLCBjb2xvcjogRW51bXMuVGV4dENvbG9yKTogVGV4dENvbG9yRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgc3dpdGNoIChjb2xvcikge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5BY2NlbnQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JTZXQuYWNjZW50O1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5EYXJrOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmRhcms7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dENvbG9yLkxpZ2h0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmxpZ2h0O1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5Hb29kOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0Lmdvb2Q7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dENvbG9yLldhcm5pbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JTZXQud2FybmluZztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuQXR0ZW50aW9uOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmF0dGVudGlvbjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0VGV4dCh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShCYXNlVGV4dEJsb2NrLnRleHRQcm9wZXJ0eSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzU3RyaW5nKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVN0eWxlc1RvKHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGZvbnRUeXBlID0gdGhpcy5ob3N0Q29uZmlnLmdldEZvbnRUeXBlRGVmaW5pdGlvbih0aGlzLmZvbnRUeXBlKTtcclxuXHJcbiAgICAgICAgaWYgKGZvbnRUeXBlLmZvbnRGYW1pbHkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gZm9udFR5cGUuZm9udEZhbWlseTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmb250U2l6ZTogbnVtYmVyO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBmb250VHlwZS5mb250U2l6ZXMuc21hbGw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IGZvbnRUeXBlLmZvbnRTaXplcy5tZWRpdW07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmxhcmdlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmV4dHJhTGFyZ2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArIFwicHhcIjtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9yRGVmaW5pdGlvbiA9IHRoaXMuZ2V0Q29sb3JEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGVEZWZpbml0aW9uKCkuZm9yZWdyb3VuZENvbG9ycywgdGhpcy5lZmZlY3RpdmVDb2xvcik7XHJcblxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuY29sb3IgPSA8c3RyaW5nPlV0aWxzLnN0cmluZ1RvQ3NzQ29sb3IodGhpcy5pc1N1YnRsZSA/IGNvbG9yRGVmaW5pdGlvbi5zdWJ0bGUgOiBjb2xvckRlZmluaXRpb24uZGVmYXVsdCk7XHJcblxyXG4gICAgICAgIGxldCBmb250V2VpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy53ZWlnaHQpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0V2VpZ2h0LkxpZ2h0ZXI6XHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0ID0gZm9udFR5cGUuZm9udFdlaWdodHMubGlnaHRlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyOlxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9IGZvbnRUeXBlLmZvbnRXZWlnaHRzLmJvbGRlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9IGZvbnRUeXBlLmZvbnRXZWlnaHRzLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9IGZvbnRXZWlnaHQudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZWZmZWN0aXZlQ29sb3IoKTogRW51bXMuVGV4dENvbG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvciA/IHRoaXMuY29sb3IgOiBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRCbG9jayBleHRlbmRzIEJhc2VUZXh0QmxvY2sge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwid3JhcFwiLCBmYWxzZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4TGluZXNQcm9wZXJ0eSA9IG5ldyBOdW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1heExpbmVzXCIpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUZXh0QmxvY2sud3JhcFByb3BlcnR5KVxyXG4gICAgd3JhcDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUZXh0QmxvY2subWF4TGluZXNQcm9wZXJ0eSlcclxuICAgIG1heExpbmVzPzogbnVtYmVyO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgX2NvbXB1dGVkTGluZUhlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfb3JpZ2luYWxJbm5lckh0bWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3Byb2Nlc3NlZFRleHQ/OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF90cmVhdEFzUGxhaW5UZXh0OiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICBwcml2YXRlIHJlc3RvcmVPcmlnaW5hbENvbnRlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF4TGluZXMgJiYgdGhpcy5tYXhMaW5lcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCAqIHRoaXMubWF4TGluZXMgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX29yaWdpbmFsSW5uZXJIdG1sO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRydW5jYXRlSWZTdXBwb3J0ZWQobWF4SGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBGb3Igbm93LCBvbmx5IHRydW5jYXRlIFRleHRCbG9ja3MgdGhhdCBjb250YWluIGp1c3QgYSBzaW5nbGVcclxuICAgICAgICAgICAgLy8gcGFyYWdyYXBoIC0tIHNpbmNlIHRoZSBtYXhMaW5lcyBjYWxjdWxhdGlvbiBkb2Vzbid0IHRha2UgaW50b1xyXG4gICAgICAgICAgICAvLyBhY2NvdW50IE1hcmtkb3duIGxpc3RzXHJcbiAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMucmVuZGVyZWRFbGVtZW50LmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBsZXQgaXNUZXh0T25seSA9ICFjaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCB0cnVuY2F0aW9uU3VwcG9ydGVkID0gaXNUZXh0T25seSB8fCBjaGlsZHJlbi5sZW5ndGggPT0gMSAmJiAoPEhUTUxFbGVtZW50PmNoaWxkcmVuWzBdKS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ3AnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRydW5jYXRpb25TdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gaXNUZXh0T25seSA/IHRoaXMucmVuZGVyZWRFbGVtZW50IDogPEhUTUxFbGVtZW50PmNoaWxkcmVuWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIFV0aWxzLnRydW5jYXRlKGVsZW1lbnQsIG1heEhlaWdodCwgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRUZXh0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlci5zZXRUZXh0KHZhbHVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0UmVuZGVyZWREb21FbGVtZW50VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcImRpdlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dCkge1xyXG4gICAgICAgICAgICBsZXQgcHJlUHJvY2Vzc2VkVGV4dCA9IHRoaXMucHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUoQmFzZVRleHRCbG9jay50ZXh0UHJvcGVydHkpO1xyXG4gICAgICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLmdldFJlbmRlcmVkRG9tRWxlbWVudFR5cGUoKSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy10ZXh0QmxvY2tcIikpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZXNUbyhlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRhYkluZGV4ID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCB0aGlzLnNlbGVjdEFjdGlvbi5nZXRBcmlhUm9sZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnNlbGVjdEFjdGlvbi50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtc2VsZWN0YWJsZVwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fcHJvY2Vzc2VkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFRleHQgPSBUZXh0Rm9ybWF0dGVycy5mb3JtYXRUZXh0KHRoaXMubGFuZywgcHJlUHJvY2Vzc2VkVGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlTWFya2Rvd24gJiYgZm9ybWF0dGVkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy5hbGxvd01hcmtGb3JUZXh0SGlnaGxpZ2h0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFRleHQgPSBmb3JtYXR0ZWRUZXh0LnJlcGxhY2UoLzxtYXJrPi9nLCBcIj09PVwiKS5yZXBsYWNlKC88XFwvbWFyaz4vZywgXCIvPT0vXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCA9IEFkYXB0aXZlQ2FyZC5hcHBseU1hcmtkb3duKGZvcm1hdHRlZFRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2Rvd25Qcm9jZXNzaW5nUmVzdWx0LmRpZFByb2Nlc3MgJiYgbWFya2Rvd25Qcm9jZXNzaW5nUmVzdWx0Lm91dHB1dEh0bWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IG1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdC5vdXRwdXRIdG1sO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmVhdEFzUGxhaW5UZXh0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHByb2Nlc3MgPG1hcms+IHRhZyBpZiBtYXJrZG93biBwcm9jZXNzaW5nIHdhcyBhcHBsaWVkIGJlY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFya2Rvd24gcHJvY2Vzc2luZyBpcyBhbHNvIHJlc3BvbnNpYmxlIGZvciBzYW5pdGl6aW5nIHRoZSBpbnB1dCBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLmFsbG93TWFya0ZvclRleHRIaWdobGlnaHRpbmcgJiYgdGhpcy5fcHJvY2Vzc2VkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtTdHlsZTogc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlZmZlY3RpdmVTdHlsZSA9IHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGVEZWZpbml0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtTdHlsZSArPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgZWZmZWN0aXZlU3R5bGUuaGlnaGxpZ2h0QmFja2dyb3VuZENvbG9yICsgXCI7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEZvcmVncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtTdHlsZSArPSBcImNvbG9yOiBcIiArIGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEZvcmVncm91bmRDb2xvciArIFwiO1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrU3R5bGUgPSAnc3R5bGU9XCInICsgbWFya1N0eWxlICsgJ1wiJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gdGhpcy5fcHJvY2Vzc2VkVGV4dC5yZXBsYWNlKC89PT0vZywgXCI8bWFyayBcIiArIG1hcmtTdHlsZSArIFwiPlwiKS5yZXBsYWNlKC9cXC89PVxcLy9nLCBcIjwvbWFyaz5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gZm9ybWF0dGVkVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IGZvcm1hdHRlZFRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fcHJvY2Vzc2VkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90cmVhdEFzUGxhaW5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuX3Byb2Nlc3NlZFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3Byb2Nlc3NlZFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaXJzdEVsZW1lbnRDaGlsZCA9IDxIVE1MRWxlbWVudD5lbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyYXApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5sYXN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICg8SFRNTEVsZW1lbnQ+ZWxlbWVudC5sYXN0RWxlbWVudENoaWxkKS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBweFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgYW5jaG9ycyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmNob3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYW5jaG9yID0gPEhUTUxBbmNob3JFbGVtZW50PmFuY2hvcnNbaV07XHJcbiAgICAgICAgICAgICAgICBhbmNob3IuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1hbmNob3JcIikpO1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yLnRhcmdldCA9IFwiX2JsYW5rXCI7XHJcbiAgICAgICAgICAgICAgICBhbmNob3Iub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaXNlQW5jaG9yQ2xpY2tlZEV2ZW50KHRoaXMsIGUudGFyZ2V0IGFzIEhUTUxBbmNob3JFbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLndyYXApIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud29yZFdyYXAgPSBcImJyZWFrLXdvcmRcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhMaW5lcyAmJiB0aGlzLm1heExpbmVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gKHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCAqIHRoaXMubWF4TGluZXMpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRUZXh0QmxvY2tUcnVuY2F0aW9uIHx8IEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsSW5uZXJIdG1sID0gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHRydW5jYXRlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobWF4SGVpZ2h0ID49IHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUlmU3VwcG9ydGVkKG1heEhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVuZG9PdmVyZmxvd1RydW5jYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5yZXN0b3JlT3JpZ2luYWxDb250ZW50KCk7XHJcblxyXG4gICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy51c2VBZHZhbmNlZFRleHRCbG9ja1RydW5jYXRpb24gJiYgdGhpcy5tYXhMaW5lcykge1xyXG4gICAgICAgICAgICBsZXQgbWF4SGVpZ2h0ID0gdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ICogdGhpcy5tYXhMaW5lcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJ1bmNhdGVJZlN1cHBvcnRlZChtYXhIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1c2VNYXJrZG93bjogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgYXBwbHlTdHlsZXNUbyh0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmFwcGx5U3R5bGVzVG8odGFyZ2V0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIGxldCBwYXJlbnRDb250YWluZXIgPSB0aGlzLmdldFBhcmVudENvbnRhaW5lcigpO1xyXG4gICAgICAgIGxldCBpc1J0bCA9IHBhcmVudENvbnRhaW5lciA/IHBhcmVudENvbnRhaW5lci5pc1J0bCgpIDogZmFsc2U7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBpc1J0bCA/IFwibGVmdFwiIDogXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9IGlzUnRsID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsaW5lSGVpZ2h0cyA9IHRoaXMuaG9zdENvbmZpZy5saW5lSGVpZ2h0cztcclxuXHJcbiAgICAgICAgaWYgKGxpbmVIZWlnaHRzKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCA9IGxpbmVIZWlnaHRzLnNtYWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMubWVkaXVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0cy5sYXJnZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0cy5leHRyYUxhcmdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0cy5kZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBMb29rcyBsaWtlIDEuMzMgaXMgdGhlIG1hZ2ljIG51bWJlciB0byBjb21wdXRlIGxpbmUtaGVpZ2h0XHJcbiAgICAgICAgICAgIC8vIGZyb20gZm9udCBzaXplLlxyXG4gICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSB0aGlzLmdldEZvbnRTaXplKHRoaXMuaG9zdENvbmZpZy5nZXRGb250VHlwZURlZmluaXRpb24odGhpcy5mb250VHlwZSkpICogMS4zMztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJUZXh0QmxvY2tcIjtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuKTtcclxuXHJcbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbiAmJiB0aGlzLm1heExpbmVzICYmIHRoaXMuaXNEaXNwbGF5ZWQoKSkge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZWxlbWVudCdzIGlubmVySFRNTCBpbiBjYXNlIHRoZSBhdmFpbGFibGUgcm9vbSBmb3JcclxuICAgICAgICAgICAgLy8gY29udGVudCBoYXMgaW5jcmVhc2VkXHJcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9yaWdpbmFsQ29udGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRydW5jYXRlSWZTdXBwb3J0ZWQodGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ICogdGhpcy5tYXhMaW5lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBMYWJlbCBleHRlbmRzIFRleHRCbG9jayB7XHJcbiAgICBwcm90ZWN0ZWQgZ2V0UmVuZGVyZWREb21FbGVtZW50VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcImxhYmVsXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVuZGVyZWRFbGVtZW50ID0gPEhUTUxMYWJlbEVsZW1lbnQ+c3VwZXIuaW50ZXJuYWxSZW5kZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKHJlbmRlcmVkRWxlbWVudCAmJiB0aGlzLmZvckVsZW1lbnRJZCkge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuaHRtbEZvciA9IHRoaXMuZm9yRWxlbWVudElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBmb3JFbGVtZW50SWQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRSdW4gZXh0ZW5kcyBCYXNlVGV4dEJsb2NrIHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaXRhbGljUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiaXRhbGljXCIsIGZhbHNlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzdHJpa2V0aHJvdWdoUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwic3RyaWtldGhyb3VnaFwiLCBmYWxzZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaGlnaGxpZ2h0UHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiaGlnaGxpZ2h0XCIsIGZhbHNlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB1bmRlcmxpbmVQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMywgXCJ1bmRlcmxpbmVcIiwgZmFsc2UpO1xyXG5cclxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlU2NoZW1hKHNjaGVtYSk7XHJcblxyXG4gICAgICAgIHNjaGVtYS5hZGQoQmFzZVRleHRCbG9jay5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KFRleHRSdW4uaXRhbGljUHJvcGVydHkpXHJcbiAgICBpdGFsaWM6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBAcHJvcGVydHkoVGV4dFJ1bi5zdHJpa2V0aHJvdWdoUHJvcGVydHkpXHJcbiAgICBzdHJpa2V0aHJvdWdoOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgQHByb3BlcnR5KFRleHRSdW4uaGlnaGxpZ2h0UHJvcGVydHkpXHJcbiAgICBoaWdobGlnaHQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBAcHJvcGVydHkoVGV4dFJ1bi51bmRlcmxpbmVQcm9wZXJ0eSlcclxuICAgIHVuZGVybGluZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudGV4dCkge1xyXG4gICAgICAgICAgICBsZXQgcHJlUHJvY2Vzc2VkVGV4dCA9IHRoaXMucHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUoQmFzZVRleHRCbG9jay50ZXh0UHJvcGVydHkpO1xyXG4gICAgICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRUZXh0ID0gVGV4dEZvcm1hdHRlcnMuZm9ybWF0VGV4dCh0aGlzLmxhbmcsIHByZVByb2Nlc3NlZFRleHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3JtYXR0ZWRUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRUZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXRleHRSdW5cIikpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlc1RvKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uICYmIGhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgICAgICAgICBhbmNob3IuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1hbmNob3JcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBocmVmID0gdGhpcy5zZWxlY3RBY3Rpb24uZ2V0SHJlZigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFuY2hvci5ocmVmID0gaHJlZiA/IGhyZWYgOiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yLnRhcmdldCA9IFwiX2JsYW5rXCI7XHJcbiAgICAgICAgICAgICAgICBhbmNob3Iub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0QWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYW5jaG9yLmlubmVyVGV4dCA9IGZvcm1hdHRlZFRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChhbmNob3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lclRleHQgPSBmb3JtYXR0ZWRUZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5U3R5bGVzVG8odGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5hcHBseVN0eWxlc1RvKHRhcmdldEVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pdGFsaWMpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250U3R5bGUgPSBcIml0YWxpY1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RyaWtldGhyb3VnaCkge1xyXG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJsaW5lLXRocm91Z2hcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhpZ2hsaWdodCkge1xyXG4gICAgICAgICAgICBsZXQgY29sb3JEZWZpbml0aW9uID0gdGhpcy5nZXRDb2xvckRlZmluaXRpb24odGhpcy5nZXRFZmZlY3RpdmVTdHlsZURlZmluaXRpb24oKS5mb3JlZ3JvdW5kQ29sb3JzLCB0aGlzLmVmZmVjdGl2ZUNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gPHN0cmluZz5VdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHRoaXMuaXNTdWJ0bGUgPyBjb2xvckRlZmluaXRpb24uaGlnaGxpZ2h0Q29sb3JzLnN1YnRsZSA6IGNvbG9yRGVmaW5pdGlvbi5oaWdobGlnaHRDb2xvcnMuZGVmYXVsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51bmRlcmxpbmUpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwidW5kZXJsaW5lXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIlRleHRSdW5cIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNTdGFuZGFsb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNJbmxpbmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSaWNoVGV4dEJsb2NrIGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xyXG4gICAgcHJpdmF0ZSBfaW5saW5lczogQ2FyZEVsZW1lbnRbXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgaW50ZXJuYWxBZGRJbmxpbmUoaW5saW5lOiBDYXJkRWxlbWVudCwgZm9yY2VBZGQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghaW5saW5lLmlzSW5saW5lKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJpY2hUZXh0QmxvY2suYWRkSW5saW5lOiB0aGUgc3BlY2lmaWVkIGNhcmQgZWxlbWVudCBjYW5ub3QgYmUgdXNlZCBhcyBhIFJpY2hUZXh0QmxvY2sgaW5saW5lLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkb0FkZDogYm9vbGVhbiA9IGlubGluZS5wYXJlbnQgPT09IHVuZGVmaW5lZCB8fCBmb3JjZUFkZDtcclxuXHJcbiAgICAgICAgaWYgKCFkb0FkZCAmJiBpbmxpbmUucGFyZW50ICE9IHRoaXMpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmljaFRleHRCbG9jay5hZGRJbmxpbmU6IHRoZSBzcGVjaWZpZWQgaW5saW5lIGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIFJpY2hUZXh0QmxvY2suXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5saW5lLnNldFBhcmVudCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lubGluZXMucHVzaChpbmxpbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2lubGluZXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlW1wiaW5saW5lc1wiXSkpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQganNvbklubGluZSBvZiBzb3VyY2VbXCJpbmxpbmVzXCJdKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5saW5lOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpzb25JbmxpbmUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dFJ1biA9IG5ldyBUZXh0UnVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFJ1bi50ZXh0ID0ganNvbklubGluZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lID0gdGV4dFJ1bjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIGZhbGxiYWNrIGZvciBpbmxpbmVzIGluIDEuMlxyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZSA9IGNvbnRleHQucGFyc2VFbGVtZW50KHRoaXMsIGpzb25JbmxpbmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5saW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbEFkZElubGluZShpbmxpbmUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbmxpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGpzb25JbmxpbmVzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaW5saW5lIG9mIHRoaXMuX2lubGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGpzb25JbmxpbmVzLnB1c2goaW5saW5lLnRvSlNPTihjb250ZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUodGFyZ2V0LCBcImlubGluZXNcIiwganNvbklubGluZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbmxpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtcmljaFRleHRCbG9ja1wiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRDb250YWluZXIgPSB0aGlzLmdldFBhcmVudENvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICBsZXQgaXNSdGwgPSBwYXJlbnRDb250YWluZXIgPyBwYXJlbnRDb250YWluZXIuaXNSdGwoKSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gaXNSdGwgPyBcImxlZnRcIiA6IFwicmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBpc1J0bCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVuZGVyZWRJbmxpbmVzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaW5saW5lIG9mIHRoaXMuX2lubGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZW5kZXJlZElubGluZSA9IGlubGluZS5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWRJbmxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlcmVkSW5saW5lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRJbmxpbmVzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJlZElubGluZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBhc1N0cmluZygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpbmxpbmUgb2YgdGhpcy5faW5saW5lcykge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gaW5saW5lLmFzU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIlJpY2hUZXh0QmxvY2tcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmxpbmVDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbmxpbmVzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmxpbmVBdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5faW5saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lubGluZXNbaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmljaFRleHRCbG9jay5nZXRJbmxpbmVBdDogSW5kZXggb3V0IG9mIHJhbmdlIChcIiArIGluZGV4ICsgXCIpXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRJbmxpbmUoaW5saW5lOiBDYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxBZGRJbmxpbmUoaW5saW5lKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVJbmxpbmUoaW5saW5lOiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuX2lubGluZXMuaW5kZXhPZihpbmxpbmUpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbmxpbmVzW2luZGV4XS5zZXRQYXJlbnQodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgdGhpcy5faW5saW5lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGYWN0IGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdGl0bGVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInRpdGxlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAvLyBGb3IgaGlzdG9yaWMgcmVhc29ucywgdGhlIFwidGl0bGVcIiBzY2hlbWEgcHJvcGVydHkgaXMgZXhwb3NlZCBhcyBcIm5hbWVcIiBpbiB0aGUgT00uXHJcbiAgICBAcHJvcGVydHkoRmFjdC50aXRsZVByb3BlcnR5KVxyXG4gICAgbmFtZT86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoRmFjdC52YWx1ZVByb3BlcnR5KVxyXG4gICAgdmFsdWU/OiBzdHJpbmc7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFNjaGVtYUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkZhY3RcIjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lPzogc3RyaW5nLCB2YWx1ZT86IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjdFNldCBleHRlbmRzIENhcmRFbGVtZW50IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgZmFjdHNQcm9wZXJ0eSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RDb2xsZWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJmYWN0c1wiLCBGYWN0KTtcclxuXHJcbiAgICBAcHJvcGVydHkoRmFjdFNldC5mYWN0c1Byb3BlcnR5KVxyXG4gICAgZmFjdHM6IEZhY3RbXTtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHVzZURlZmF1bHRTaXppbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyV2lkdGggPSBcIjBweFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlclNwYWNpbmcgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlclN0eWxlID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSBcImNvbGxhcHNlXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1mYWN0c2V0XCIpKTtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3AgPSBob3N0Q29uZmlnLmZhY3RTZXQuc3BhY2luZyArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaXRsZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgIGxldCB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUucGFkZGluZyA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtZmFjdC10aXRsZVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5tYXhXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkRWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5tYXhXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwidG9wXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRCbG9jayA9IG5ldyBUZXh0QmxvY2soKTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sudGV4dCA9ICghdGhpcy5mYWN0c1tpXS5uYW1lICYmIHRoaXMuaXNEZXNpZ25Nb2RlKCkpID8gXCJUaXRsZVwiIDogdGhpcy5mYWN0c1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNpemUgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5jb2xvciA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5jb2xvcjtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5pc1N1YnRsZSA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5pc1N1YnRsZTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay53ZWlnaHQgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUud2VpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLndyYXAgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUud3JhcDtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lO1xyXG5cclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRkRWxlbWVudCwgdGV4dEJsb2NrLnJlbmRlcigpKTtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRyRWxlbWVudCwgdGRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTcGFjZXIgY29sdW1uXHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ckVsZW1lbnQsIHRkRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVmFsdWUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUucGFkZGluZyA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcInRvcFwiO1xyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtZmFjdC12YWx1ZVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrID0gbmV3IFRleHRCbG9jaygpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay50ZXh0ID0gdGhpcy5mYWN0c1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zaXplID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLnNpemU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suY29sb3IgPSBob3N0Q29uZmlnLmZhY3RTZXQudmFsdWUuY29sb3I7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suaXNTdWJ0bGUgPSBob3N0Q29uZmlnLmZhY3RTZXQudmFsdWUuaXNTdWJ0bGU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sud2VpZ2h0ID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLndlaWdodDtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay53cmFwID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLndyYXA7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suc3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcclxuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ZEVsZW1lbnQsIHRleHRCbG9jay5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ckVsZW1lbnQsIHRkRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0ckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJGYWN0U2V0XCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEltYWdlRGltZW5zaW9uUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xyXG4gICAgZ2V0SW50ZXJuYWxOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKHNvdXJjZVZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSBTaXplQW5kVW5pdC5wYXJzZShzb3VyY2VWYWx1ZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNpemUudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNpemUucGh5c2ljYWxTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLiBBIHBhcnNlIGVycm9yIGlzIGVtaXR0ZWQgYmVsb3dcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgIFwiSW52YWxpZCBcIiArIHRoaXMubmFtZSArIFwiIHZhbHVlOiBcIiArIHNvdXJjZVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgc2VuZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKFxyXG4gICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmICFpc05hTih2YWx1ZSkgPyB2YWx1ZSArIFwicHhcIiA6IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbixcclxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgaW50ZXJuYWxOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcih0YXJnZXRWZXJzaW9uLCBuYW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlIGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB1cmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBhbHRUZXh0UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJhbHRUZXh0XCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGJhY2tncm91bmRDb2xvclByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwiYmFja2dyb3VuZENvbG9yXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgIEVudW1zLkltYWdlU3R5bGUsXHJcbiAgICAgICAgRW51bXMuSW1hZ2VTdHlsZS5EZWZhdWx0KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzaXplUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJzaXplXCIsXHJcbiAgICAgICAgRW51bXMuU2l6ZSxcclxuICAgICAgICBFbnVtcy5TaXplLkF1dG8pO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBpeGVsV2lkdGhQcm9wZXJ0eSA9IG5ldyBJbWFnZURpbWVuc2lvblByb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwid2lkdGhcIiwgXCJwaXhlbFdpZHRoXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBpeGVsSGVpZ2h0UHJvcGVydHkgPSBuZXcgSW1hZ2VEaW1lbnNpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcImhlaWdodFwiLCBcInBpeGVsSGVpZ2h0XCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNlbGVjdEFjdGlvblByb3BlcnR5ID0gbmV3IEFjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwic2VsZWN0QWN0aW9uXCIsIFsgXCJBY3Rpb24uU2hvd0NhcmRcIiBdKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xyXG5cclxuICAgICAgICBzY2hlbWEucmVtb3ZlKENhcmRFbGVtZW50LmhlaWdodFByb3BlcnR5KTtcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoSW1hZ2UudXJsUHJvcGVydHkpXHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KEltYWdlLmFsdFRleHRQcm9wZXJ0eSlcclxuICAgIGFsdFRleHQ/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KEltYWdlLmJhY2tncm91bmRDb2xvclByb3BlcnR5KVxyXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShJbWFnZS5zaXplUHJvcGVydHkpXHJcbiAgICBzaXplOiBFbnVtcy5TaXplID0gRW51bXMuU2l6ZS5BdXRvO1xyXG5cclxuICAgIEBwcm9wZXJ0eShJbWFnZS5zdHlsZVByb3BlcnR5KVxyXG4gICAgc3R5bGU6IEVudW1zLkltYWdlU3R5bGUgPSBFbnVtcy5JbWFnZVN0eWxlLkRlZmF1bHQ7XHJcblxyXG4gICAgQHByb3BlcnR5KEltYWdlLnBpeGVsV2lkdGhQcm9wZXJ0eSlcclxuICAgIHBpeGVsV2lkdGg/OiBudW1iZXI7XHJcblxyXG4gICAgQHByb3BlcnR5KEltYWdlLnBpeGVsSGVpZ2h0UHJvcGVydHkpXHJcbiAgICBwaXhlbEhlaWdodD86IG51bWJlcjtcclxuXHJcbiAgICBAcHJvcGVydHkoSW1hZ2Uuc2VsZWN0QWN0aW9uUHJvcGVydHkpXHJcbiAgICBzZWxlY3RBY3Rpb24/OiBBY3Rpb247XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseVNpemUoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5waXhlbFdpZHRoIHx8IHRoaXMucGl4ZWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGl4ZWxXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMucGl4ZWxXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGl4ZWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5waXhlbEhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW1hZ2UgaXMgY29uc3RyYWluZWQgaW4gaGVpZ2h0LCB3ZSBzZXQgaXRzIGhlaWdodCBwcm9wZXJ0eSBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGF1dG8gYW5kIHN0cmV0Y2ggYXJlIGlnbm9yZWQgKGRlZmF1bHQgdG8gbWVkaXVtKS4gVEhpcyBpcyBuZWNlc3NhcnkgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBJbWFnZVNldCB3aGljaCB1c2VzIGEgbWF4aW11bSBpbWFnZSBoZWlnaHQgYXMgb3Bwb3NlZCB0byB0aGUgY2FyZHMgd2lkdGhcclxuICAgICAgICAgICAgICAgIC8vIGFzIGEgY29uc3RyYWluaW5nIGRpbWVuc2lvblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlNpemUuU21hbGw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMuc21hbGwgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhvc3RDb25maWcuaW1hZ2VTaXplcy5sYXJnZSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhvc3RDb25maWcuaW1hZ2VTaXplcy5tZWRpdW0gKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TdHJldGNoOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5BdXRvOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1heFdpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TbWFsbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuaG9zdENvbmZpZy5pbWFnZVNpemVzLnNtYWxsICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlNpemUuTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLmhvc3RDb25maWcuaW1hZ2VTaXplcy5sYXJnZSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5TaXplLk1lZGl1bTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuaG9zdENvbmZpZy5pbWFnZVNpemVzLm1lZGl1bSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHVzZURlZmF1bHRTaXppbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAodGhpcy51cmwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQub25rZXlwcmVzcyA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24gJiYgKGUua2V5Q29kZSA9PSAxMyB8fCBlLmtleUNvZGUgPT0gMzIpKSB7IC8vIGVudGVyIG9yIHNwYWNlIHByZXNzZWRcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtc3RhcnRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyB0byBhdm9pZCB3YWxraW5nIHRoZSBwYXJlbnQgaGllcmFyY2h5IG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xyXG5cclxuICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5vbmxvYWQgPSAoZTogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhaXNlSW1hZ2VMb2FkZWRFdmVudCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQub25lcnJvciA9IChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhcmQgPSB0aGlzLmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FyZCAmJiBjYXJkLmRlc2lnbk1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI0VFRUVFRVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUuY29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5pbm5lclRleHQgPSBcIjotKFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVNpemUoZXJyb3JFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LmFwcGVuZENoaWxkKGVycm9yRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJhaXNlSW1hZ2VMb2FkZWRFdmVudCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBcIjtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW1hZ2VcIikpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uICE9PSB1bmRlZmluZWQgJiYgaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC50YWJJbmRleCA9IDBcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIHRoaXMuc2VsZWN0QWN0aW9uLmdldEFyaWFSb2xlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbi50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIDxzdHJpbmc+dGhpcy5zZWxlY3RBY3Rpb24udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFwcGx5U2l6ZShpbWFnZUVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUgPT09IEVudW1zLkltYWdlU3R5bGUuUGVyc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIjUwJSA1MCVcIjtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IDxzdHJpbmc+VXRpbHMuc3RyaW5nVG9Dc3NDb2xvcih0aGlzLmJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSA8c3RyaW5nPnRoaXMucHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUoSW1hZ2UudXJsUHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWx0VGV4dFByb3BlcnR5ID0gdGhpcy5wcmVQcm9jZXNzUHJvcGVydHlWYWx1ZShJbWFnZS5hbHRUZXh0UHJvcGVydHkpO1xyXG4gICAgICAgICAgICBpZiAoYWx0VGV4dFByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuYWx0ID0gPHN0cmluZz5hbHRUZXh0UHJvcGVydHk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIG1heEhlaWdodD86IG51bWJlcjtcclxuXHJcbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJJbWFnZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXN1bHQgJiYgdGhpcy5zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RBY3Rpb24uZ2V0QWN0aW9uQnlJZChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsID8gW3sgdXJsOiB0aGlzLnVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9XSA6IFtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2FyZEVsZW1lbnRDb250YWluZXIgZXh0ZW5kcyBDYXJkRWxlbWVudCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNlbGVjdEFjdGlvblByb3BlcnR5ID0gbmV3IEFjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwic2VsZWN0QWN0aW9uXCIsIFsgXCJBY3Rpb24uU2hvd0NhcmRcIiBdKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNTZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHNjaGVtYS5yZW1vdmUoQ2FyZEVsZW1lbnRDb250YWluZXIuc2VsZWN0QWN0aW9uUHJvcGVydHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoQ2FyZEVsZW1lbnRDb250YWluZXIuc2VsZWN0QWN0aW9uUHJvcGVydHkpXHJcbiAgICBwcm90ZWN0ZWQgX3NlbGVjdEFjdGlvbj86IEFjdGlvbjtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgaXNFbGVtZW50QWxsb3dlZChlbGVtZW50OiBDYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5IHx8ICFlbGVtZW50LmlzSW50ZXJhY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFwcGx5UGFkZGluZygpIHtcclxuICAgICAgICBzdXBlci5hcHBseVBhZGRpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcGh5c2ljYWxQYWRkaW5nID0gbmV3IFNwYWNpbmdEZWZpbml0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xyXG4gICAgICAgICAgICBwaHlzaWNhbFBhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlUGFkZGluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AgPSBwaHlzaWNhbFBhZGRpbmcudG9wICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjBcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGlzU2VsZWN0YWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0SXRlbUNvdW50KCk6IG51bWJlcjtcclxuICAgIGFic3RyYWN0IGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQ7XHJcbiAgICBhYnN0cmFjdCBnZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0oKTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcbiAgICBhYnN0cmFjdCBnZXRMYXN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuICAgIGFic3RyYWN0IHJlbW92ZUl0ZW0oaXRlbTogQ2FyZEVsZW1lbnQpOiBib29sZWFuO1xyXG5cclxuICAgIGFsbG93VmVydGljYWxPdmVyZmxvdzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5nZXRJdGVtQXQoaSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkgJiYgaXRlbS5pc0ludGVyYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW50ZXJhY3Rpdml0eU5vdEFsbG93ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJJbnRlcmFjdGl2aXR5IGlzIG5vdCBhbGxvd2VkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRWxlbWVudEFsbG93ZWQoaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICBcIkVsZW1lbnRzIG9mIHR5cGUgXCIgKyBpdGVtLmdldEpzb25UeXBlTmFtZSgpICsgXCIgYXJlIG5vdCBhbGxvd2VkIGluIHRoaXMgY29udGFpbmVyLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXRlbS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0QWN0aW9uLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gc3VwZXIucmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dWZXJ0aWNhbE92ZXJmbG93KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93WCA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCAmJiB0aGlzLmlzU2VsZWN0YWJsZSAmJiB0aGlzLl9zZWxlY3RBY3Rpb24gJiYgaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1zZWxlY3RhYmxlXCIpKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIHRoaXMuX3NlbGVjdEFjdGlvbi5nZXRBcmlhUm9sZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMuX3NlbGVjdEFjdGlvbi50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9ua2V5cHJlc3MgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiAoZS5rZXlDb2RlID09IDEzIHx8IGUua2V5Q29kZSA9PSAzMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW50ZXIgb3Igc3BhY2UgcHJlc3NlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUxheW91dChwcm9jZXNzQ2hpbGRyZW4pO1xyXG5cclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW1BdChpKS51cGRhdGVMYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxJbnB1dHMoKTogSW5wdXRbXSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogSW5wdXRbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuZ2V0SXRlbUF0KGkpLmdldEFsbElucHV0cygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpOiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodGhpcy5nZXRJdGVtQXQoaSkuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RWxlbWVudEJ5SWQoaWQ6IHN0cmluZyk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gc3VwZXIuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5nZXRJdGVtQXQoaSkuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlU2V0IGV4dGVuZHMgQ2FyZEVsZW1lbnRDb250YWluZXIge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBpbWFnZXNQcm9wZXJ0eSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RDb2xsZWN0aW9uUHJvcGVydHkoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcImltYWdlc1wiLFxyXG4gICAgICAgIEltYWdlLFxyXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgaXRlbTogSW1hZ2UpID0+IHsgaXRlbS5zZXRQYXJlbnQoPENhcmRFbGVtZW50PnNlbmRlcik7IH0pO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGltYWdlU2l6ZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwiaW1hZ2VTaXplXCIsXHJcbiAgICAgICAgRW51bXMuSW1hZ2VTaXplLFxyXG4gICAgICAgIEVudW1zLkltYWdlU2l6ZS5NZWRpdW0pO1xyXG5cclxuICAgIEBwcm9wZXJ0eShJbWFnZVNldC5pbWFnZXNQcm9wZXJ0eSlcclxuICAgIHByaXZhdGUgX2ltYWdlczogSW1hZ2VbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eShJbWFnZVNldC5pbWFnZVNpemVQcm9wZXJ0eSlcclxuICAgIGltYWdlU2l6ZTogRW51bXMuSW1hZ2VTaXplID0gRW51bXMuSW1hZ2VTaXplLk1lZGl1bTtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBlbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2ltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mbGV4V3JhcCA9IFwid3JhcFwiO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaW1hZ2Ugb2YgdGhpcy5faW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaW1hZ2VTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5JbWFnZVNpemUuU21hbGw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNpemUgPSBFbnVtcy5TaXplLlNtYWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkltYWdlU2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2l6ZSA9IEVudW1zLlNpemUuTGFyZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNpemUgPSBFbnVtcy5TaXplLk1lZGl1bTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW1hZ2UubWF4SGVpZ2h0ID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2V0Lm1heEltYWdlSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCByZW5kZXJlZEltYWdlID0gaW1hZ2UucmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1mbGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRJbWFnZS5zdHlsZS5tYXJnaW4gPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkSW1hZ2Uuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjEwcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgcmVuZGVyZWRJbWFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1Db3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZXNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZpcnN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcyAmJiB0aGlzLl9pbWFnZXMubGVuZ3RoID4gMCA/IHRoaXMuX2ltYWdlc1swXSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcyAmJiB0aGlzLl9pbWFnZXMubGVuZ3RoID4gMCA/IHRoaXMuX2ltYWdlc1t0aGlzLl9pbWFnZXMubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlSXRlbShpdGVtOiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgSW1hZ2UpIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1JbmRleCA9IHRoaXMuX2ltYWdlcy5pbmRleE9mKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1JbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbWFnZXMuc3BsaWNlKGl0ZW1JbmRleCwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRQYXJlbnQodW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VTZXRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJbWFnZShpbWFnZTogSW1hZ2UpIHtcclxuICAgICAgICBpZiAoIWltYWdlLnBhcmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbWFnZXMucHVzaChpbWFnZSk7XHJcblxyXG4gICAgICAgICAgICBpbWFnZS5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGltYWdlIGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIEltYWdlU2V0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbmRleE9mKGNhcmRFbGVtZW50OiBDYXJkRWxlbWVudCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50IGluc3RhbmNlb2YgSW1hZ2UgPyB0aGlzLl9pbWFnZXMuaW5kZXhPZihjYXJkRWxlbWVudCkgOiAtMTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1lZGlhU291cmNlIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWltZVR5cGVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcIm1pbWVUeXBlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwidXJsXCIpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShNZWRpYVNvdXJjZS5taW1lVHlwZVByb3BlcnR5KVxyXG4gICAgbWltZVR5cGU/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KE1lZGlhU291cmNlLnVybFByb3BlcnR5KVxyXG4gICAgdXJsPzogc3RyaW5nO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJNZWRpYVNvdXJjZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVybD86IHN0cmluZywgbWltZVR5cGU/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICB0aGlzLm1pbWVUeXBlID0gbWltZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5taW1lVHlwZSAmJiB0aGlzLnVybCA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IEhUTUxTb3VyY2VFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcclxuICAgICAgICAgICAgcmVzdWx0LnNyYyA9IDxzdHJpbmc+dGhpcy51cmw7XHJcbiAgICAgICAgICAgIHJlc3VsdC50eXBlID0gPHN0cmluZz50aGlzLm1pbWVUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1lZGlhIGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBzb3VyY2VzUHJvcGVydHkgPSBuZXcgU2VyaWFsaXphYmxlT2JqZWN0Q29sbGVjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwic291cmNlc1wiLCBNZWRpYVNvdXJjZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcG9zdGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJwb3N0ZXJcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYWx0VGV4dFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwiYWx0VGV4dFwiKTtcclxuXHJcbiAgICBAcHJvcGVydHkoTWVkaWEuc291cmNlc1Byb3BlcnR5KVxyXG4gICAgc291cmNlczogTWVkaWFTb3VyY2VbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eShNZWRpYS5wb3N0ZXJQcm9wZXJ0eSlcclxuICAgIHBvc3Rlcj86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoTWVkaWEuYWx0VGV4dFByb3BlcnR5KVxyXG4gICAgYWx0VGV4dD86IHN0cmluZztcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3VwcG9ydGVkTWVkaWFUeXBlcyA9IFtcImF1ZGlvXCIsIFwidmlkZW9cIl07XHJcblxyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRNZWRpYVR5cGU/OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9zZWxlY3RlZFNvdXJjZXM6IE1lZGlhU291cmNlW107XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQb3N0ZXJVcmwoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3N0ZXIgPyB0aGlzLnBvc3RlciA6IHRoaXMuaG9zdENvbmZpZy5tZWRpYS5kZWZhdWx0UG9zdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJvY2Vzc1NvdXJjZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcclxuICAgICAgICAgICAgbGV0IG1pbWVDb21wb25lbnRzID0gc291cmNlLm1pbWVUeXBlID8gc291cmNlLm1pbWVUeXBlLnNwbGl0KCcvJykgOiBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtaW1lQ29tcG9uZW50cy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9zZWxlY3RlZE1lZGlhVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IE1lZGlhLnN1cHBvcnRlZE1lZGlhVHlwZXMuaW5kZXhPZihtaW1lQ29tcG9uZW50c1swXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlID0gTWVkaWEuc3VwcG9ydGVkTWVkaWFUeXBlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1pbWVDb21wb25lbnRzWzBdID09IHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzLnB1c2goc291cmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclBvc3RlcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgcGxheUJ1dHRvbkFycm93V2lkdGggPSAxMjtcclxuICAgICAgICBjb25zdCBwbGF5QnV0dG9uQXJyb3dIZWlnaHQgPSAxNTtcclxuXHJcbiAgICAgICAgbGV0IHBvc3RlclJvb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLW1lZGlhLXBvc3RlclwiKTtcclxuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiY29udGVudGluZm9cIik7XHJcbiAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLmFsdFRleHQgPyB0aGlzLmFsdFRleHQgOiBcIk1lZGlhIGNvbnRlbnRcIik7XHJcbiAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICBsZXQgcG9zdGVyVXJsID0gdGhpcy5nZXRQb3N0ZXJVcmwoKTtcclxuXHJcbiAgICAgICAgaWYgKHBvc3RlclVybCkge1xyXG4gICAgICAgICAgICBsZXQgcG9zdGVySW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIHBvc3RlckltYWdlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgIHBvc3RlckltYWdlRWxlbWVudC5vbmVycm9yID0gKGU6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zdGVySW1hZ2VFbGVtZW50LnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3N0ZXJJbWFnZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3N0ZXJJbWFnZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbXB0eVwiKTtcclxuICAgICAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50LnNyYyA9IHBvc3RlclVybDtcclxuXHJcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHBvc3RlckltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZW1wdHlcIik7XHJcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5ICYmIHRoaXMuX3NlbGVjdGVkU291cmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUGxheSBtZWRpYVwiKTtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLW1lZGlhLXBsYXlCdXR0b25cIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhvc3RDb25maWcubWVkaWEuYWxsb3dJbmxpbmVQbGF5YmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVkaWFQbGF5ZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJNZWRpYVBsYXllcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuYXBwZW5kQ2hpbGQobWVkaWFQbGF5ZXJFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhUGxheWVyRWxlbWVudC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1lZGlhLm9uUGxheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lZGlhLm9uUGxheSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwbGF5QnV0dG9uSW5uZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLW1lZGlhLXBsYXlCdXR0b24tYXJyb3dcIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUud2lkdGggPSBwbGF5QnV0dG9uQXJyb3dXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBwbGF5QnV0dG9uQXJyb3dIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyVG9wV2lkdGggPSAocGxheUJ1dHRvbkFycm93SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tV2lkdGggPSAocGxheUJ1dHRvbkFycm93SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gcGxheUJ1dHRvbkFycm93V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IFwiMFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclN0eWxlID0gXCJzb2xpZFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclRvcENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclJpZ2h0Q29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyAocGxheUJ1dHRvbkFycm93V2lkdGggLyAxMCkgKyBcInB4LDBweClcIjtcclxuXHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuYXBwZW5kQ2hpbGQocGxheUJ1dHRvbklubmVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcGxheUJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuXHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocGxheUJ1dHRvbk91dGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHBsYXlCdXR0b25Db250YWluZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBvc3RlclJvb3RFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTWVkaWFQbGF5ZXIoKTogSFRNTE1lZGlhRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IG1lZGlhRWxlbWVudDogSFRNTE1lZGlhRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlID09IFwidmlkZW9cIikge1xyXG4gICAgICAgICAgICBsZXQgdmlkZW9QbGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgcG9zdGVyVXJsID0gdGhpcy5nZXRQb3N0ZXJVcmwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb3N0ZXJVcmwpIHtcclxuICAgICAgICAgICAgICAgIHZpZGVvUGxheWVyLnBvc3RlciA9IHBvc3RlclVybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWVkaWFFbGVtZW50ID0gdmlkZW9QbGF5ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZWRpYUVsZW1lbnQuc2V0QXR0cmlidXRlKFwid2Via2l0LXBsYXlzaW5saW5lXCIsIFwiXCIpO1xyXG4gICAgICAgIG1lZGlhRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLCBcIlwiKTtcclxuICAgICAgICBtZWRpYUVsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xyXG4gICAgICAgIG1lZGlhRWxlbWVudC5jb250cm9scyA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChVdGlscy5pc01vYmlsZU9TKCkpIHtcclxuICAgICAgICAgICAgbWVkaWFFbGVtZW50Lm11dGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lZGlhRWxlbWVudC5wcmVsb2FkID0gXCJub25lXCI7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcclxuICAgICAgICAgICAgbGV0IHJlbmRlcmVkU291cmNlID0gc291cmNlLnJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQobWVkaWFFbGVtZW50LCByZW5kZXJlZFNvdXJjZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVkaWFFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtbWVkaWFcIik7XHJcblxyXG4gICAgICAgIHRoaXMucHJvY2Vzc1NvdXJjZXMoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlclBvc3RlcigpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG9uUGxheT86IChzZW5kZXI6IE1lZGlhKSA9PiB2b2lkO1xyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIk1lZGlhXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpOiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdID0gW107XHJcblxyXG4gICAgICAgIGxldCBwb3N0ZXJVcmwgPSB0aGlzLmdldFBvc3RlclVybCgpO1xyXG5cclxuICAgICAgICBpZiAocG9zdGVyVXJsKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgdXJsOiBwb3N0ZXJVcmwsIG1pbWVUeXBlOiBcImltYWdlXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBtZWRpYVNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcclxuICAgICAgICAgICAgaWYgKG1lZGlhU291cmNlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IDxzdHJpbmc+bWVkaWFTb3VyY2UudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogPHN0cmluZz5tZWRpYVNvdXJjZS5taW1lVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdGVkTWVkaWFUeXBlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRWYWxpZGF0aW9uT3B0aW9ucyBleHRlbmRzIFNlcmlhbGl6YWJsZU9iamVjdCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IG5lY2Vzc2l0eVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8zLCBcIm5lY2Vzc2l0eVwiLCBFbnVtcy5JbnB1dFZhbGlkYXRpb25OZWNlc3NpdHksIEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eS5PcHRpb25hbCk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgZXJyb3JNZXNzYWdlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMywgXCJlcnJvck1lc3NhZ3dlXCIpO1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJJbnB1dFZhbGlkYXRpb25PcHRpb25zXCI7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KElucHV0VmFsaWRhdGlvbk9wdGlvbnMubmVjZXNzaXR5UHJvcGVydHkpXHJcbiAgICBuZWNlc3NpdHk6IEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eSA9IEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eS5PcHRpb25hbDtcclxuXHJcbiAgICBAcHJvcGVydHkoSW5wdXRWYWxpZGF0aW9uT3B0aW9ucy5lcnJvck1lc3NhZ2VQcm9wZXJ0eSlcclxuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzQWxsRGVmYXVsdFZhbHVlcygpID8gdW5kZWZpbmVkIDogc3VwZXIuaW50ZXJuYWxUb0pTT04odGFyZ2V0LCBjb250ZXh0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIElucHV0IGV4dGVuZHMgQ2FyZEVsZW1lbnQgaW1wbGVtZW50cyBJSW5wdXQge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB2YWxpZGF0aW9uUHJvcGVydHkgPSBuZXcgU2VyaWFsaXphYmxlT2JqZWN0UHJvcGVydHkoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMyxcclxuICAgICAgICBcInZhbGlkYXRpb25cIixcclxuICAgICAgICBJbnB1dFZhbGlkYXRpb25PcHRpb25zKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xyXG5cclxuICAgICAgICBpZiAoIUdsb2JhbFNldHRpbmdzLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgICAgc2NoZW1hLnJlbW92ZShJbnB1dC52YWxpZGF0aW9uUHJvcGVydHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoSW5wdXQudmFsaWRhdGlvblByb3BlcnR5KVxyXG4gICAgZ2V0IHZhbGlkYXRpb24oKTogSW5wdXRWYWxpZGF0aW9uT3B0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoSW5wdXQudmFsaWRhdGlvblByb3BlcnR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIF9vdXRlckNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfaW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9lcnJvck1lc3NhZ2VFbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgaXNOdWxsYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGlucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZUludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9vdXRlckNvbnRhaW5lckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dC1jb250YWluZXJcIik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGxldCByZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQgPSB0aGlzLmludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChyZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50ID0gcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50O1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBweFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24gJiYgdGhpcy5pc051bGxhYmxlICYmIHRoaXMudmFsaWRhdGlvbi5uZWNlc3NpdHkgPT0gRW51bXMuSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5LlJlcXVpcmVkV2l0aFZpc3VhbEN1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtcmVxdWlyZWRcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9vdXRlckNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdmFsdWVDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uRmFpbHVyZUN1ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vblZhbHVlQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uVmFsdWVDaGFuZ2VkKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmFpc2VJbnB1dFZhbHVlQ2hhbmdlZEV2ZW50KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZXNldFZhbGlkYXRpb25GYWlsdXJlQ3VlKCkge1xyXG4gICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy51c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uICYmIHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtdmFsaWRhdGlvbi1mYWlsZWRcIikpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93VmFsaWRhdGlvbkVycm9yTWVzc2FnZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgJiYgR2xvYmFsU2V0dGluZ3MudXNlQnVpbHRJbklucHV0VmFsaWRhdGlvbiAmJiBHbG9iYWxTZXR0aW5ncy5kaXNwbGF5SW5wdXRWYWxpZGF0aW9uRXJyb3JzICYmIHRoaXMudmFsaWRhdGlvbi5lcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtdmFsaWRhdGlvbi1lcnJvci1tZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy52YWxpZGF0aW9uLmVycm9yTWVzc2FnZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0IHZhbHVlKCk6IGFueTtcclxuXHJcbiAgICBvblZhbHVlQ2hhbmdlZDogKHNlbmRlcjogSW5wdXQpID0+IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgaXNTZXQoKTogYm9vbGVhbjtcclxuXHJcbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxyXG4gICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXHJcbiAgICAgICAgICAgICAgICBcIkFsbCBpbnB1dHMgbXVzdCBoYXZlIGEgdW5pcXVlIElkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy51c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uRmFpbHVyZUN1ZSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMudmFsaWRhdGlvbi5uZWNlc3NpdHkgIT0gRW51bXMuSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5Lk9wdGlvbmFsID8gdGhpcy5pc1NldCgpIDogdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0LXZhbGlkYXRpb24tZmFpbGVkXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uRXJyb3JNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsSW5wdXRzKCk6IElucHV0W10ge1xyXG4gICAgICAgIHJldHVybiBbdGhpc107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzSW50ZXJhY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXQgZXh0ZW5kcyBJbnB1dCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtYXhMZW5ndGhQcm9wZXJ0eSA9IG5ldyBOdW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1heExlbmd0aFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBpc011bHRpbGluZVByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImlzTXVsdGlsaW5lXCIsIGZhbHNlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBwbGFjZWhvbGRlclByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwicGxhY2Vob2xkZXJcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJzdHlsZVwiLCBFbnVtcy5JbnB1dFRleHRTdHlsZSwgRW51bXMuSW5wdXRUZXh0U3R5bGUuVGV4dCk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaW5saW5lQWN0aW9uUHJvcGVydHkgPSBuZXcgQWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJpbmxpbmVBY3Rpb25cIiwgWyBcIkFjdGlvbi5TaG93Q2FyZFwiIF0pO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUZXh0SW5wdXQudmFsdWVQcm9wZXJ0eSlcclxuICAgIGRlZmF1bHRWYWx1ZT86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoVGV4dElucHV0Lm1heExlbmd0aFByb3BlcnR5KVxyXG4gICAgbWF4TGVuZ3RoPzogbnVtYmVyO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUZXh0SW5wdXQuaXNNdWx0aWxpbmVQcm9wZXJ0eSlcclxuICAgIGlzTXVsdGlsaW5lOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgQHByb3BlcnR5KFRleHRJbnB1dC5wbGFjZWhvbGRlclByb3BlcnR5KVxyXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KFRleHRJbnB1dC5zdHlsZVByb3BlcnR5KVxyXG4gICAgc3R5bGU6IEVudW1zLklucHV0VGV4dFN0eWxlID0gRW51bXMuSW5wdXRUZXh0U3R5bGUuVGV4dDtcclxuXHJcbiAgICBAcHJvcGVydHkoVGV4dElucHV0LmlubGluZUFjdGlvblByb3BlcnR5KVxyXG4gICAgaW5saW5lQWN0aW9uPzogQWN0aW9uO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBJbnB1dChpbnB1dDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcclxuICAgICAgICBpbnB1dC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgIGlucHV0LnRhYkluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMucGxhY2Vob2xkZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1heExlbmd0aCAmJiB0aGlzLm1heExlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5wdXQubWF4TGVuZ3RoID0gdGhpcy5tYXhMZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0aGlzLnZhbHVlQ2hhbmdlZCgpOyB9XHJcbiAgICAgICAgaW5wdXQub25rZXlwcmVzcyA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEN0cmwrRW50ZXIgcHJlc3NlZFxyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEwICYmIHRoaXMuaW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlubGluZUFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNdWx0aWxpbmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgICAgICAgICByZXN1bHQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLXRleHRJbnB1dFwiLCBcImFjLW11bHRpbGluZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10ZXh0SW5wdXRcIik7XHJcbiAgICAgICAgICAgIHJlc3VsdC50eXBlID0gRW51bXMuSW5wdXRUZXh0U3R5bGVbdGhpcy5zdHlsZV0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dChyZXN1bHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZUludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVuZGVyZWRJbnB1dENvbnRyb2wgPSBzdXBlci5vdmVycmlkZUludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlubGluZUFjdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5saW5lQWN0aW9uQnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBidXR0b24ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmxpbmVBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uLmljb25VcmwpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaWNvbk9ubHlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgaWNvbi5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgYmVsb3cgdHJpY2sgaXMgbmVjZXNzYXJ5IGFzIGEgd29ya2Fyb3VuZCBpbiBDaHJvbWUgd2hlcmUgdGhlIGljb24gaXMgaW5pdGlhbGx5IGRpc3BsYXllZFxyXG4gICAgICAgICAgICAgICAgLy8gYXQgaXRzIG5hdGl2ZSBzaXplIHRoZW4gcmVzaXplZCB0byAxMDAlIG9mIHRoZSBidXR0b24ncyBoZWlnaHQuIFRoaXMgY2ZyZWF0ZXMgYW4gdW5wbGVhc2FudFxyXG4gICAgICAgICAgICAgICAgLy8gZmxpY2tlci4gT24gdG9wIG9mIHRoYXQsIENocm9tZSdzIGZsZXggaW1wbGVtZW50YXRpb24gZmFpbHMgdG8gcHJwZXJseSByZS1sYXlvdXQgdGhlIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGltYWdlIGhhcyBsb2FkZWQgYW5kIGJlZW4gZ2ljdmVuIGl0cyBmaW5hbCBzaXplLiBUaGUgYmVsb3cgdHJpY2sgYWxzbyBmaXhlcyB0aGF0LlxyXG4gICAgICAgICAgICAgICAgaWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICBpY29uLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpY29uLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUNoaWxkKGljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbk9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0T25seVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuaW5saW5lQWN0aW9uLnRpdGxlID8gdGhpcy5pbmxpbmVBY3Rpb24udGl0bGUgOiBcIlRpdGxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlRpdGxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGljb24uc3JjID0gdGhpcy5pbmxpbmVBY3Rpb24uaWNvblVybDtcclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoaWNvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRpdGxlID0gdGhpcy5pbmxpbmVBY3Rpb24udGl0bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInRleHRPbmx5XCIpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5pbmxpbmVBY3Rpb24udGl0bGUgPyB0aGlzLmlubGluZUFjdGlvbi50aXRsZSA6IFwiVGl0bGVcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSBcIjhweFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRJbnB1dENvbnRyb2w7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuVGV4dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXN1bHQgJiYgdGhpcy5pbmxpbmVBY3Rpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5pbmxpbmVBY3Rpb24uZ2V0QWN0aW9uQnlJZChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2V0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc011bHRpbGluZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8SFRNTFRleHRBcmVhRWxlbWVudD50aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMucmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVJbnB1dCBleHRlbmRzIElucHV0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHRpdGxlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ0aXRsZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZU9uUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZU9uXCIsIHRydWUsIHVuZGVmaW5lZCwgXCJ0cnVlXCIsIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4geyByZXR1cm4gXCJ0cnVlXCI7IH0pO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlT2ZmUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZU9mZlwiLCB0cnVlLCB1bmRlZmluZWQsIFwiZmFsc2VcIiwgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB7IHJldHVybiBcImZhbHNlXCI7IH0pO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHdyYXBQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJ3cmFwXCIsIGZhbHNlKTtcclxuXHJcbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudmFsdWVQcm9wZXJ0eSlcclxuICAgIGRlZmF1bHRWYWx1ZT86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudGl0bGVQcm9wZXJ0eSlcclxuICAgIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUb2dnbGVJbnB1dC52YWx1ZU9uUHJvcGVydHkpXHJcbiAgICB2YWx1ZU9uOiBzdHJpbmcgPSBcInRydWVcIjtcclxuXHJcbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudmFsdWVPZmZQcm9wZXJ0eSlcclxuICAgIHZhbHVlT2ZmOiBzdHJpbmcgPSBcImZhbHNlXCI7XHJcblxyXG4gICAgQHByb3BlcnR5KFRvZ2dsZUlucHV0LndyYXBQcm9wZXJ0eSlcclxuICAgIHdyYXA6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja2JveElucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10b2dnbGVJbnB1dFwiKTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuaWQgPSBVdGlscy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50aXRsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMudGl0bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUgPT0gdGhpcy52YWx1ZU9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQub25jaGFuZ2UgPSAoKSA9PiB7IHRoaXMudmFsdWVDaGFuZ2VkKCk7IH1cclxuXHJcbiAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50aXRsZSB8fCB0aGlzLmlzRGVzaWduTW9kZSgpKSB7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbCA9IG5ldyBMYWJlbCgpO1xyXG4gICAgICAgICAgICBsYWJlbC5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIGxhYmVsLmZvckVsZW1lbnRJZCA9IHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LmlkO1xyXG4gICAgICAgICAgICBsYWJlbC5ob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xyXG4gICAgICAgICAgICBsYWJlbC50ZXh0ID0gIXRoaXMudGl0bGUgPyB0aGlzLmdldEpzb25UeXBlTmFtZSgpIDogdGhpcy50aXRsZTtcclxuICAgICAgICAgICAgbGFiZWwudXNlTWFya2Rvd24gPSBHbG9iYWxTZXR0aW5ncy51c2VNYXJrZG93bkluUmFkaW9CdXR0b25BbmRDaGVja2JveDtcclxuICAgICAgICAgICAgbGFiZWwud3JhcCA9IHRoaXMud3JhcDtcclxuXHJcbiAgICAgICAgICAgIGxldCBsYWJlbEVsZW1lbnQgPSBsYWJlbC5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsYWJlbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjZweFwiO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzcGFjZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIHNwYWNlckVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjZweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHNwYWNlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgbGFiZWxFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBpc051bGxhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJJbnB1dC5Ub2dnbGVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpc1NldCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LmNoZWNrZWQgPyB0aGlzLnZhbHVlT24gOiB0aGlzLnZhbHVlT2ZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaG9pY2UgZXh0ZW5kcyBTZXJpYWxpemFibGVPYmplY3Qge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB0aXRsZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidGl0bGVcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDaG9pY2UudGl0bGVQcm9wZXJ0eSlcclxuICAgIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDaG9pY2UudmFsdWVQcm9wZXJ0eSlcclxuICAgIHZhbHVlPzogc3RyaW5nO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJDaG9pY2VcIjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hvaWNlU2V0SW5wdXQgZXh0ZW5kcyBJbnB1dCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBjaG9pY2VzUHJvcGVydHkgPSBuZXcgU2VyaWFsaXphYmxlT2JqZWN0Q29sbGVjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiY2hvaWNlc1wiLCBDaG9pY2UpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgVmFsdWVTZXRQcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIHsgdmFsdWU6IFwiY29tcGFjdFwiIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6IFwiZXhwYW5kZWRcIiB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBcImNvbXBhY3RcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaXNNdWx0aVNlbGVjdFByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImlzTXVsdGlTZWxlY3RcIiwgZmFsc2UpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBsYWNlaG9sZGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJwbGFjZWhvbGRlclwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwid3JhcFwiLCBmYWxzZSk7XHJcblxyXG4gICAgQHByb3BlcnR5KENob2ljZVNldElucHV0LnZhbHVlUHJvcGVydHkpXHJcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KENob2ljZVNldElucHV0LnN0eWxlUHJvcGVydHkpXHJcbiAgICBzdHlsZT86IFwiY29tcGFjdFwiIHwgXCJleHBhbmRlZFwiO1xyXG5cclxuICAgIGdldCBpc0NvbXBhY3QoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGUgIT09IFwiZXhwYW5kZWRcIjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaXNDb21wYWN0KHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IHZhbHVlID8gdW5kZWZpbmVkIDogXCJleHBhbmRlZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShDaG9pY2VTZXRJbnB1dC5pc011bHRpU2VsZWN0UHJvcGVydHkpXHJcbiAgICBpc011bHRpU2VsZWN0OiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgQHByb3BlcnR5KENob2ljZVNldElucHV0LnBsYWNlaG9sZGVyUHJvcGVydHkpXHJcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoQ2hvaWNlU2V0SW5wdXQud3JhcFByb3BlcnR5KVxyXG4gICAgd3JhcDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDaG9pY2VTZXRJbnB1dC5jaG9pY2VzUHJvcGVydHkpXHJcbiAgICBjaG9pY2VzOiBDaG9pY2VbXSA9IFtdO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHVuaXF1ZUNhdGVnb3J5Q291bnRlciA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0VW5pcXVlQ2F0ZWdvcnlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHVuaXF1ZUNhdGVnb3J5TmFtZSA9IFwiX19hYy1jYXRlZ29yeVwiICsgQ2hvaWNlU2V0SW5wdXQudW5pcXVlQ2F0ZWdvcnlDb3VudGVyO1xyXG5cclxuICAgICAgICBDaG9pY2VTZXRJbnB1dC51bmlxdWVDYXRlZ29yeUNvdW50ZXIrKztcclxuXHJcbiAgICAgICAgcmV0dXJuIHVuaXF1ZUNhdGVnb3J5TmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91bmlxdWVDYXRlZ29yeU5hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3NlbGVjdEVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfdG9nZ2xlSW5wdXRzOiBIVE1MSW5wdXRFbGVtZW50W107XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJDb21wb3VuZElucHV0KGNzc0NsYXNzTmFtZTogc3RyaW5nLCB0eXBlOiBcImNoZWNrYm94XCIgfCBcInJhZGlvXCIsIGRlZmF1bHRWYWx1ZXM6IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgY3NzQ2xhc3NOYW1lKTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0cyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjaG9pY2Ugb2YgdGhpcy5jaG9pY2VzKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgaW5wdXQuaWQgPSBVdGlscy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICBpbnB1dC5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcclxuICAgICAgICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5uYW1lID0gdGhpcy5pZCA/IHRoaXMuaWQgOiB0aGlzLl91bmlxdWVDYXRlZ29yeU5hbWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hvaWNlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGNob2ljZS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNob2ljZS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBjaG9pY2UudGl0bGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlcyAmJiBjaG9pY2UudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWVzLmluZGV4T2YoY2hvaWNlLnZhbHVlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKCkgPT4geyB0aGlzLnZhbHVlQ2hhbmdlZCgpOyB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dHMucHVzaChpbnB1dCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29tcG91bmRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGNvbXBvdW5kSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBjb21wb3VuZElucHV0LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG5cclxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgaW5wdXQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxhYmVsID0gbmV3IExhYmVsKCk7XHJcbiAgICAgICAgICAgIGxhYmVsLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICAgICAgbGFiZWwuZm9yRWxlbWVudElkID0gaW5wdXQuaWQ7XHJcbiAgICAgICAgICAgIGxhYmVsLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgIGxhYmVsLnRleHQgPSBjaG9pY2UudGl0bGUgPyBjaG9pY2UudGl0bGUgOiBcIkNob2ljZSBcIiArIHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxhYmVsLnVzZU1hcmtkb3duID0gR2xvYmFsU2V0dGluZ3MudXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3g7XHJcbiAgICAgICAgICAgIGxhYmVsLndyYXAgPSB0aGlzLndyYXA7XHJcblxyXG4gICAgICAgICAgICBsZXQgbGFiZWxFbGVtZW50ID0gbGFiZWwucmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFiZWxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMSAxIGF1dG9cIjtcclxuICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCI2cHhcIjtcclxuICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc3BhY2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBzcGFjZXJFbGVtZW50LnN0eWxlLndpZHRoID0gXCI2cHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChjb21wb3VuZElucHV0LCBzcGFjZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGNvbXBvdW5kSW5wdXQsIGxhYmVsRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIGNvbXBvdW5kSW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSBzdXJlIGBhcmlhLWN1cnJlbnRgIGlzIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnRseS1zZWxlY3RlZCBpdGVtXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxBcHBseUFyaWFDdXJyZW50KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RFbGVtZW50Lm9wdGlvbnM7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbaV0uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2ldLnNldEF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2ldLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHRoaXMuX3VuaXF1ZUNhdGVnb3J5TmFtZSA9IENob2ljZVNldElucHV0LmdldFVuaXF1ZUNhdGVnb3J5TmFtZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc011bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIFJlbmRlciBhcyBhIGxpc3Qgb2YgdG9nZ2xlIGlucHV0c1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJDb21wb3VuZElucHV0KFxyXG4gICAgICAgICAgICAgICAgXCJhYy1jaG9pY2VTZXRJbnB1dC1tdWx0aVNlbGVjdFwiLFxyXG4gICAgICAgICAgICAgICAgXCJjaGVja2JveFwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPyB0aGlzLmRlZmF1bHRWYWx1ZS5zcGxpdCh0aGlzLmhvc3RDb25maWcuY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvcikgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUgPT09IFwiZXhwYW5kZWRcIikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIGFzIGEgc2VyaWVzIG9mIHJhZGlvIGJ1dHRvbnNcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckNvbXBvdW5kSW5wdXQoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhYy1jaG9pY2VTZXRJbnB1dC1leHBhbmRlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicmFkaW9cIixcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA/IFsgdGhpcy5kZWZhdWx0VmFsdWUgXSA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYXMgYSBjb21ibyBib3hcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIFwiYWMtbXVsdGljaG9pY2VJbnB1dFwiLCBcImFjLWNob2ljZVNldElucHV0LWNvbXBhY3RcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0aGlzLl9zZWxlY3RFbGVtZW50LCBvcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNob2ljZSBvZiB0aGlzLmNob2ljZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSA8c3RyaW5nPmNob2ljZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dCA9IDxzdHJpbmc+Y2hvaWNlLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIDxzdHJpbmc+Y2hvaWNlLnRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNob2ljZS52YWx1ZSA9PSB0aGlzLmRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGhpcy5fc2VsZWN0RWxlbWVudCwgb3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxBcHBseUFyaWFDdXJyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsQXBwbHlBcmlhQ3VycmVudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuQ2hvaWNlU2V0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dDogVmFsaWRhdGlvblJlc3VsdHMpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2hvaWNlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkNvbGxlY3Rpb25DYW50QmVFbXB0eSxcclxuICAgICAgICAgICAgICAgIFwiQW4gSW5wdXQuQ2hvaWNlU2V0IG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgY2hvaWNlIGRlZmluZWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgY2hvaWNlIG9mIHRoaXMuY2hvaWNlcykge1xyXG4gICAgICAgICAgICBpZiAoIWNob2ljZS50aXRsZSB8fCAhY2hvaWNlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQWxsIGNob2ljZXMgaW4gYW4gSW5wdXQuQ2hvaWNlU2V0IG11c3QgaGF2ZSB0aGVpciB0aXRsZSBhbmQgdmFsdWUgcHJvcGVydGllcyBzZXQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzU2V0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghdGhpcy5pc011bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tcGFjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NlbGVjdEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0RWxlbWVudC5zZWxlY3RlZEluZGV4ID4gMCA/IHRoaXMuX3NlbGVjdEVsZW1lbnQudmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fdG9nZ2xlSW5wdXRzIHx8IHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdG9nZ2xlSW5wdXQgb2YgdGhpcy5fdG9nZ2xlSW5wdXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZ2dsZUlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvZ2dsZUlucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3RvZ2dsZUlucHV0cyB8fCB0aGlzLl90b2dnbGVJbnB1dHMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB0b2dnbGVJbnB1dCBvZiB0aGlzLl90b2dnbGVJbnB1dHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0b2dnbGVJbnB1dC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmhvc3RDb25maWcuY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0b2dnbGVJbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdCA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOdW1iZXJJbnB1dCBleHRlbmRzIElucHV0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBOdW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBsYWNlaG9sZGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJwbGFjZWhvbGRlclwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtaW5Qcm9wZXJ0eSA9IG5ldyBOdW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1pblwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtYXhQcm9wZXJ0eSA9IG5ldyBOdW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1heFwiKTtcclxuXHJcbiAgICBAcHJvcGVydHkoTnVtYmVySW5wdXQudmFsdWVQcm9wZXJ0eSlcclxuICAgIGRlZmF1bHRWYWx1ZT86IG51bWJlcjtcclxuXHJcbiAgICBAcHJvcGVydHkoTnVtYmVySW5wdXQubWluUHJvcGVydHkpXHJcbiAgICBtaW4/OiBudW1iZXI7XHJcblxyXG4gICAgQHByb3BlcnR5KE51bWJlcklucHV0Lm1heFByb3BlcnR5KVxyXG4gICAgbWF4PzogbnVtYmVyO1xyXG5cclxuICAgIEBwcm9wZXJ0eShOdW1iZXJJbnB1dC5wbGFjZWhvbGRlclByb3BlcnR5KVxyXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfbnVtYmVySW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5taW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCB0aGlzLm1pbi50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1heCkge1xyXG4gICAgICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHRoaXMubWF4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy1udW1iZXJJbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQudmFsdWVBc051bWJlciA9IHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQub25pbnB1dCA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIklucHV0Lk51bWJlclwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2V0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgIWlzTmFOKHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQgPyB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQudmFsdWVBc051bWJlciA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dCBleHRlbmRzIElucHV0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBsYWNlaG9sZGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJwbGFjZWhvbGRlclwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtaW5Qcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1pblwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtYXhQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1heFwiKTtcclxuXHJcbiAgICBAcHJvcGVydHkoRGF0ZUlucHV0LnZhbHVlUHJvcGVydHkpXHJcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KERhdGVJbnB1dC5taW5Qcm9wZXJ0eSlcclxuICAgIG1pbj86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoRGF0ZUlucHV0Lm1heFByb3BlcnR5KVxyXG4gICAgbWF4Pzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShEYXRlSW5wdXQucGxhY2Vob2xkZXJQcm9wZXJ0eSlcclxuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgX2RhdGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1pbikge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCB0aGlzLm1pbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXgpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgdGhpcy5tYXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLWRhdGVJbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQub25pbnB1dCA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuRGF0ZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2V0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlSW5wdXRFbGVtZW50ID8gdGhpcy5fZGF0ZUlucHV0RWxlbWVudC52YWx1ZSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVQcm9wZXJ0eSBleHRlbmRzIEN1c3RvbVByb3BlcnR5PHN0cmluZyB8IHVuZGVmaW5lZD4ge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbiwgcmVhZG9ubHkgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIHRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHkubmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSAmJiAvXlswLTldezJ9OlswLTldezJ9JC8udGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUodGFyZ2V0LCBwcm9wZXJ0eS5uYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZUlucHV0IGV4dGVuZHMgSW5wdXQge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBsYWNlaG9sZGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJwbGFjZWhvbGRlclwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtaW5Qcm9wZXJ0eSA9IG5ldyBUaW1lUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJtaW5cIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4UHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibWF4XCIpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUaW1lSW5wdXQudmFsdWVQcm9wZXJ0eSlcclxuICAgIGRlZmF1bHRWYWx1ZT86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoVGltZUlucHV0Lm1pblByb3BlcnR5KVxyXG4gICAgbWluPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUaW1lSW5wdXQubWF4UHJvcGVydHkpXHJcbiAgICBtYXg/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KFRpbWVJbnB1dC5wbGFjZWhvbGRlclByb3BlcnR5KVxyXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfdGltZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGltZVwiKTtcclxuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCA8c3RyaW5nPnRoaXMubWluKTtcclxuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCA8c3RyaW5nPnRoaXMubWF4KTtcclxuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10aW1lSW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQub25pbnB1dCA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMucGxhY2Vob2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lSW5wdXRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIklucHV0LlRpbWVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpc1NldCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGltZUlucHV0RWxlbWVudCA/IHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQudmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGVudW0gQWN0aW9uQnV0dG9uU3RhdGUge1xyXG4gICAgTm9ybWFsLFxyXG4gICAgRXhwYW5kZWQsXHJcbiAgICBTdWJkdWVkXHJcbn1cclxuXHJcbmNsYXNzIEFjdGlvbkJ1dHRvbiB7XHJcbiAgICBwcml2YXRlIF9wYXJlbnRDb250YWluZXJTdHlsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc3RhdGU6IEFjdGlvbkJ1dHRvblN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ3NzU3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uLnBhcmVudCAmJiB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IGhvc3RDb25maWcgPSB0aGlzLmFjdGlvbi5wYXJlbnQuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1wdXNoQnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudENvbnRhaW5lclN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInN0eWxlLVwiICsgdGhpcy5fcGFyZW50Q29udGFpbmVyU3R5bGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbi51cGRhdGVBY3Rpb25CdXR0b25Dc3NTdHlsZSh0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQsIHRoaXMuX3N0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGVkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwic3ViZHVlZFwiKSk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEFjdGlvbkJ1dHRvblN0YXRlLkV4cGFuZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGVkXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQWN0aW9uQnV0dG9uU3RhdGUuU3ViZHVlZDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJzdWJkdWVkXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uLnN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24uc3R5bGUgPT09IEVudW1zLkFjdGlvblN0eWxlLlBvc2l0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lcyhcInByaW1hcnlcIiwgXCJzdHlsZS1wb3NpdGl2ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWVzKFwic3R5bGUtXCIgKyB0aGlzLmFjdGlvbi5zdHlsZS50b0xvd2VyQ2FzZSgpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZG9ubHkgYWN0aW9uOiBBY3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWN0aW9uOiBBY3Rpb24sIHBhcmVudENvbnRhaW5lclN0eWxlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcclxuICAgICAgICB0aGlzLl9wYXJlbnRDb250YWluZXJTdHlsZSA9IHBhcmVudENvbnRhaW5lclN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2s/OiAoYWN0aW9uQnV0dG9uOiBBY3Rpb25CdXR0b24pID0+IHZvaWQ7XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNzc1N0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2sgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2sodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdGF0ZSgpOiBBY3Rpb25CdXR0b25TdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzdGF0ZSh2YWx1ZTogQWN0aW9uQnV0dG9uU3RhdGUpIHtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNzc1N0eWxlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFjdGlvblR5cGUgPSB7IG5ldygpOiBBY3Rpb24gfTtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBY3Rpb24gZXh0ZW5kcyBDYXJkT2JqZWN0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdGl0bGVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInRpdGxlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGljb25VcmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcImljb25VcmxcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBWYWx1ZVNldFByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzIsXHJcbiAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogRW51bXMuQWN0aW9uU3R5bGUuRGVmYXVsdCB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5BY3Rpb25TdHlsZS5EZXN0cnVjdGl2ZSB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBFbnVtcy5BY3Rpb25TdHlsZS5EZWZhdWx0KTtcclxuICAgIC8vIFRPRE86IFJldmlzZSB0aGlzIHdoZW4gZmluYWxpemluZyBpbnB1dCB2YWxpZGF0aW9uXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaWdub3JlSW5wdXRWYWxpZGF0aW9uUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzMsIFwiaWdub3JlSW5wdXRWYWxpZGF0aW9uXCIsIGZhbHNlKTtcclxuXHJcbiAgICBAcHJvcGVydHkoQWN0aW9uLnRpdGxlUHJvcGVydHkpXHJcbiAgICB0aXRsZT86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoQWN0aW9uLmljb25VcmxQcm9wZXJ0eSlcclxuICAgIGljb25Vcmw/OiBzdHJpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KEFjdGlvbi5zdHlsZVByb3BlcnR5KVxyXG4gICAgc3R5bGU6IHN0cmluZyA9IEVudW1zLkFjdGlvblN0eWxlLkRlZmF1bHQ7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfYWN0aW9uQ29sbGVjdGlvbj86IEFjdGlvbkNvbGxlY3Rpb247IC8vIGhvbGQgdGhlIHJlZmVyZW5jZSB0byBpdHMgYWN0aW9uIGNvbGxlY3Rpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWRkQ3NzQ2xhc3NlcyhlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaW4gYmFzZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEdldFJlZmVyZW5jZWRJbnB1dHMoYWxsSW5wdXRzOiBJbnB1dFtdKTogRGljdGlvbmFyeTxJbnB1dD4ge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQcmVwYXJlRm9yRXhlY3V0aW9uKGlucHV0czogRGljdGlvbmFyeTxJbnB1dD4gfCB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxWYWxpZGF0ZUlucHV0cyhyZWZlcmVuY2VkSW5wdXRzOiBEaWN0aW9uYXJ5PElucHV0PiB8IHVuZGVmaW5lZCk6IElucHV0W10ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IElucHV0W10gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24gJiYgIXRoaXMuaWdub3JlSW5wdXRWYWxpZGF0aW9uICYmIHJlZmVyZW5jZWRJbnB1dHMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKHJlZmVyZW5jZWRJbnB1dHMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSByZWZlcmVuY2VkSW5wdXRzW2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC52YWxpZGF0ZVZhbHVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3VsZFNlcmlhbGl6ZShjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmFjdGlvblJlZ2lzdHJ5LmZpbmRCeU5hbWUodGhpcy5nZXRKc29uVHlwZU5hbWUoKSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBvbkV4ZWN1dGU6IChzZW5kZXI6IEFjdGlvbikgPT4gdm9pZDtcclxuXHJcbiAgICBnZXRIcmVmKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJpYVJvbGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJidXR0b25cIjtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBY3Rpb25CdXR0b25Dc3NTdHlsZShhY3Rpb25CdXR0b25FbGVtZW50OiBIVE1MRWxlbWVudCwgYnV0dG9uU3RhdGU6IEFjdGlvbkJ1dHRvblN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsKTogdm9pZCB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ/OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5wYXJzZShzb3VyY2UsIGNvbnRleHQgPyBjb250ZXh0IDogbmV3IFNlcmlhbGl6YXRpb25Db250ZXh0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihjb250ZXh0PzogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBQcm9wZXJ0eUJhZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnRvSlNPTihjb250ZXh0ID8gY29udGV4dCA6IG5ldyBTZXJpYWxpemF0aW9uQ29udGV4dCgpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoYmFzZUNzc0NsYXNzOiBzdHJpbmcgPSBcImFjLXB1c2hCdXR0b25cIikge1xyXG4gICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgZm9yIHBlcmZcclxuICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgbGV0IGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENzc0NsYXNzZXMoYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnRpdGxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQudHlwZSA9IFwiYnV0dG9uXCI7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICBidXR0b25FbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuXHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIHRoaXMuZ2V0QXJpYVJvbGUoKSk7XHJcblxyXG4gICAgICAgIGxldCB0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgdGl0bGVFbGVtZW50LnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcclxuXHJcbiAgICAgICAgaWYgKCEoaG9zdENvbmZpZy5hY3Rpb25zLmljb25QbGFjZW1lbnQgPT0gRW51bXMuQWN0aW9uSWNvblBsYWNlbWVudC5BYm92ZVRpdGxlIHx8IGhvc3RDb25maWcuYWN0aW9ucy5hbGxvd1RpdGxlVG9XcmFwKSkge1xyXG4gICAgICAgICAgICB0aXRsZUVsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9IFwibm93cmFwXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50aXRsZSkge1xyXG4gICAgICAgICAgICB0aXRsZUVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy50aXRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pY29uVXJsKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vSWNvblwiKTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGl0bGVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnNyYyA9IHRoaXMuaWNvblVybDtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuc3R5bGUud2lkdGggPSBob3N0Q29uZmlnLmFjdGlvbnMuaWNvblNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmhlaWdodCA9IGhvc3RDb25maWcuYWN0aW9ucy5pY29uU2l6ZSArIFwicHhcIjtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuaWNvblBsYWNlbWVudCA9PSBFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LkFib3ZlVGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImljb25BYm92ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjZweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaWNvbkxlZnRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNnB4XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoaWNvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmFwcGVuZENoaWxkKHRpdGxlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSBidXR0b25FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25FeGVjdXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25FeGVjdXRlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmFpc2VFeGVjdXRlQWN0aW9uRXZlbnQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZUZvckV4ZWN1dGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgcmVmZXJlbmNlZElucHV0cyA9IHRoaXMuZ2V0UmVmZXJlbmNlZElucHV0cygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbFZhbGlkYXRlSW5wdXRzKHJlZmVyZW5jZWRJbnB1dHMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFByZXBhcmVGb3JFeGVjdXRpb24ocmVmZXJlbmNlZElucHV0cyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW1vdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVtb3ZlQWN0aW9uKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbElucHV0cygpOiBJbnB1dFtdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpOiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pY29uVXJsID8gW3sgdXJsOiB0aGlzLmljb25VcmwsIG1pbWVUeXBlOiBcImltYWdlXCIgfV0gOiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlkID09PSBpZCA/IHRoaXMgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVmZXJlbmNlZElucHV0cygpOiBEaWN0aW9uYXJ5PElucHV0PiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5pbnRlcm5hbEdldFJlZmVyZW5jZWRJbnB1dHModGhpcy5wYXJlbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRBbGxJbnB1dHMoKSkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVJbnB1dHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWxpZGF0ZUlucHV0cyh0aGlzLmdldFJlZmVyZW5jZWRJbnB1dHMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUHJpbWFyeSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZSA9PSBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaXNQcmltYXJ5KHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUgPSBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlID09IEVudW1zLkFjdGlvblN0eWxlLlBvc2l0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlID0gRW51bXMuQWN0aW9uU3R5bGUuRGVmYXVsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWdub3JlSW5wdXRWYWxpZGF0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBob3N0Q29uZmlnKCk6IEhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50Lmhvc3RDb25maWcgOiBkZWZhdWx0SG9zdENvbmZpZztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFyZW50KCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gPENhcmRFbGVtZW50PnRoaXMuX3BhcmVudDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN1Ym1pdEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IGRhdGFQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eURlZmluaXRpb24oVmVyc2lvbnMudjFfMCwgXCJkYXRhXCIpO1xyXG5cclxuICAgIEBwcm9wZXJ0eShTdWJtaXRBY3Rpb24uZGF0YVByb3BlcnR5KVxyXG4gICAgcHJpdmF0ZSBfb3JpZ2luYWxEYXRhPzogUHJvcGVydHlCYWc7XHJcblxyXG4gICAgQHByb3BlcnR5KEFjdGlvbi5pZ25vcmVJbnB1dFZhbGlkYXRpb25Qcm9wZXJ0eSlcclxuICAgIHByaXZhdGUgX2lnbm9yZUlucHV0VmFsaWRhdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgc3RhdGljIHJlYWRvbmx5IEpzb25UeXBlTmFtZTogXCJBY3Rpb24uU3VibWl0XCIgPSBcIkFjdGlvbi5TdWJtaXRcIjtcclxuXHJcbiAgICBwcml2YXRlIF9pc1ByZXBhcmVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9wcm9jZXNzZWREYXRhPzogUHJvcGVydHlCYWc7XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsR2V0UmVmZXJlbmNlZElucHV0cyhhbGxJbnB1dHM6IElucHV0W10pOiBEaWN0aW9uYXJ5PElucHV0PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogRGljdGlvbmFyeTxJbnB1dD4gPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaW5wdXQgb2YgYWxsSW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2lucHV0LmlkXSA9IGlucHV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFByZXBhcmVGb3JFeGVjdXRpb24oaW5wdXRzOiBEaWN0aW9uYXJ5PElucHV0PiB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9vcmlnaW5hbERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5fb3JpZ2luYWxEYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWREYXRhID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fcHJvY2Vzc2VkRGF0YSAmJiBpbnB1dHMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGlucHV0cykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IGlucHV0c1trZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NlZERhdGFbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2lzUHJlcGFyZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBTdWJtaXRBY3Rpb24uSnNvblR5cGVOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpZ25vcmVJbnB1dFZhbGlkYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lnbm9yZUlucHV0VmFsaWRhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaWdub3JlSW5wdXRWYWxpZGF0aW9uKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRhdGEoKTogb2JqZWN0IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNQcmVwYXJlZCA/IHRoaXMuX3Byb2Nlc3NlZERhdGEgOiB0aGlzLl9vcmlnaW5hbERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRhdGEodmFsdWU6IG9iamVjdCB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuX29yaWdpbmFsRGF0YSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2lzUHJlcGFyZWQgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9wZW5VcmxBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB1cmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcclxuXHJcbiAgICBAcHJvcGVydHkoT3BlblVybEFjdGlvbi51cmxQcm9wZXJ0eSlcclxuICAgIHVybD86IHN0cmluZztcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyBOb3RlIHRoZSBcIndlaXJkXCIgd2F5IHRoaXMgZmllbGQgaXMgZGVjbGFyZWQgaXMgdG8gd29yayBhcm91bmQgYSBicmVha2luZ1xyXG4gICAgLy8gY2hhbmdlIGludHJvZHVjZWQgaW4gVFMgMy4xIHdydCBkLnRzIGdlbmVyYXRpb24uIERPIE5PVCBDSEFOR0VcclxuICAgIHN0YXRpYyByZWFkb25seSBKc29uVHlwZU5hbWU6IFwiQWN0aW9uLk9wZW5VcmxcIiA9IFwiQWN0aW9uLk9wZW5VcmxcIjtcclxuXHJcbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gT3BlblVybEFjdGlvbi5Kc29uVHlwZU5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJpYVJvbGUoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwibGlua1wiO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy51cmwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxyXG4gICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXHJcbiAgICAgICAgICAgICAgICBcIkFuIEFjdGlvbi5PcGVuVXJsIG11c3QgaGF2ZSBpdHMgdXJsIHByb3BlcnR5IHNldC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEhyZWYoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51cmw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdGFyZ2V0RWxlbWVudHNQcm9wZXJ0eSA9IG5ldyBDdXN0b21Qcm9wZXJ0eTxQcm9wZXJ0eUJhZz4oXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMixcclxuICAgICAgICBcInRhcmdldEVsZW1lbnRzXCIsXHJcbiAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdDogUHJvcGVydHlCYWcgPSB7fVxyXG5cclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlW3Byb3BlcnR5Lm5hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBzb3VyY2VbcHJvcGVydHkubmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2l0ZW1dID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudElkID0gaXRlbVtcImVsZW1lbnRJZFwiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudElkID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbZWxlbWVudElkXSA9IFV0aWxzLnBhcnNlQm9vbChpdGVtW1wiaXNWaXNpYmxlXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldEVsZW1lbnRzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaWQgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlW2lkXSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50SWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlOiB2YWx1ZVtpZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50cy5wdXNoKGlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVBcnJheSh0YXJnZXQsIHByb3BlcnR5Lm5hbWUsIHRhcmdldEVsZW1lbnRzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHt9LFxyXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4geyByZXR1cm4ge307IH0pO1xyXG5cclxuICAgIEBwcm9wZXJ0eShUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLnRhcmdldEVsZW1lbnRzUHJvcGVydHkpXHJcbiAgICB0YXJnZXRFbGVtZW50czogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgc3RhdGljIHJlYWRvbmx5IEpzb25UeXBlTmFtZTogXCJBY3Rpb24uVG9nZ2xlVmlzaWJpbGl0eVwiID0gXCJBY3Rpb24uVG9nZ2xlVmlzaWJpbGl0eVwiO1xyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLkpzb25UeXBlTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50SWQgb2YgT2JqZWN0LmtleXModGhpcy50YXJnZXRFbGVtZW50cykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF0gPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuaXNWaXNpYmxlID0gdGhpcy50YXJnZXRFbGVtZW50c1tlbGVtZW50SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5pc1Zpc2libGUgPSAhdGFyZ2V0RWxlbWVudC5pc1Zpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFRhcmdldEVsZW1lbnQoZWxlbWVudElkOiBzdHJpbmcsIGlzVmlzaWJsZTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudHNbZWxlbWVudElkXSA9IGlzVmlzaWJsZTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUYXJnZXRFbGVtZW50KGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGFyZ2V0RWxlbWVudHNbZWxlbWVudElkXTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU3RyaW5nV2l0aFN1YnN0aXR1dGlvblByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uICB7XHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMoKTtcclxuICAgICAgICByZXN1bHQuc2V0KFV0aWxzLnBhcnNlU3RyaW5nKHNvdXJjZVt0aGlzLm5hbWVdKSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUodGFyZ2V0LCB0aGlzLm5hbWUsIHZhbHVlLmdldE9yaWdpbmFsKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgdW5kZWZpbmVkLCAoKSA9PiB7IHJldHVybiBuZXcgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMoKTsgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwSGVhZGVyIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbmFtZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibmFtZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJIdHRwSGVhZGVyXCI7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KEh0dHBIZWFkZXIubmFtZVByb3BlcnR5KVxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShIdHRwSGVhZGVyLnZhbHVlUHJvcGVydHkpXHJcbiAgICBwcml2YXRlIF92YWx1ZTogU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnM7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nID0gXCJcIiwgdmFsdWU6IHN0cmluZyA9IFwiXCIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWZlcmVuY2VkSW5wdXRzKGlucHV0czogSW5wdXRbXSwgcmVmZXJlbmNlZElucHV0czogRGljdGlvbmFyeTxJbnB1dD4pIHtcclxuICAgICAgICB0aGlzLl92YWx1ZS5nZXRSZWZlcmVuY2VkSW5wdXRzKGlucHV0cywgcmVmZXJlbmNlZElucHV0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZUZvckV4ZWN1dGlvbihpbnB1dHM6IERpY3Rpb25hcnk8SW5wdXQ+KSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUuc3Vic3RpdHV0ZUlucHV0VmFsdWVzKGlucHV0cywgQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWUuZ2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHZhbHVlKG5ld1ZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZS5zZXQobmV3VmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSHR0cEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBib2R5UHJvcGVydHkgPSBuZXcgU3RyaW5nV2l0aFN1YnN0aXR1dGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiYm9keVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtZXRob2RQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1ldGhvZFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBoZWFkZXJzUHJvcGVydHkgPSBuZXcgU2VyaWFsaXphYmxlT2JqZWN0Q29sbGVjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiaGVhZGVyc1wiLCBIdHRwSGVhZGVyKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xyXG5cclxuICAgICAgICBzY2hlbWEuYWRkKEFjdGlvbi5pZ25vcmVJbnB1dFZhbGlkYXRpb25Qcm9wZXJ0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KEh0dHBBY3Rpb24udXJsUHJvcGVydHkpXHJcbiAgICBwcml2YXRlIF91cmw6IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zO1xyXG5cclxuICAgIEBwcm9wZXJ0eShIdHRwQWN0aW9uLmJvZHlQcm9wZXJ0eSlcclxuICAgIHByaXZhdGUgX2JvZHk6IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zO1xyXG5cclxuICAgIEBwcm9wZXJ0eShIdHRwQWN0aW9uLm1ldGhvZFByb3BlcnR5KVxyXG4gICAgbWV0aG9kPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShIdHRwQWN0aW9uLmhlYWRlcnNQcm9wZXJ0eSlcclxuICAgIGhlYWRlcnM6IEh0dHBIZWFkZXJbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoQWN0aW9uLmlnbm9yZUlucHV0VmFsaWRhdGlvblByb3BlcnR5KVxyXG4gICAgcHJpdmF0ZSBfaWdub3JlSW5wdXRWYWxpZGF0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8gTm90ZSB0aGUgXCJ3ZWlyZFwiIHdheSB0aGlzIGZpZWxkIGlzIGRlY2xhcmVkIGlzIHRvIHdvcmsgYXJvdW5kIGEgYnJlYWtpbmdcclxuICAgIC8vIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgSnNvblR5cGVOYW1lOiBcIkFjdGlvbi5IdHRwXCIgPSBcIkFjdGlvbi5IdHRwXCI7XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsR2V0UmVmZXJlbmNlZElucHV0cyhhbGxJbnB1dHM6IElucHV0W10pOiBEaWN0aW9uYXJ5PElucHV0PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogRGljdGlvbmFyeTxJbnB1dD4gPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXJsLmdldFJlZmVyZW5jZWRJbnB1dHMoYWxsSW5wdXRzLCByZXN1bHQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBoZWFkZXIgb2YgdGhpcy5oZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIGhlYWRlci5nZXRSZWZlcmVuY2VkSW5wdXRzKGFsbElucHV0cywgcmVzdWx0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2JvZHkuZ2V0UmVmZXJlbmNlZElucHV0cyhhbGxJbnB1dHMsIHJlc3VsdCk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUHJlcGFyZUZvckV4ZWN1dGlvbihpbnB1dHM6IERpY3Rpb25hcnk8SW5wdXQ+IHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKGlucHV0cykge1xyXG4gICAgICAgICAgICB0aGlzLl91cmwuc3Vic3RpdHV0ZUlucHV0VmFsdWVzKGlucHV0cywgQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb250ZW50VHlwZSA9IENvbnRlbnRUeXBlcy5hcHBsaWNhdGlvbkpzb247XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBoZWFkZXIgb2YgdGhpcy5oZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIucHJlcGFyZUZvckV4ZWN1dGlvbihpbnB1dHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIubmFtZSAmJiBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpID09IFwiY29udGVudC10eXBlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IDxzdHJpbmc+aGVhZGVyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9ib2R5LnN1YnN0aXR1dGVJbnB1dFZhbHVlcyhpbnB1dHMsIGNvbnRlbnRUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBIdHRwQWN0aW9uLkpzb25UeXBlTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMudXJsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcclxuICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgXCJBbiBBY3Rpb24uSHR0cCBtdXN0IGhhdmUgaXRzIHVybCBwcm9wZXJ0eSBzZXQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGhlYWRlciBvZiB0aGlzLmhlYWRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaGVhZGVyLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWxsIGhlYWRlcnMgb2YgYW4gQWN0aW9uLkh0dHAgbXVzdCBoYXZlIHRoZWlyIG5hbWUgYW5kIHZhbHVlIHByb3BlcnRpZXMgc2V0LlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWdub3JlSW5wdXRWYWxpZGF0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlnbm9yZUlucHV0VmFsaWRhdGlvbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2lnbm9yZUlucHV0VmFsaWRhdGlvbiA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1cmwoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXJsLmdldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB1cmwodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuX3VybC5zZXQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBib2R5KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvZHkuZ2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGJvZHkodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuX2JvZHkuc2V0KHZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNob3dDYXJkQWN0aW9uIGV4dGVuZHMgQWN0aW9uIHtcclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgc3RhdGljIHJlYWRvbmx5IEpzb25UeXBlTmFtZTogXCJBY3Rpb24uU2hvd0NhcmRcIiA9IFwiQWN0aW9uLlNob3dDYXJkXCI7XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxQYXJzZShzb3VyY2UsIGNvbnRleHQpO1xyXG5cclxuICAgICAgICBsZXQganNvbkNhcmQgPSBzb3VyY2VbXCJjYXJkXCJdO1xyXG5cclxuICAgICAgICBpZiAoanNvbkNhcmQpIHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkLnBhcnNlKGpzb25DYXJkLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXHJcbiAgICAgICAgICAgICAgICBcIkFuIEFjdGlvbi5TaG93Q2FyZCBtdXN0IGhhdmUgaXRzIFxcXCJjYXJkXFxcIiBwcm9wZXJ0eSBzZXQgdG8gYSB2YWxpZCBBZGFwdGl2ZUNhcmQgb2JqZWN0LlwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmQpIHtcclxuICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIFwiY2FyZFwiLCB0aGlzLmNhcmQudG9KU09OKGNvbnRleHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFkZENzc0NsYXNzZXMoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5hZGRDc3NDbGFzc2VzKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMucGFyZW50Lmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGFibGVcIikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBjYXJkOiBBZGFwdGl2ZUNhcmQgPSBuZXcgSW5saW5lQWRhcHRpdmVDYXJkKCk7XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFNob3dDYXJkQWN0aW9uLkpzb25UeXBlTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmQuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWN0aW9uQnV0dG9uQ3NzU3R5bGUoYWN0aW9uQnV0dG9uRWxlbWVudDogSFRNTEVsZW1lbnQsIGJ1dHRvblN0YXRlOiBBY3Rpb25CdXR0b25TdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLk5vcm1hbCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUFjdGlvbkJ1dHRvbkNzc1N0eWxlKGFjdGlvbkJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMucGFyZW50Lmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGFibGVcIikpO1xyXG4gICAgICAgICAgICBhY3Rpb25CdXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgKGJ1dHRvblN0YXRlID09PSBBY3Rpb25CdXR0b25TdGF0ZS5FeHBhbmRlZCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFBhcmVudCh2YWx1ZTogQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5zZXRQYXJlbnQodmFsdWUpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmQuc2V0UGFyZW50KHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxJbnB1dHMoKTogSW5wdXRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FyZC5nZXRBbGxJbnB1dHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkuY29uY2F0KHRoaXMuY2FyZC5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN1cGVyLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG5cclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmNhcmQuZ2V0QWN0aW9uQnlJZChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBY3Rpb25Db2xsZWN0aW9uIHtcclxuICAgIHByaXZhdGUgX293bmVyOiBDYXJkRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2FjdGlvbkNhcmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfZXhwYW5kZWRBY3Rpb24/OiBTaG93Q2FyZEFjdGlvbjtcclxuICAgIHByaXZhdGUgX3JlbmRlcmVkQWN0aW9uQ291bnQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9hY3Rpb25DYXJkPzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBpc0FjdGlvbkFsbG93ZWQoYWN0aW9uOiBBY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgZm9yYmlkZGVuVHlwZXMgPSB0aGlzLl9vd25lci5nZXRGb3JiaWRkZW5BY3Rpb25UeXBlcygpO1xyXG5cclxuICAgICAgICBpZiAoZm9yYmlkZGVuVHlwZXMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgZm9yYmlkZGVuVHlwZSBvZiBmb3JiaWRkZW5UeXBlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5jb25zdHJ1Y3RvciA9PT0gZm9yYmlkZGVuVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWZyZXNoQ29udGFpbmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9hY3Rpb25DYXJkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA+IDAgPyB0aGlzLl9vd25lci5ob3N0Q29uZmlnLmFjdGlvbnMuc2hvd0NhcmQuaW5saW5lVG9wTWFyZ2luICsgXCJweFwiIDogXCIwcHhcIjtcclxuXHJcbiAgICAgICAgbGV0IHBhZGRpbmcgPSB0aGlzLl9vd25lci5nZXRFZmZlY3RpdmVQYWRkaW5nKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX293bmVyLmdldEltbWVkaWF0ZVN1cnJvdW5kaW5nUGFkZGluZyhwYWRkaW5nKTtcclxuXHJcbiAgICAgICAgbGV0IHBoeXNpY2FsUGFkZGluZyA9IHRoaXMuX293bmVyLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHBhZGRpbmcpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25DYXJkLnN0eWxlLnBhZGRpbmdMZWZ0ID0gcGh5c2ljYWxQYWRkaW5nLmxlZnQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBoeXNpY2FsUGFkZGluZy5ib3R0b20gIT0gMCAmJiAhdGhpcy5fb3duZXIuaXNEZXNpZ25Nb2RlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IHBoeXNpY2FsUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hY3Rpb25DYXJkLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiLVwiICsgcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGhpcy5fYWN0aW9uQ2FyZENvbnRhaW5lciwgdGhpcy5fYWN0aW9uQ2FyZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGF5b3V0Q2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLl9vd25lci5nZXRSb290RWxlbWVudCgpLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZUFjdGlvbkNhcmQoKSB7XHJcbiAgICAgICAgbGV0IHByZXZpb3VzbHlFeHBhbmRlZEFjdGlvbiA9IHRoaXMuX2V4cGFuZGVkQWN0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDb250YWluZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKHByZXZpb3VzbHlFeHBhbmRlZEFjdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmxheW91dENoYW5nZWQoKTtcclxuXHJcbiAgICAgICAgICAgIHJhaXNlSW5saW5lQ2FyZEV4cGFuZGVkRXZlbnQocHJldmlvdXNseUV4cGFuZGVkQWN0aW9uLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0FjdGlvbkNhcmQoYWN0aW9uOiBTaG93Q2FyZEFjdGlvbiwgc3VwcHJlc3NTdHlsZTogYm9vbGVhbiA9IGZhbHNlLCByYWlzZUV2ZW50OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgICg8SW5saW5lQWRhcHRpdmVDYXJkPmFjdGlvbi5jYXJkKS5zdXBwcmVzc1N0eWxlID0gc3VwcHJlc3NTdHlsZTtcclxuXHJcbiAgICAgICAgLy8gQWx3YXlzIHJlLXJlbmRlciBhIFNob3dDYXJkIGFjdGlvbiBpbiBkZXNpZ24gbW9kZTsgcmV1c2UgYWxyZWFkeSByZW5kZXJlZCBTaG93Q2FyZCAoaWYgYXZhaWxhYmxlKSBvdGhlcndpc2VcclxuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkID0gYWN0aW9uLmNhcmQucmVuZGVyZWRFbGVtZW50ICYmICF0aGlzLl9vd25lci5pc0Rlc2lnbk1vZGUoKSA/IGFjdGlvbi5jYXJkLnJlbmRlcmVkRWxlbWVudCA6IGFjdGlvbi5jYXJkLnJlbmRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkID0gcmVuZGVyZWRDYXJkO1xyXG4gICAgICAgIHRoaXMuX2V4cGFuZGVkQWN0aW9uID0gYWN0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDb250YWluZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKHJhaXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXlvdXRDaGFuZ2VkKCk7XHJcblxyXG4gICAgICAgICAgICByYWlzZUlubGluZUNhcmRFeHBhbmRlZEV2ZW50KGFjdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sbGFwc2VFeHBhbmRlZEFjdGlvbigpIHtcclxuICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLk5vcm1hbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZUFjdGlvbkNhcmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV4cGFuZFNob3dDYXJkQWN0aW9uKGFjdGlvbjogU2hvd0NhcmRBY3Rpb24sIHJhaXNlRXZlbnQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XHJcbiAgICAgICAgICAgIGlmIChidXR0b24uYWN0aW9uICE9PSBhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLlN1YmR1ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uc3RhdGUgPSBBY3Rpb25CdXR0b25TdGF0ZS5FeHBhbmRlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93QWN0aW9uQ2FyZChcclxuICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICAhKHRoaXMuX293bmVyLmlzQXRUaGVWZXJ5TGVmdCgpICYmIHRoaXMuX293bmVyLmlzQXRUaGVWZXJ5UmlnaHQoKSksXHJcbiAgICAgICAgICAgIHJhaXNlRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWN0aW9uQ2xpY2tlZChhY3Rpb25CdXR0b246IEFjdGlvbkJ1dHRvbikge1xyXG4gICAgICAgIGlmICghKGFjdGlvbkJ1dHRvbi5hY3Rpb24gaW5zdGFuY2VvZiBTaG93Q2FyZEFjdGlvbikpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgYnV0dG9uIG9mIHRoaXMuYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhpZGVBY3Rpb25DYXJkKCk7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25CdXR0b24uYWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lci5ob3N0Q29uZmlnLmFjdGlvbnMuc2hvd0NhcmQuYWN0aW9uTW9kZSA9PT0gRW51bXMuU2hvd0NhcmRBY3Rpb25Nb2RlLlBvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChhY3Rpb25CdXR0b24uYWN0aW9uID09PSB0aGlzLl9leHBhbmRlZEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUV4cGFuZGVkQWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZFNob3dDYXJkQWN0aW9uKGFjdGlvbkJ1dHRvbi5hY3Rpb24sIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UGFyZW50Q29udGFpbmVyKCk6IENvbnRhaW5lciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX293bmVyIGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kQWN0aW9uQnV0dG9uKGFjdGlvbjogQWN0aW9uKTogQWN0aW9uQnV0dG9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBmb3IgKGxldCBhY3Rpb25CdXR0b24gb2YgdGhpcy5idXR0b25zKSB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb25CdXR0b24uYWN0aW9uID09IGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbkJ1dHRvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBpdGVtczogQWN0aW9uW10gPSBbXTtcclxuICAgIGJ1dHRvbnM6IEFjdGlvbkJ1dHRvbltdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3duZXI6IENhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQganNvbkFjdGlvbiBvZiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPSBjb250ZXh0LnBhcnNlQWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzb25BY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuX293bmVyLmlzRGVzaWduTW9kZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBY3Rpb24oYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgcHJvcGVydHlOYW1lOiBzdHJpbmcsIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KTogYW55IHtcclxuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZUFycmF5KHRhcmdldCwgcHJvcGVydHlOYW1lLCB0aGlzLml0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IEFjdGlvbiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW0uZ2V0QWN0aW9uQnlJZChpZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dDogVmFsaWRhdGlvblJlc3VsdHMpIHtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXIuaG9zdENvbmZpZy5hY3Rpb25zLm1heEFjdGlvbnMgJiYgdGhpcy5pdGVtcy5sZW5ndGggPiB0aGlzLl9vd25lci5ob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucykge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lcixcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Ub29NYW55QWN0aW9ucyxcclxuICAgICAgICAgICAgICAgIFwiQSBtYXhpbXVtIG9mIFwiICsgdGhpcy5fb3duZXIuaG9zdENvbmZpZy5hY3Rpb25zLm1heEFjdGlvbnMgKyBcIiBhY3Rpb25zIGFyZSBhbGxvd2VkLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDAgJiYgIXRoaXMuX293bmVyLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludGVyYWN0aXZpdHlOb3RBbGxvd2VkLFxyXG4gICAgICAgICAgICAgICAgXCJJbnRlcmFjdGl2aXR5IGlzIG5vdCBhbGxvd2VkLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3Rpb25BbGxvd2VkKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkFjdGlvblR5cGVOb3RBbGxvd2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQWN0aW9ucyBvZiB0eXBlIFwiICsgaXRlbS5nZXRKc29uVHlwZU5hbWUoKSArIFwiIGFyZSBub3QgYWxsb3dlZCBpbiB0aGlzIGNvbnRleHQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpdGVtLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIob3JpZW50YXRpb246IEVudW1zLk9yaWVudGF0aW9uLCBpc0Rlc2lnbk1vZGU6IGJvb2xlYW4pOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyBmb3IgYmV0dGVyIHBlcmZcclxuICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuX293bmVyLmhvc3RDb25maWc7XHJcblxyXG4gICAgICAgIGlmICghaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBsZXQgbWF4QWN0aW9ucyA9IGhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zID8gTWF0aC5taW4oaG9zdENvbmZpZy5hY3Rpb25zLm1heEFjdGlvbnMsIHRoaXMuaXRlbXMubGVuZ3RoKSA6IHRoaXMuaXRlbXMubGVuZ3RoO1xyXG5cclxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEFjdGlvbkNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKGhvc3RDb25maWcuYWN0aW9ucy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbiAmJiBtYXhBY3Rpb25zID09IDEgJiYgdGhpcy5pdGVtc1swXSBpbnN0YW5jZW9mIFNob3dDYXJkQWN0aW9uICYmIHRoaXMuaXNBY3Rpb25BbGxvd2VkKHRoaXMuaXRlbXNbMF0pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0FjdGlvbkNhcmQoPFNob3dDYXJkQWN0aW9uPnRoaXMuaXRlbXNbMF0sIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEFjdGlvbkNvdW50ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBidXR0b25TdHJpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwLmNsYXNzTmFtZSA9IGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWFjdGlvblNldFwiKTtcclxuICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBidXR0b25TdHJpcC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiZ3JvdXBcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAob3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwicm93XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyLmhvcml6b250YWxBbGlnbm1lbnQgJiYgaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbkFsaWdubWVudCAhPSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fb3duZXIuaG9yaXpvbnRhbEFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQWN0aW9uQWxpZ25tZW50LkNlbnRlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5SaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyLmhvcml6b250YWxBbGlnbm1lbnQgJiYgaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbkFsaWdubWVudCAhPSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fb3duZXIuaG9yaXpvbnRhbEFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiZmxleC1lbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQWN0aW9uQWxpZ25tZW50LkNlbnRlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQWN0aW9uQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiZmxleC1lbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5TdHJldGNoOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwic3RyZXRjaFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRDb250YWluZXIgPSB0aGlzLmdldFBhcmVudENvbnRhaW5lcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcmVudENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudENvbnRhaW5lclN0eWxlID0gcGFyZW50Q29udGFpbmVyLmdldEVmZmVjdGl2ZVN0eWxlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZEFjdGlvbnMgPSB0aGlzLml0ZW1zLmZpbHRlcih0aGlzLmlzQWN0aW9uQWxsb3dlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbG93ZWRBY3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbkJ1dHRvbiA9IHRoaXMuZmluZEFjdGlvbkJ1dHRvbihhbGxvd2VkQWN0aW9uc1tpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYWN0aW9uQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbiA9IG5ldyBBY3Rpb25CdXR0b24oYWxsb3dlZEFjdGlvbnNbaV0sIHBhcmVudENvbnRhaW5lclN0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLm9uQ2xpY2sgPSAoYWIpID0+IHsgdGhpcy5hY3Rpb25DbGlja2VkKGFiKTsgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9ucy5wdXNoKGFjdGlvbkJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24ucmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25CdXR0b24uYWN0aW9uLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXBvc2luc2V0XCIsIChpICsgMSkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtc2V0c2l6ZVwiLCBhbGxvd2VkQWN0aW9ucy5sZW5ndGgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJsaXN0aXRlbVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uc09yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwgJiYgaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbkFsaWdubWVudCA9PSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAxIDEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMSBhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLmFwcGVuZENoaWxkKGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkQWN0aW9uQ291bnQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEFjdGlvbkNvdW50ID49IGhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zIHx8IGkgPT0gdGhpcy5pdGVtcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuYnV0dG9uU3BhY2luZyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5zdHlsZS53aWR0aCA9IGhvc3RDb25maWcuYWN0aW9ucy5idXR0b25TcGFjaW5nICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VyLnN0eWxlLmhlaWdodCA9IGhvc3RDb25maWcuYWN0aW9ucy5idXR0b25TcGFjaW5nICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGJ1dHRvblN0cmlwLCBzcGFjZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgYnV0dG9uU3RyaXBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBidXR0b25TdHJpcENvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvblN0cmlwKTtcclxuXHJcbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIGJ1dHRvblN0cmlwQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XHJcbiAgICAgICAgICAgIGlmIChidXR0b24uc3RhdGUgPT0gQWN0aW9uQnV0dG9uU3RhdGUuRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kU2hvd0NhcmRBY3Rpb24oPFNob3dDYXJkQWN0aW9uPmJ1dHRvbi5hY3Rpb24sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkQWN0aW9uQ291bnQgPiAwID8gZWxlbWVudCA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRBY3Rpb24oYWN0aW9uOiBBY3Rpb24pIHtcclxuICAgICAgICBpZiAoIWFjdGlvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYWN0aW9uIHBhcmFtZXRlciBjYW5ub3QgYmUgbnVsbC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKCFhY3Rpb24ucGFyZW50IHx8IGFjdGlvbi5wYXJlbnQgPT09IHRoaXMuX293bmVyKSAmJiB0aGlzLml0ZW1zLmluZGV4T2YoYWN0aW9uKSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWFjdGlvbi5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi5zZXRQYXJlbnQodGhpcy5fb3duZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25bXCJfYWN0aW9uQ29sbGVjdGlvblwiXSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYWN0aW9uIGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIGVsZW1lbnQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBY3Rpb24oYWN0aW9uOiBBY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5leHBhbmRlZEFjdGlvbiAmJiB0aGlzLl9leHBhbmRlZEFjdGlvbiA9PSBhY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUV4cGFuZGVkQWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSB0aGlzLml0ZW1zLmluZGV4T2YoYWN0aW9uKTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGlvbkluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoYWN0aW9uSW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uLnNldFBhcmVudCh1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uW1wiX2FjdGlvbkNvbGxlY3Rpb25cIl0gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uc1tpXS5hY3Rpb24gPT0gYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zLnNwbGljZShpLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwYW5kZWRBY3Rpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsSW5wdXRzKCk6IElucHV0W10ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IElucHV0W10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYWN0aW9uIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChhY3Rpb24uZ2V0QWxsSW5wdXRzKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IElSZXNvdXJjZUluZm9ybWF0aW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYWN0aW9uIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChhY3Rpb24uZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlbmRlcmVkQWN0aW9uQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXhwYW5kZWRBY3Rpb24oKTogU2hvd0NhcmRBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRlZEFjdGlvbjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFjdGlvblNldCBleHRlbmRzIENhcmRFbGVtZW50IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgb3JpZW50YXRpb25Qcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJvcmllbnRhdGlvblwiLCBFbnVtcy5PcmllbnRhdGlvbik7XHJcblxyXG4gICAgQHByb3BlcnR5KEFjdGlvblNldC5vcmllbnRhdGlvblByb3BlcnR5KVxyXG4gICAgb3JpZW50YXRpb24/OiBFbnVtcy5PcmllbnRhdGlvbjtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIF9hY3Rpb25Db2xsZWN0aW9uOiBBY3Rpb25Db2xsZWN0aW9uO1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5wYXJzZShzb3VyY2VbXCJhY3Rpb25zXCJdLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFRvSlNPTih0YXJnZXQsIGNvbnRleHQpO1xyXG5cclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnRvSlNPTih0YXJnZXQsIFwiYWN0aW9uc1wiLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcih0aGlzLm9yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyB0aGlzLm9yaWVudGF0aW9uIDogdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uc09yaWVudGF0aW9uLCB0aGlzLmlzRGVzaWduTW9kZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uID0gbmV3IEFjdGlvbkNvbGxlY3Rpb24odGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCbGVlZGluZ0F0Qm90dG9tKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcmVkQWN0aW9uQ291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuaXNCbGVlZGluZ0F0Qm90dG9tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5pdGVtcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkFjdGlvblNldFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkF0KGluZGV4OiBudW1iZXIpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5nZXRBY3Rpb25Db3VudCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRBY3Rpb25BdChpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24udmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEFjdGlvbihhY3Rpb246IEFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uYWRkQWN0aW9uKGFjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsSW5wdXRzKCk6IElucHV0W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmdldEFsbElucHV0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0ludGVyYWN0aXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lciBleHRlbmRzIENhcmRFbGVtZW50Q29udGFpbmVyIHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBWYWx1ZVNldFByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgeyB2YWx1ZTogRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdCB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpcyB9LFxyXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzIsIHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnQgfSxcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCB2YWx1ZTogRW51bXMuQ29udGFpbmVyU3R5bGUuR29vZCB9LFxyXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzIsIHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb24gfSxcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCB2YWx1ZTogRW51bXMuQ29udGFpbmVyU3R5bGUuV2FybmluZyB9XHJcbiAgICAgICAgXSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYmxlZWRQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJibGVlZFwiLCBmYWxzZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWluSGVpZ2h0UHJvcGVydHkgPSBuZXcgUGl4ZWxTaXplUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJtaW5IZWlnaHRcIik7XHJcblxyXG4gICAgQHByb3BlcnR5KFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIuc3R5bGVQcm9wZXJ0eSlcclxuICAgIGdldCBzdHlsZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmFsbG93Q3VzdG9tU3R5bGUpIHtcclxuICAgICAgICAgICAgbGV0IHN0eWxlID0gdGhpcy5nZXRWYWx1ZShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnN0eWxlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN0eWxlICYmIHRoaXMuaG9zdENvbmZpZy5jb250YWluZXJTdHlsZXMuZ2V0U3R5bGVCeU5hbWUoc3R5bGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHN0eWxlKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIuc3R5bGVQcm9wZXJ0eSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLmJsZWVkUHJvcGVydHkpXHJcbiAgICBwcml2YXRlIF9ibGVlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIEBwcm9wZXJ0eShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLm1pbkhlaWdodFByb3BlcnR5KVxyXG4gICAgbWluUGl4ZWxIZWlnaHQ/OiBudW1iZXI7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUocmVuZGVyZWRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUocmVuZGVyZWRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWluUGl4ZWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IHRoaXMubWluUGl4ZWxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhcHBseUJhY2tncm91bmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBzdHlsZURlZmluaXRpb24gPSB0aGlzLmhvc3RDb25maWcuY29udGFpbmVyU3R5bGVzLmdldFN0eWxlQnlOYW1lKHRoaXMuc3R5bGUsIHRoaXMuaG9zdENvbmZpZy5jb250YWluZXJTdHlsZXMuZ2V0U3R5bGVCeU5hbWUodGhpcy5kZWZhdWx0U3R5bGUpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHlsZURlZmluaXRpb24uYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSA8c3RyaW5nPlV0aWxzLnN0cmluZ1RvQ3NzQ29sb3Ioc3R5bGVEZWZpbml0aW9uLmJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFwcGx5UGFkZGluZygpIHtcclxuICAgICAgICBzdXBlci5hcHBseVBhZGRpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcGh5c2ljYWxQYWRkaW5nID0gbmV3IFNwYWNpbmdEZWZpbml0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xyXG4gICAgICAgICAgICBwaHlzaWNhbFBhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlUGFkZGluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AgPSBwaHlzaWNhbFBhZGRpbmcudG9wICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0JsZWVkaW5nKCkpIHtcclxuICAgICAgICAgICAgLy8gQmxlZWQgaW50byB0aGUgZmlyc3QgcGFyZW50IHRoYXQgZG9lcyBoYXZlIHBhZGRpbmdcclxuICAgICAgICAgICAgbGV0IHBhZGRpbmcgPSBuZXcgUGFkZGluZ0RlZmluaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKHBhZGRpbmcpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHN1cnJvdW5kaW5nUGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcubGVmdCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rlc2lnbk1vZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcudG9wICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcuYm90dG9tICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXBhcmF0b3JFbGVtZW50ICYmIHRoaXMuc2VwYXJhdG9yT3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIi1cIiArIHN1cnJvdW5kaW5nUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcucmlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjBcIjtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gXCIwXCI7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRIYXNCYWNrZ3JvdW5kKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50RWxlbWVudDogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQgPSB0aGlzLnBhcmVudDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50RWxlbWVudEhhc0JhY2tncm91bmRJbWFnZSA9IGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgQ29udGFpbmVyID8gY3VycmVudEVsZW1lbnQuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzRXhwbGljaXRTdHlsZSAmJiAoY3VycmVudEVsZW1lbnQuZ2V0RWZmZWN0aXZlU3R5bGUoKSAhPSB0aGlzLmdldEVmZmVjdGl2ZVN0eWxlKCkgfHwgY3VycmVudEVsZW1lbnRIYXNCYWNrZ3JvdW5kSW1hZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXREZWZhdWx0UGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGFzQmFja2dyb3VuZCgpID9cclxuICAgICAgICAgICAgbmV3IFBhZGRpbmdEZWZpbml0aW9uKFxyXG4gICAgICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nKSA6IHN1cGVyLmdldERlZmF1bHRQYWRkaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEhhc0V4cGFuZGVkQWN0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0QmxlZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JsZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRCbGVlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2JsZWVkID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCByZW5kZXJlZEFjdGlvbkNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBoYXNFeHBsaWNpdFN0eWxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIuc3R5bGVQcm9wZXJ0eSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGFsbG93Q3VzdG9tU3R5bGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCbGVlZGluZygpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiAodGhpcy5nZXRIYXNCYWNrZ3JvdW5kKCkgfHwgdGhpcy5ob3N0Q29uZmlnLmFsd2F5c0FsbG93QmxlZWQpICYmIHRoaXMuZ2V0QmxlZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG5cclxuICAgICAgICBsZXQgZXhwbGljaXRTdHlsZSA9IHRoaXMuZ2V0VmFsdWUoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgaWYgKGV4cGxpY2l0U3R5bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgc3R5bGVEZWZpbml0aW9uID0gdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZShleHBsaWNpdFN0eWxlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc3R5bGVEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJVbmtub3duIGNvbnRhaW5lciBzdHlsZTogXCIgKyBleHBsaWNpdFN0eWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZW5kZXJlZEVsZW1lbnQgPSBzdXBlci5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKHJlbmRlcmVkRWxlbWVudCAmJiB0aGlzLmdldEhhc0JhY2tncm91bmQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5QmFja2dyb3VuZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFZmZlY3RpdmVTdHlsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBlZmZlY3RpdmVTdHlsZSA9IHRoaXMuc3R5bGU7XHJcblxyXG4gICAgICAgIHJldHVybiBlZmZlY3RpdmVTdHlsZSA/IGVmZmVjdGl2ZVN0eWxlIDogc3VwZXIuZ2V0RWZmZWN0aXZlU3R5bGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhY2tncm91bmRJbWFnZSBleHRlbmRzIFNlcmlhbGl6YWJsZU9iamVjdCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidXJsXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGZpbGxNb2RlUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiZmlsbE1vZGVcIiwgRW51bXMuRmlsbE1vZGUsIEVudW1zLkZpbGxNb2RlLkNvdmVyKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBob3Jpem9udGFsQWxpZ25tZW50UHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiaG9yaXpvbnRhbEFsaWdubWVudFwiLCBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LCBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LkxlZnQpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZlcnRpY2FsQWxpZ25tZW50UHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwidmVydGljYWxBbGlnbm1lbnRcIiwgRW51bXMuVmVydGljYWxBbGlnbm1lbnQsIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LlRvcCk7XHJcblxyXG4gICAgQHByb3BlcnR5KEJhY2tncm91bmRJbWFnZS51cmxQcm9wZXJ0eSlcclxuICAgIHVybD86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoQmFja2dyb3VuZEltYWdlLmZpbGxNb2RlUHJvcGVydHkpXHJcbiAgICBmaWxsTW9kZTogRW51bXMuRmlsbE1vZGU7XHJcblxyXG4gICAgQHByb3BlcnR5KEJhY2tncm91bmRJbWFnZS5ob3Jpem9udGFsQWxpZ25tZW50UHJvcGVydHkpXHJcbiAgICBob3Jpem9udGFsQWxpZ25tZW50OiBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50O1xyXG5cclxuICAgIEBwcm9wZXJ0eShCYWNrZ3JvdW5kSW1hZ2UudmVydGljYWxBbGlnbm1lbnRQcm9wZXJ0eSlcclxuICAgIHZlcnRpY2FsQWxpZ25tZW50OiBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudDtcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQmFja2dyb3VuZEltYWdlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXREZWZhdWx0VmFsdWVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXJsID0gc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHkoZWxlbWVudDogQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy51cmwgJiYgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgZWxlbWVudC5wcmVQcm9jZXNzUHJvcGVydHlWYWx1ZShCYWNrZ3JvdW5kSW1hZ2UudXJsUHJvcGVydHksIHRoaXMudXJsKSArIFwiJylcIjtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5maWxsTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5GaWxsTW9kZS5SZXBlYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IFwicmVwZWF0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkZpbGxNb2RlLlJlcGVhdEhvcml6b250YWxseTpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJyZXBlYXQteFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5GaWxsTW9kZS5SZXBlYXRWZXJ0aWNhbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSBcInJlcGVhdC15XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkZpbGxNb2RlLkNvdmVyOlxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IFwiY292ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWCA9IFwicmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnZlcnRpY2FsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LkNlbnRlcjpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25ZID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuQm90dG9tOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvblkgPSBcImJvdHRvbVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lciB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IGJhY2tncm91bmRJbWFnZVByb3BlcnR5ID0gbmV3IFNlcmlhbGl6YWJsZU9iamVjdFByb3BlcnR5KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJiYWNrZ3JvdW5kSW1hZ2VcIixcclxuICAgICAgICBCYWNrZ3JvdW5kSW1hZ2UpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHZlcnRpY2FsQ29udGVudEFsaWdubWVudFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcInZlcnRpY2FsQ29udGVudEFsaWdubWVudFwiLCBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudCwgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuVG9wKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBydGxQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJydGxcIik7XHJcblxyXG4gICAgQHByb3BlcnR5KENvbnRhaW5lci5iYWNrZ3JvdW5kSW1hZ2VQcm9wZXJ0eSlcclxuICAgIGdldCBiYWNrZ3JvdW5kSW1hZ2UoKTogQmFja2dyb3VuZEltYWdlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShDb250YWluZXIuYmFja2dyb3VuZEltYWdlUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eShDb250YWluZXIudmVydGljYWxDb250ZW50QWxpZ25tZW50UHJvcGVydHkpXHJcbiAgICB2ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQ6IEVudW1zLlZlcnRpY2FsQWxpZ25tZW50ID0gRW51bXMuVmVydGljYWxBbGlnbm1lbnQuVG9wO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDb250YWluZXIucnRsUHJvcGVydHkpXHJcbiAgICBydGw/OiBib29sZWFuO1xyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgX2l0ZW1zOiBDYXJkRWxlbWVudFtdID0gW107XHJcbiAgICBwcml2YXRlIF9yZW5kZXJlZEl0ZW1zOiBDYXJkRWxlbWVudFtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBpbnNlcnRJdGVtQXQoXHJcbiAgICAgICAgaXRlbTogQ2FyZEVsZW1lbnQsXHJcbiAgICAgICAgaW5kZXg6IG51bWJlcixcclxuICAgICAgICBmb3JjZUluc2VydDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghaXRlbS5wYXJlbnQgfHwgZm9yY2VJbnNlcnQpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNTdGFuZGFsb25lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuX2l0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRWxlbWVudHMgb2YgdHlwZSBcIiArIGl0ZW0uZ2V0SnNvblR5cGVOYW1lKCkgKyBcIiBjYW5ub3QgYmUgdXNlZCBhcyBzdGFuZGFsb25lIGVsZW1lbnRzLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGVsZW1lbnQgYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgY29udGFpbmVyLlwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3VwcG9ydHNFeGNwbGl0aUhlaWdodCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SXRlbXNDb2xsZWN0aW9uUHJvcGVydHlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiaXRlbXNcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYXBwbHlCYWNrZ3JvdW5kKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRJbWFnZS5pc1ZhbGlkKCkgJiYgdGhpcy5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuYXBwbHkodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdXBlci5hcHBseUJhY2tncm91bmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyB0byBhdm9pZCB3YWxraW5nIHRoZSBwYXJlbnQgaGllcmFyY2h5IHNldmVyYWwgdGltZXNcclxuICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ydGwgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ0bCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmRpciA9IFwicnRsXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtY29udGFpbmVyXCIpKTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG5cclxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbikge1xyXG4gICAgICAgICAgICAvLyBGb3JjZXMgdGhlIGNvbnRhaW5lciB0byBiZSBhdCBsZWFzdCBhcyB0YWxsIGFzIGl0cyBjb250ZW50LlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBGaXhlcyBhIHF1aXJrIGluIENocm9tZSB3aGVyZSwgZm9yIG5lc3RlZCBmbGV4IGVsZW1lbnRzLCB0aGVcclxuICAgICAgICAgICAgLy8gaW5uZXIgZWxlbWVudCdzIGhlaWdodCB3b3VsZCBuZXZlciBleGNlZWQgdGhlIG91dGVyIGVsZW1lbnQnc1xyXG4gICAgICAgICAgICAvLyBoZWlnaHQuIFRoaXMgY2F1c2VkIG92ZXJmbG93IHRydW5jYXRpb24gdG8gYnJlYWsgLS0gY29udGFpbmVyc1xyXG4gICAgICAgICAgICAvLyB3b3VsZCBhbHdheXMgYmUgbWVhc3VyZWQgYXMgbm90IG92ZXJmbG93aW5nLCBzaW5jZSB0aGVpciBoZWlnaHRzXHJcbiAgICAgICAgICAgIC8vIHdlcmUgY29uc3RyYWluZWQgYnkgdGhlaXIgcGFyZW50cyBhcyBvcHBvc2VkIHRvIHRydWx5IHJlZmxlY3RpbmdcclxuICAgICAgICAgICAgLy8gdGhlIGhlaWdodCBvZiB0aGVpciBjb250ZW50LlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBTZWUgdGhlIFwiQnJvd3NlciBSZW5kZXJpbmcgTm90ZXNcIiBzZWN0aW9uIG9mIHRoaXMgYW5zd2VyOlxyXG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNjI0NzE0MC93aHktZG9lc250LWZsZXgtaXRlbS1zaHJpbmstcGFzdC1jb250ZW50LXNpemVcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAnLXdlYmtpdC1taW4tY29udGVudCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMudmVydGljYWxDb250ZW50QWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudC5Cb3R0b206XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5faXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZW5kZXJlZEl0ZW0gPSB0aGlzLmlzRWxlbWVudEFsbG93ZWQoaXRlbSkgPyBpdGVtLnJlbmRlcigpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlZEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIGl0ZW0uc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIGl0ZW0uc2VwYXJhdG9yRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZEl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzaWduTW9kZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGxhY2Vob2xkZXJFbGVtZW50ID0gdGhpcy5jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQocGxhY2Vob2xkZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHRydW5jYXRlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gQWRkIDEgdG8gYWNjb3VudCBmb3Igcm91bmRpbmcgZGlmZmVyZW5jZXMgYmV0d2VlbiBicm93c2Vyc1xyXG4gICAgICAgICAgICBsZXQgYm91bmRhcnkgPSB0aGlzLnJlbmRlcmVkRWxlbWVudC5vZmZzZXRUb3AgKyBtYXhIZWlnaHQgKyAxO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhhbmRsZUVsZW1lbnQgPSAoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWx0ID0gY2FyZEVsZW1lbnQucmVuZGVyZWRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKFV0aWxzLmdldEZpdFN0YXR1cyhlbHQsIGJvdW5kYXJ5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseUluQ29udGFpbmVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVDaGFuZ2VkID0gY2FyZEVsZW1lbnRbJ3Jlc2V0T3ZlcmZsb3cnXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQncyBzaXplIGNoYW5nZWQgYWZ0ZXIgcmVzZXR0aW5nIGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGNoZWNrIGlmIGl0IHN0aWxsIGZpdHMgZnVsbHkgaW4gdGhlIGNhcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXplQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVsZW1lbnQoY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLk92ZXJmbG93aW5nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1heEhlaWdodCA9IGJvdW5kYXJ5IC0gZWx0Lm9mZnNldFRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50WydoYW5kbGVPdmVyZmxvdyddKG1heEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Db250YWluZXJGaXRTdGF0dXMuRnVsbHlPdXRPZkNvbnRhaW5lcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50WydoYW5kbGVPdmVyZmxvdyddKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtcykge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlRWxlbWVudChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVuZG9PdmVyZmxvd1RydW5jYXRpb24oKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtcykge1xyXG4gICAgICAgICAgICBpdGVtWydyZXNldE92ZXJmbG93J10oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEhhc0JhY2tncm91bmQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSB8fCBzdXBlci5nZXRIYXNCYWNrZ3JvdW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxQYXJzZShzb3VyY2UsIGNvbnRleHQpO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTaG91bGRGYWxsYmFjayhmYWxzZSk7XHJcblxyXG4gICAgICAgIGxldCBqc29uSXRlbXMgPSBzb3VyY2VbdGhpcy5nZXRJdGVtc0NvbGxlY3Rpb25Qcm9wZXJ0eU5hbWUoKV07XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb25JdGVtcykpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBqc29uSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gY29udGV4dC5wYXJzZUVsZW1lbnQodGhpcywgaXRlbSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRJdGVtQXQoZWxlbWVudCwgLTEsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplQXJyYXkodGFyZ2V0LCB0aGlzLmdldEl0ZW1zQ29sbGVjdGlvblByb3BlcnR5TmFtZSgpLCB0aGlzLl9pdGVtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBpc1NlbGVjdGFibGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtQXQoaW5kZXg6IG51bWJlcik6IENhcmRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZpcnN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkSXRlbXMgJiYgdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5fcmVuZGVyZWRJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgJiYgdGhpcy5fcmVuZGVyZWRJdGVtcyAmJiB0aGlzLl9yZW5kZXJlZEl0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX3JlbmRlcmVkSXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEl0ZW1zW2ldLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEl0ZW1zW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkNvbnRhaW5lclwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmlyc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGRlc2lnbk1vZGUgPSB0aGlzLmlzRGVzaWduTW9kZSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuX2l0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzVmlzaWJsZSB8fCBkZXNpZ25Nb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PSBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMYXN0RWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBkZXNpZ25Nb2RlID0gdGhpcy5pc0Rlc2lnbk1vZGUoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pdGVtc1tpXS5pc1Zpc2libGUgfHwgZGVzaWduTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zW2ldID09IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc1J0bCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5ydGwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRDb250YWluZXIgPyBwYXJlbnRDb250YWluZXIuaXNSdGwoKSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0JsZWVkaW5nQXRUb3AoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGZpcnN0UmVuZGVyZWRJdGVtID0gdGhpcy5nZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbGVlZGluZygpIHx8IChmaXJzdFJlbmRlcmVkSXRlbSA/IGZpcnN0UmVuZGVyZWRJdGVtLmlzQmxlZWRpbmdBdFRvcCgpIDogZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQmxlZWRpbmdBdEJvdHRvbSgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgbGFzdFJlbmRlcmVkSXRlbSA9IHRoaXMuZ2V0TGFzdFZpc2libGVSZW5kZXJlZEl0ZW0oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbGVlZGluZygpIHx8IChsYXN0UmVuZGVyZWRJdGVtID8gbGFzdFJlbmRlcmVkSXRlbS5pc0JsZWVkaW5nQXRCb3R0b20oKSAmJiBsYXN0UmVuZGVyZWRJdGVtLmdldEVmZmVjdGl2ZVN0eWxlKCkgPT0gdGhpcy5nZXRFZmZlY3RpdmVTdHlsZSgpIDogZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGluZGV4T2YoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMuaW5kZXhPZihjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtOiBDYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIC0xLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zZXJ0SXRlbUJlZm9yZShpdGVtOiBDYXJkRWxlbWVudCwgaW5zZXJ0QmVmb3JlOiBDYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIHRoaXMuX2l0ZW1zLmluZGV4T2YoaW5zZXJ0QmVmb3JlKSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGluc2VydEl0ZW1BZnRlcihpdGVtOiBDYXJkRWxlbWVudCwgaW5zZXJ0QWZ0ZXI6IENhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5pbnNlcnRJdGVtQXQoaXRlbSwgdGhpcy5faXRlbXMuaW5kZXhPZihpbnNlcnRBZnRlcikgKyAxLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlSXRlbShpdGVtOiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBpdGVtSW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG5cclxuICAgICAgICBpZiAoaXRlbUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGl0ZW1JbmRleCwgMSk7XHJcblxyXG4gICAgICAgICAgICBpdGVtLnNldFBhcmVudCh1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN1cGVyLmdldFJlc291cmNlSW5mb3JtYXRpb24oKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IDxzdHJpbmc+dGhpcy5iYWNrZ3JvdW5kSW1hZ2UudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBcImltYWdlXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uQnlJZChpZDogc3RyaW5nKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBBY3Rpb24gfCB1bmRlZmluZWQgPSBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdEFjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5faXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpdGVtLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFkZGluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwYWRkaW5nKHZhbHVlOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuc2V0UGFkZGluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdEFjdGlvbigpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RBY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlbGVjdEFjdGlvbih2YWx1ZTogQWN0aW9uIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0QWN0aW9uID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJsZWVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEJsZWVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGJsZWVkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zZXRCbGVlZCh2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbHVtbldpZHRoID0gU2l6ZUFuZFVuaXQgfCBcImF1dG9cIiB8IFwic3RyZXRjaFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbHVtbiBleHRlbmRzIENvbnRhaW5lciB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IHdpZHRoUHJvcGVydHkgPSBuZXcgQ3VzdG9tUHJvcGVydHk8Q29sdW1uV2lkdGg+KFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJ3aWR0aFwiLFxyXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IENvbHVtbldpZHRoID0gcHJvcGVydHkuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHkubmFtZV07XHJcbiAgICAgICAgICAgIGxldCBpbnZhbGlkV2lkdGggPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNpemVBbmRVbml0KHZhbHVlLCBFbnVtcy5TaXplVW5pdC5XZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBcImF1dG9cIiB8fCB2YWx1ZSA9PT0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBTaXplQW5kVW5pdC5wYXJzZSh2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudW5pdCA9PT0gRW51bXMuU2l6ZVVuaXQuUGl4ZWwgJiYgcHJvcGVydHkudGFyZ2V0VmVyc2lvbi5jb21wYXJlVG8oY29udGV4dC50YXJnZXRWZXJzaW9uKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFdpZHRoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRXaWR0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnZhbGlkV2lkdGggPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW52YWxpZFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBjb2x1bW4gd2lkdGg6XCIgKyB2YWx1ZSArIFwiIC0gZGVmYXVsdGluZyB0byBcXFwiYXV0b1xcXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBzZW5kZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogQ29sdW1uV2lkdGgsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTaXplQW5kVW5pdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnVuaXQgPT09IEVudW1zLlNpemVVbml0LlBpeGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIFwid2lkdGhcIiwgdmFsdWUucGh5c2ljYWxTaXplICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2VyaWFsaXplTnVtYmVyKHRhcmdldCwgXCJ3aWR0aFwiLCB2YWx1ZS5waHlzaWNhbFNpemUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIFwid2lkdGhcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInN0cmV0Y2hcIik7XHJcblxyXG4gICAgQHByb3BlcnR5KENvbHVtbi53aWR0aFByb3BlcnR5KVxyXG4gICAgd2lkdGg6IENvbHVtbldpZHRoID0gXCJzdHJldGNoXCI7XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBfY29tcHV0ZWRXZWlnaHQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUocmVuZGVyZWRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IG1pbkRlc2lnblRpbWVDb2x1bW5IZWlnaHQgPSAyMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZXNpZ25Nb2RlKCkpIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbldpZHRoID0gXCIyMHB4XCI7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAoIXRoaXMubWluUGl4ZWxIZWlnaHQgPyBtaW5EZXNpZ25UaW1lQ29sdW1uSGVpZ2h0IDogTWF0aC5tYXgodGhpcy5taW5QaXhlbEhlaWdodCwgbWluRGVzaWduVGltZUNvbHVtbkhlaWdodCkpICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbldpZHRoID0gXCIwXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5taW5QaXhlbEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IHRoaXMubWluUGl4ZWxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLndpZHRoID09PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAxIGF1dG9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy53aWR0aCA9PT0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSA1MHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2lkdGggaW5zdGFuY2VvZiBTaXplQW5kVW5pdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aC51bml0ID09IEVudW1zLlNpemVVbml0LlBpeGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGgucGh5c2ljYWxTaXplICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBcIiArICh0aGlzLl9jb21wdXRlZFdlaWdodCA+IDAgPyB0aGlzLl9jb21wdXRlZFdlaWdodCA6IHRoaXMud2lkdGgucGh5c2ljYWxTaXplKSArIFwiJVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG91bGRTZXJpYWxpemUoY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHNlcGFyYXRvck9yaWVudGF0aW9uKCk6IEVudW1zLk9yaWVudGF0aW9uIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuT3JpZW50YXRpb24uVmVydGljYWw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IENvbHVtbldpZHRoID0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ29sdW1uXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhhc1Zpc2libGVTZXBhcmF0b3IoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50IGluc3RhbmNlb2YgQ29sdW1uU2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcGFyYXRvckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5wYXJlbnQuaXNMZWZ0TW9zdEVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sdW1uU2V0IGV4dGVuZHMgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lciB7XHJcbiAgICBwcml2YXRlIF9jb2x1bW5zOiBDb2x1bW5bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfcmVuZGVyZWRDb2x1bW5zOiBDb2x1bW5bXTtcclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUNvbHVtbkluc3RhbmNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IENvbHVtbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQucGFyc2VDYXJkT2JqZWN0PENvbHVtbj4oXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIHNvdXJjZSxcclxuICAgICAgICAgICAgW10sIC8vIEZvcmJpZGRlbiB0eXBlcyBub3Qgc3VwcG9ydGVkIGZvciBlbGVtZW50cyBmb3Igbm93XHJcbiAgICAgICAgICAgICF0aGlzLmlzRGVzaWduTW9kZSgpLFxyXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICF0eXBlTmFtZSB8fCB0eXBlTmFtZSA9PT0gXCJDb2x1bW5cIiA/IG5ldyBDb2x1bW4oKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKHR5cGVOYW1lOiBzdHJpbmcsIGVycm9yVHlwZTogVHlwZUVycm9yVHlwZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkV2ZW50LkVsZW1lbnRUeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgZWxlbWVudCB0eXBlIFwiICsgdHlwZU5hbWUgKyBcIi4gT25seSBDb2x1bW4gZWxlbWVudHMgYXJlIGFsbG93ZWQgaW4gYSBDb2x1bW5TZXQuXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZENvbHVtbnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBDYWNoZSBob3N0Q29uZmlnIHRvIGF2b2lkIHdhbGtpbmcgdGhlIHBhcmVudCBoaWVyYXJjaHkgc2V2ZXJhbCB0aW1lc1xyXG4gICAgICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuXHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1jb2x1bW5TZXRcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IGluIENvbnRhaW5lci5pbnRlcm5hbFJlbmRlcigpXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICctd2Via2l0LW1pbi1jb250ZW50JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgdG90YWxXZWlnaHQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi53aWR0aCBpbnN0YW5jZW9mIFNpemVBbmRVbml0ICYmIChjb2x1bW4ud2lkdGgudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5XZWlnaHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxXZWlnaHQgKz0gY29sdW1uLndpZHRoLnBoeXNpY2FsU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuX2NvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ud2lkdGggaW5zdGFuY2VvZiBTaXplQW5kVW5pdCAmJiBjb2x1bW4ud2lkdGgudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5XZWlnaHQgJiYgdG90YWxXZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXB1dGVkV2VpZ2h0ID0gMTAwIC8gdG90YWxXZWlnaHQgKiBjb2x1bW4ud2lkdGgucGh5c2ljYWxTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBCZXN0IHdheSB0byBlbXVsYXRlIFwiaW50ZXJuYWxcIiBhY2Nlc3MgSSBrbm93IG9mXHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uW1wiX2NvbXB1dGVkV2VpZ2h0XCJdID0gY29tcHV0ZWRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlcmVkQ29sdW1uID0gY29sdW1uLnJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlZENvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCAmJiBjb2x1bW4uc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4uc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgY29sdW1uLnNlcGFyYXRvckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgcmVuZGVyZWRDb2x1bW4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZENvbHVtbnMucHVzaChjb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zLmxlbmd0aCA+IDAgPyBlbGVtZW50IDogdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHRydW5jYXRlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xyXG4gICAgICAgICAgICBjb2x1bW5bJ2hhbmRsZU92ZXJmbG93J10obWF4SGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1bmRvT3ZlcmZsb3dUcnVuY2F0aW9uKCkge1xyXG4gICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLl9jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIGNvbHVtblsncmVzZXRPdmVyZmxvdyddKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgaXNTZWxlY3RhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29sdW1ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkQ29sdW1ucyA9IFtdO1xyXG5cclxuICAgICAgICBsZXQganNvbkNvbHVtbnMgPSBzb3VyY2VbXCJjb2x1bW5zXCJdO1xyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uQ29sdW1ucykpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBqc29uQ29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbiA9IHRoaXMuY3JlYXRlQ29sdW1uSW5zdGFuY2UoaXRlbSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbnMucHVzaChjb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplQXJyYXkodGFyZ2V0LCBcImNvbHVtbnNcIiwgdGhpcy5fY29sdW1ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaXJzdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA9PSBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCbGVlZGluZ0F0VG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmxlZWRpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZENvbHVtbnMgJiYgdGhpcy5fcmVuZGVyZWRDb2x1bW5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuX2NvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaXNCbGVlZGluZ0F0VG9wKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQmxlZWRpbmdBdEJvdHRvbSgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5pc0JsZWVkaW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRDb2x1bW5zICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLl9jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmlzQmxlZWRpbmdBdEJvdHRvbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sdW1ucy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Rmlyc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgJiYgdGhpcy5fcmVuZGVyZWRDb2x1bW5zICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZENvbHVtbnNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zW3RoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbHVtbkF0KGluZGV4OiBudW1iZXIpOiBDb2x1bW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtQXQoaW5kZXg6IG51bWJlcik6IENhcmRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5BdChpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ29sdW1uU2V0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dDogVmFsaWRhdGlvblJlc3VsdHMpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuXHJcbiAgICAgICAgbGV0IHdlaWdodGVkQ29sdW1uczogbnVtYmVyID0gMDtcclxuICAgICAgICBsZXQgc3RyZXRjaGVkQ29sdW1uczogbnVtYmVyID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuX2NvbHVtbnMpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2x1bW4ud2lkdGggPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodGVkQ29sdW1ucysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi53aWR0aCA9PT0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICAgICAgICAgIHN0cmV0Y2hlZENvbHVtbnMrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdlaWdodGVkQ29sdW1ucyA+IDAgJiYgc3RyZXRjaGVkQ29sdW1ucyA+IDApIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxyXG4gICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5IaW50LFxyXG4gICAgICAgICAgICAgICAgXCJJdCBpcyBub3QgcmVjb21tZW5kZWQgdG8gdXNlIHdlaWdodGVkIGFuZCBzdHJldGNoZWQgY29sdW1ucyBpbiB0aGUgc2FtZSBDb2x1bW5TZXQsIGJlY2F1c2UgaW4gc3VjaCBhIHNpdHVhdGlvbiBzdHJldGNoZWQgY29sdW1ucyB3aWxsIGFsd2F5cyBnZXQgdGhlIG1pbmltdW0gYW1vdW50IG9mIHNwYWNlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ29sdW1uKGNvbHVtbjogQ29sdW1uKSB7XHJcbiAgICAgICAgaWYgKCFjb2x1bW4ucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbHVtbnMucHVzaChjb2x1bW4pO1xyXG5cclxuICAgICAgICAgICAgY29sdW1uLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgY29sdW1uIGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIENvbHVtblNldC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUl0ZW0oaXRlbTogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvbHVtbikge1xyXG4gICAgICAgICAgICBsZXQgaXRlbUluZGV4ID0gdGhpcy5fY29sdW1ucy5pbmRleE9mKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1JbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2x1bW5zLnNwbGljZShpdGVtSW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGluZGV4T2YoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQgaW5zdGFuY2VvZiBDb2x1bW4gPyB0aGlzLl9jb2x1bW5zLmluZGV4T2YoY2FyZEVsZW1lbnQpIDogLTE7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMZWZ0TW9zdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sdW1ucy5pbmRleE9mKDxDb2x1bW4+ZWxlbWVudCkgPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpc1JpZ2h0TW9zdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sdW1ucy5pbmRleE9mKDxDb2x1bW4+ZWxlbWVudCkgPT0gdGhpcy5fY29sdW1ucy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVG9wRWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmluZGV4T2YoPENvbHVtbj5lbGVtZW50KSA+PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQm90dG9tRWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmluZGV4T2YoPENvbHVtbj5lbGVtZW50KSA+PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogQWN0aW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjb2x1bW4uZ2V0QWN0aW9uQnlJZChpZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYmxlZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxlZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgYmxlZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnNldEJsZWVkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFkZGluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwYWRkaW5nKHZhbHVlOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuc2V0UGFkZGluZyh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdEFjdGlvbigpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RBY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlbGVjdEFjdGlvbih2YWx1ZTogQWN0aW9uIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0QWN0aW9uID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJhaXNlSW1hZ2VMb2FkZWRFdmVudChpbWFnZTogSW1hZ2UpIHtcclxuICAgIGxldCBjYXJkID0gaW1hZ2UuZ2V0Um9vdEVsZW1lbnQoKSBhcyBBZGFwdGl2ZUNhcmQ7XHJcbiAgICBsZXQgb25JbWFnZUxvYWRlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uSW1hZ2VMb2FkZWQpID8gY2FyZC5vbkltYWdlTG9hZGVkIDogQWRhcHRpdmVDYXJkLm9uSW1hZ2VMb2FkZWQ7XHJcblxyXG4gICAgaWYgKG9uSW1hZ2VMb2FkZWRIYW5kbGVyKSB7XHJcbiAgICAgICAgb25JbWFnZUxvYWRlZEhhbmRsZXIoaW1hZ2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByYWlzZUFuY2hvckNsaWNrZWRFdmVudChlbGVtZW50OiBDYXJkRWxlbWVudCwgYW5jaG9yOiBIVE1MQW5jaG9yRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IGNhcmQgPSBlbGVtZW50LmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkO1xyXG4gICAgbGV0IG9uQW5jaG9yQ2xpY2tlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uQW5jaG9yQ2xpY2tlZCkgPyBjYXJkLm9uQW5jaG9yQ2xpY2tlZCA6IEFkYXB0aXZlQ2FyZC5vbkFuY2hvckNsaWNrZWQ7XHJcblxyXG4gICAgcmV0dXJuIG9uQW5jaG9yQ2xpY2tlZEhhbmRsZXIgIT09IHVuZGVmaW5lZCA/IG9uQW5jaG9yQ2xpY2tlZEhhbmRsZXIoZWxlbWVudCwgYW5jaG9yKSA6IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiByYWlzZUV4ZWN1dGVBY3Rpb25FdmVudChhY3Rpb246IEFjdGlvbikge1xyXG4gICAgbGV0IGNhcmQgPSBhY3Rpb24ucGFyZW50ID8gYWN0aW9uLnBhcmVudC5nZXRSb290RWxlbWVudCgpIGFzIEFkYXB0aXZlQ2FyZCA6IHVuZGVmaW5lZDtcclxuICAgIGxldCBvbkV4ZWN1dGVBY3Rpb25IYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbkV4ZWN1dGVBY3Rpb24pID8gY2FyZC5vbkV4ZWN1dGVBY3Rpb24gOiBBZGFwdGl2ZUNhcmQub25FeGVjdXRlQWN0aW9uO1xyXG5cclxuICAgIGlmIChhY3Rpb24ucHJlcGFyZUZvckV4ZWN1dGlvbigpICYmIG9uRXhlY3V0ZUFjdGlvbkhhbmRsZXIpIHtcclxuICAgICAgICBvbkV4ZWN1dGVBY3Rpb25IYW5kbGVyKGFjdGlvbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJhaXNlSW5saW5lQ2FyZEV4cGFuZGVkRXZlbnQoYWN0aW9uOiBTaG93Q2FyZEFjdGlvbiwgaXNFeHBhbmRlZDogYm9vbGVhbikge1xyXG4gICAgbGV0IGNhcmQgPSBhY3Rpb24ucGFyZW50ID8gYWN0aW9uLnBhcmVudC5nZXRSb290RWxlbWVudCgpIGFzIEFkYXB0aXZlQ2FyZCA6IHVuZGVmaW5lZDtcclxuICAgIGxldCBvbklubGluZUNhcmRFeHBhbmRlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uSW5saW5lQ2FyZEV4cGFuZGVkKSA/IGNhcmQub25JbmxpbmVDYXJkRXhwYW5kZWQgOiBBZGFwdGl2ZUNhcmQub25JbmxpbmVDYXJkRXhwYW5kZWQ7XHJcblxyXG4gICAgaWYgKG9uSW5saW5lQ2FyZEV4cGFuZGVkSGFuZGxlcikge1xyXG4gICAgICAgIG9uSW5saW5lQ2FyZEV4cGFuZGVkSGFuZGxlcihhY3Rpb24sIGlzRXhwYW5kZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByYWlzZUlucHV0VmFsdWVDaGFuZ2VkRXZlbnQoaW5wdXQ6IElucHV0KSB7XHJcbiAgICBsZXQgY2FyZCA9IGlucHV0LmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkO1xyXG4gICAgbGV0IG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkKSA/IGNhcmQub25JbnB1dFZhbHVlQ2hhbmdlZCA6IEFkYXB0aXZlQ2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkO1xyXG5cclxuICAgIGlmIChvbklucHV0VmFsdWVDaGFuZ2VkSGFuZGxlcikge1xyXG4gICAgICAgIG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyKGlucHV0KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmFpc2VFbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRFdmVudChlbGVtZW50OiBDYXJkRWxlbWVudCwgc2hvdWxkVXBkYXRlTGF5b3V0OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgbGV0IHJvb3RFbGVtZW50ID0gZWxlbWVudC5nZXRSb290RWxlbWVudCgpO1xyXG5cclxuICAgIGlmIChzaG91bGRVcGRhdGVMYXlvdXQpIHtcclxuICAgICAgICByb290RWxlbWVudC51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2FyZCA9IHJvb3RFbGVtZW50IGFzIEFkYXB0aXZlQ2FyZDtcclxuICAgIGxldCBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkKSA/IGNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQgOiBBZGFwdGl2ZUNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQ7XHJcblxyXG4gICAgaWYgKG9uRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkSGFuZGxlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgb25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRIYW5kbGVyKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29udGFpbmVyV2l0aEFjdGlvbnMgZXh0ZW5kcyBDb250YWluZXIge1xyXG4gICAgcHJpdmF0ZSBfYWN0aW9uQ29sbGVjdGlvbjogQWN0aW9uQ29sbGVjdGlvbjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucGFyc2Uoc291cmNlW1wiYWN0aW9uc1wiXSwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsVG9KU09OKHRhcmdldDogUHJvcGVydHlCYWcsIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxUb0pTT04odGFyZ2V0LCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi50b0pTT04odGFyZ2V0LCBcImFjdGlvbnNcIiwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IHN1cGVyLmludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCByZW5kZXJlZEFjdGlvbnMgPSB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcih0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25zT3JpZW50YXRpb24sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJlZEFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMucmVuZGVyU2VwYXJhdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3N0Q29uZmlnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjaW5nOiB0aGlzLmhvc3RDb25maWcuZ2V0RWZmZWN0aXZlU3BhY2luZyh0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5zcGFjaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKSk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZEFjdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJJZkVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDAgPyBlbGVtZW50IDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SGFzRXhwYW5kZWRBY3Rpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRBY3Rpb25Db3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZW5kZXJlZEFjdGlvbkNvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHJlbmRlcmVkQWN0aW9uQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5yZW5kZXJlZEFjdGlvbkNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgcmVuZGVySWZFbXB0eSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbiA9IG5ldyBBY3Rpb25Db2xsZWN0aW9uKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkF0KGluZGV4OiBudW1iZXIpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5nZXRBY3Rpb25Db3VudCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRBY3Rpb25BdChpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogQWN0aW9uIHwgdW5kZWZpbmVkID0gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdCA6IHN1cGVyLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24udmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0xhc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzTGFzdEVsZW1lbnQoZWxlbWVudCkgJiYgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5pdGVtcy5sZW5ndGggPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRBY3Rpb24oYWN0aW9uOiBBY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmFkZEFjdGlvbihhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHN1cGVyLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxJbnB1dHMoKTogSW5wdXRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEFsbElucHV0cygpLmNvbmNhdCh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmdldEFsbElucHV0cygpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkuY29uY2F0KHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0JsZWVkaW5nQXRCb3R0b20oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVuZGVyZWRBY3Rpb25Db3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5pc0JsZWVkaW5nQXRCb3R0b20oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkICYmICF0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmV4cGFuZGVkQWN0aW9uICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzU3RhbmRhbG9uZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCB7XHJcbiAgICBkaWRQcm9jZXNzOiBib29sZWFuO1xyXG4gICAgb3V0cHV0SHRtbD86IGFueTtcclxufVxyXG5cclxuLy8gQGR5bmFtaWNcclxuZXhwb3J0IGNsYXNzIEFkYXB0aXZlQ2FyZCBleHRlbmRzIENvbnRhaW5lcldpdGhBY3Rpb25zIHtcclxuICAgIHN0YXRpYyByZWFkb25seSBzY2hlbWFVcmwgPSBcImh0dHA6Ly9hZGFwdGl2ZWNhcmRzLmlvL3NjaGVtYXMvYWRhcHRpdmUtY2FyZC5qc29uXCI7XHJcblxyXG4gICAgLy8jcmVnaW9uIFNjaGVtYVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgJHNjaGVtYVByb3BlcnR5ID0gbmV3IEN1c3RvbVByb3BlcnR5PHN0cmluZz4oXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcIiRzY2hlbWFcIixcclxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQWRhcHRpdmVDYXJkLnNjaGVtYVVybDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFZlcnNpb25zIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5Lm5hbWUsIEFkYXB0aXZlQ2FyZC5zY2hlbWFVcmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB2ZXJzaW9uUHJvcGVydHkgPSBuZXcgQ3VzdG9tUHJvcGVydHk8VmVyc2lvbiB8IHVuZGVmaW5lZD4oXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcInZlcnNpb25cIixcclxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmVyc2lvbiA9IFZlcnNpb24ucGFyc2Uoc291cmNlW3Byb3BlcnR5Lm5hbWVdLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZlcnNpb24gPSBWZXJzaW9ucy5sYXRlc3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBcIkludmFsaWQgY2FyZCB2ZXJzaW9uLiBEZWZhdWx0aW5nIHRvIGxhdGVzdCB2ZXJzaW9uIChcIiArIHZlcnNpb24udG9TdHJpbmcoKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBWZXJzaW9ucyB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKHRhcmdldCwgcHJvcGVydHkubmFtZSwgdmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzApO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGZhbGxiYWNrVGV4dFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiZmFsbGJhY2tUZXh0XCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNwZWFrUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJzcGVha1wiKTtcclxuXHJcbiAgICBAcHJvcGVydHkoQWRhcHRpdmVDYXJkLnZlcnNpb25Qcm9wZXJ0eSlcclxuICAgIHZlcnNpb246IFZlcnNpb247XHJcblxyXG4gICAgQHByb3BlcnR5KEFkYXB0aXZlQ2FyZC5mYWxsYmFja1RleHRQcm9wZXJ0eSlcclxuICAgIGZhbGxiYWNrVGV4dD86IHN0cmluZztcclxuXHJcbiAgICBAcHJvcGVydHkoQWRhcHRpdmVDYXJkLnNwZWFrUHJvcGVydHkpXHJcbiAgICBzcGVhaz86IHN0cmluZztcclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBzdGF0aWMgb25BbmNob3JDbGlja2VkPzogKGVsZW1lbnQ6IENhcmRFbGVtZW50LCBhbmNob3I6IEhUTUxBbmNob3JFbGVtZW50KSA9PiBib29sZWFuO1xyXG4gICAgc3RhdGljIG9uRXhlY3V0ZUFjdGlvbj86IChhY3Rpb246IEFjdGlvbikgPT4gdm9pZDtcclxuICAgIHN0YXRpYyBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZD86IChlbGVtZW50OiBDYXJkRWxlbWVudCkgPT4gdm9pZDtcclxuICAgIHN0YXRpYyBvbkltYWdlTG9hZGVkPzogKGltYWdlOiBJbWFnZSkgPT4gdm9pZDtcclxuICAgIHN0YXRpYyBvbklubGluZUNhcmRFeHBhbmRlZD86IChhY3Rpb246IFNob3dDYXJkQWN0aW9uLCBpc0V4cGFuZGVkOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgc3RhdGljIG9uSW5wdXRWYWx1ZUNoYW5nZWQ/OiAoaW5wdXQ6IElucHV0KSA9PiB2b2lkO1xyXG4gICAgc3RhdGljIG9uUHJvY2Vzc01hcmtkb3duPzogKHRleHQ6IHN0cmluZywgcmVzdWx0OiBJTWFya2Rvd25Qcm9jZXNzaW5nUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuICAgIHN0YXRpYyBnZXQgcHJvY2Vzc01hcmtkb3duKCk6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZyB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHByb2Nlc3NNYXJrZG93biBldmVudCBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZSBhbmQgc2V0IG9uUHJvY2Vzc01hcmtkb3duIGluc3RlYWQuXCIpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldCBwcm9jZXNzTWFya2Rvd24odmFsdWU6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBwcm9jZXNzTWFya2Rvd24gZXZlbnQgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUgYW5kIHNldCBvblByb2Nlc3NNYXJrZG93biBpbnN0ZWFkLlwiKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhcHBseU1hcmtkb3duKHRleHQ6IHN0cmluZyk6IElNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IElNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGRpZFByb2Nlc3M6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC5vblByb2Nlc3NNYXJrZG93bikge1xyXG4gICAgICAgICAgICBBZGFwdGl2ZUNhcmQub25Qcm9jZXNzTWFya2Rvd24odGV4dCwgcmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKDxhbnk+d2luZG93KS5tYXJrZG93bml0KSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBtYXJrZG93bml0XHJcbiAgICAgICAgICAgIGxldCBtYXJrZG93bkl0OiBhbnkgPSAoPGFueT53aW5kb3cpLm1hcmtkb3duaXQ7XHJcbiAgICAgICAgICAgIHJlc3VsdC5vdXRwdXRIdG1sID0gbWFya2Rvd25JdCgpLnJlbmRlcih0ZXh0KTtcclxuICAgICAgICAgICAgcmVzdWx0LmRpZFByb2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTWFya2Rvd24gcHJvY2Vzc2luZyBpc24ndCBlbmFibGVkLiBQbGVhc2Ugc2VlIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2FkYXB0aXZlY2FyZHMjc3VwcG9ydGluZy1tYXJrZG93blwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9mYWxsYmFja0NhcmQ/OiBBZGFwdGl2ZUNhcmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBpc1ZlcnNpb25TdXBwb3J0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuYnlwYXNzVmVyc2lvbkNoZWNrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHVuc3VwcG9ydGVkVmVyc2lvbjogYm9vbGVhbiA9XHJcbiAgICAgICAgICAgICAgICAhdGhpcy52ZXJzaW9uIHx8XHJcbiAgICAgICAgICAgICAgICAhdGhpcy52ZXJzaW9uLmlzVmFsaWQgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLm1heFZlcnNpb24ubWFqb3IgPCB0aGlzLnZlcnNpb24ubWFqb3IpIHx8XHJcbiAgICAgICAgICAgICAgICAodGhpcy5tYXhWZXJzaW9uLm1ham9yID09IHRoaXMudmVyc2lvbi5tYWpvciAmJiB0aGlzLm1heFZlcnNpb24ubWlub3IgPCB0aGlzLnZlcnNpb24ubWlub3IpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICF1bnN1cHBvcnRlZFZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRJdGVtc0NvbGxlY3Rpb25Qcm9wZXJ0eU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJib2R5XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBsZXQgZmFsbGJhY2tFbGVtZW50ID0gY29udGV4dC5wYXJzZUVsZW1lbnQodW5kZWZpbmVkLCBzb3VyY2VbXCJmYWxsYmFja1wiXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCkpO1xyXG5cclxuICAgICAgICBpZiAoZmFsbGJhY2tFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZhbGxiYWNrQ2FyZCA9IG5ldyBBZGFwdGl2ZUNhcmQoKTtcclxuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkLmFkZEl0ZW0oZmFsbGJhY2tFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKEFkYXB0aXZlQ2FyZC52ZXJzaW9uUHJvcGVydHksIGNvbnRleHQudGFyZ2V0VmVyc2lvbik7XHJcblxyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVuZGVyZWRFbGVtZW50ID0gc3VwZXIuaW50ZXJuYWxSZW5kZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24gJiYgcmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFVubGlrZSBjb250YWluZXJzLCB0aGUgcm9vdCBjYXJkIGVsZW1lbnQgc2hvdWxkIGJlIGFsbG93ZWQgdG9cclxuICAgICAgICAgICAgLy8gYmUgc2hvcnRlciB0aGFuIGl0cyBjb250ZW50IChvdGhlcndpc2UgdGhlIG92ZXJmbG93IHRydW5jYXRpb25cclxuICAgICAgICAgICAgLy8gbG9naWMgd291bGQgbmV2ZXIgZ2V0IHRyaWdnZXJlZClcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwibWluSGVpZ2h0XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SGFzQmFja2dyb3VuZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdFBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFkZGluZ0RlZmluaXRpb24oXHJcbiAgICAgICAgICAgIEVudW1zLlNwYWNpbmcuUGFkZGluZyxcclxuICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxyXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXHJcbiAgICAgICAgICAgIEVudW1zLlNwYWNpbmcuUGFkZGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3VsZFNlcmlhbGl6ZShjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgcmVuZGVySWZFbXB0eSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGJ5cGFzc1ZlcnNpb25DaGVjaygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBhbGxvd0N1c3RvbVN0eWxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RDb25maWcuYWRhcHRpdmVDYXJkICYmIHRoaXMuaG9zdENvbmZpZy5hZGFwdGl2ZUNhcmQuYWxsb3dDdXN0b21TdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGhhc0JhY2tncm91bmQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgb25BbmNob3JDbGlja2VkPzogKGVsZW1lbnQ6IENhcmRFbGVtZW50LCBhbmNob3I6IEhUTUxBbmNob3JFbGVtZW50KSA9PiBib29sZWFuO1xyXG4gICAgb25FeGVjdXRlQWN0aW9uPzogKGFjdGlvbjogQWN0aW9uKSA9PiB2b2lkO1xyXG4gICAgb25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQ/OiAoZWxlbWVudDogQ2FyZEVsZW1lbnQpID0+IHZvaWQ7XHJcbiAgICBvbkltYWdlTG9hZGVkPzogKGltYWdlOiBJbWFnZSkgPT4gdm9pZDtcclxuICAgIG9uSW5saW5lQ2FyZEV4cGFuZGVkPzogKGFjdGlvbjogU2hvd0NhcmRBY3Rpb24sIGlzRXhwYW5kZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBvbklucHV0VmFsdWVDaGFuZ2VkPzogKGlucHV0OiBJbnB1dCkgPT4gdm9pZDtcclxuXHJcbiAgICBkZXNpZ25Nb2RlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQWRhcHRpdmVDYXJkXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dDogVmFsaWRhdGlvblJlc3VsdHMpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoQ2FyZEVsZW1lbnQudHlwZU5hbWVQcm9wZXJ0eSkgIT09IFwiQWRhcHRpdmVDYXJkXCIpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxyXG4gICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5NaXNzaW5nQ2FyZFR5cGUsXHJcbiAgICAgICAgICAgICAgICBcIkludmFsaWQgb3IgbWlzc2luZyBjYXJkIHR5cGUuIE1ha2Ugc3VyZSB0aGUgY2FyZCdzIHR5cGUgcHJvcGVydHkgaXMgc2V0IHRvIFxcXCJBZGFwdGl2ZUNhcmRcXFwiLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5ieXBhc3NWZXJzaW9uQ2hlY2sgJiYgIXRoaXMudmVyc2lvbikge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlByb3BlcnR5Q2FudEJlTnVsbCxcclxuICAgICAgICAgICAgICAgIFwiVGhlIHZlcnNpb24gcHJvcGVydHkgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghdGhpcy5pc1ZlcnNpb25TdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlVuc3VwcG9ydGVkQ2FyZFZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICBcIlRoZSBzcGVjaWZpZWQgY2FyZCB2ZXJzaW9uIChcIiArIHRoaXMudmVyc2lvbi50b1N0cmluZygpICsgXCIpIGlzIG5vdCBzdXBwb3J0ZWQuIFRoZSBtYXhpbXVtIHN1cHBvcnRlZCBjYXJkIHZlcnNpb24gaXMgXCIgKyB0aGlzLm1heFZlcnNpb24udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcih0YXJnZXQ/OiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkRmFsbGJhY2soKSAmJiB0aGlzLl9mYWxsYmFja0NhcmQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcblxyXG4gICAgICAgICAgICByZW5kZXJlZENhcmQgPSB0aGlzLl9mYWxsYmFja0NhcmQucmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZW5kZXJlZENhcmQgPSBzdXBlci5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJlZENhcmQpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC5jbGFzc0xpc3QuYWRkKHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtYWRhcHRpdmVDYXJkXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIYXZpbmcgYSB0YWJJbmRleCBvbiB0aGUgcm9vdCBjb250YWluZXIgZm9yIGEgY2FyZCBjYW4gbWVzcyB1cCBhY2Nlc3NpYmlsaXR5IGluIHNvbWUgc2NlbmFyaW9zLlxyXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UndmUgc2hpcHBlZCB0aGlzIGJlaGF2aW9yIGJlZm9yZSwgYW5kIHNvIGNhbid0IGp1c3QgdHVybiBpdCBvZmYgaW4gYSBwb2ludCByZWxlYXNlLiBGb3JcclxuICAgICAgICAgICAgICAgIC8vIG5vdywgdG8gdW5ibG9jayBhY2Nlc3NpYmlsaXR5IHNjZW5hcmlvcyBmb3Igb3VyIGN1c3RvbWVycywgd2UndmUgZ290IGFuIG9wdGlvbiB0byB0dXJuIGl0IG9mZi4gSW4gYVxyXG4gICAgICAgICAgICAgICAgLy8gZnV0dXJlIHJlbGVhc2UsIHdlIHNob3VsZCBzdHJvbmdseSBjb25zaWRlciBmbGlwcGluZyB0aGUgZGVmYXVsdCBzdWNoIHRoYXQgd2UgKmRvbid0KiBlbWl0IGEgdGFiSW5kZXhcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGRlZmF1bHQuXHJcbiAgICAgICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3Muc2V0VGFiSW5kZXhBdENhcmRSb290KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRDYXJkLnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zcGVhaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMuc3BlYWspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRhcmdldCwgcmVuZGVyZWRDYXJkKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRDYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxheW91dChwcm9jZXNzQ2hpbGRyZW46IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlTGF5b3V0KHByb2Nlc3NDaGlsZHJlbik7XHJcblxyXG4gICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy51c2VBZHZhbmNlZENhcmRCb3R0b21UcnVuY2F0aW9uICYmIHRoaXMuaXNEaXNwbGF5ZWQoKSkge1xyXG4gICAgICAgICAgICBsZXQgcGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5nZXRFZmZlY3RpdmVTcGFjaW5nKEVudW1zLlNwYWNpbmcuRGVmYXVsdCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzWydoYW5kbGVPdmVyZmxvdyddKCg8SFRNTEVsZW1lbnQ+dGhpcy5yZW5kZXJlZEVsZW1lbnQpLm9mZnNldEhlaWdodCAtIHBhZGRpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRGYWxsYmFjaygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuc2hvdWxkRmFsbGJhY2soKSB8fCAhdGhpcy5pc1ZlcnNpb25TdXBwb3J0ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGFzVmlzaWJsZVNlcGFyYXRvcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIElubGluZUFkYXB0aXZlQ2FyZCBleHRlbmRzIEFkYXB0aXZlQ2FyZCB7XHJcbiAgICAvLyNyZWdpb24gU2NoZW1hXHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFNjaGVtYUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIklubGluZUFkYXB0aXZlQ2FyZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlU2NoZW1hKHNjaGVtYSk7XHJcblxyXG4gICAgICAgIHNjaGVtYS5yZW1vdmUoXHJcbiAgICAgICAgICAgIEFkYXB0aXZlQ2FyZC4kc2NoZW1hUHJvcGVydHksXHJcbiAgICAgICAgICAgIEFkYXB0aXZlQ2FyZC52ZXJzaW9uUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBnZXREZWZhdWx0UGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYWRkaW5nRGVmaW5pdGlvbihcclxuICAgICAgICAgICAgdGhpcy5zdXBwcmVzc1N0eWxlID8gRW51bXMuU3BhY2luZy5Ob25lIDogRW51bXMuU3BhY2luZy5QYWRkaW5nLFxyXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXHJcbiAgICAgICAgICAgIHRoaXMuc3VwcHJlc3NTdHlsZSA/IEVudW1zLlNwYWNpbmcuTm9uZSA6IEVudW1zLlNwYWNpbmcuUGFkZGluZyxcclxuICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGJ5cGFzc1ZlcnNpb25DaGVjaygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGRlZmF1bHRTdHlsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0aGlzLnN1cHByZXNzU3R5bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuc2hvd0NhcmQuc3R5bGUgPyB0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5zaG93Q2FyZC5zdHlsZSA6IEVudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdXBwcmVzc1N0eWxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcmVuZGVyKHRhcmdldD86IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZW5kZXJlZENhcmQgPSBzdXBlci5yZW5kZXIodGFyZ2V0KTtcclxuXHJcbiAgICAgICAgaWYgKHJlbmRlcmVkQ2FyZCkge1xyXG4gICAgICAgICAgICByZW5kZXJlZENhcmQuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIpO1xyXG4gICAgICAgICAgICByZW5kZXJlZENhcmQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRDYXJkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR2xvYmFsUmVnaXN0cnkge1xyXG4gICAgc3RhdGljIHBvcHVsYXRlV2l0aERlZmF1bHRFbGVtZW50cyhyZWdpc3RyeTogQ2FyZE9iamVjdFJlZ2lzdHJ5PENhcmRFbGVtZW50Pikge1xyXG4gICAgICAgIHJlZ2lzdHJ5LmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiQ29udGFpbmVyXCIsIENvbnRhaW5lcik7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJUZXh0QmxvY2tcIiwgVGV4dEJsb2NrKTtcclxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIlJpY2hUZXh0QmxvY2tcIiwgUmljaFRleHRCbG9jaywgVmVyc2lvbnMudjFfMik7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJUZXh0UnVuXCIsIFRleHRSdW4sIFZlcnNpb25zLnYxXzIpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW1hZ2VcIiwgSW1hZ2UpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW1hZ2VTZXRcIiwgSW1hZ2VTZXQpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiTWVkaWFcIiwgTWVkaWEsIFZlcnNpb25zLnYxXzEpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiRmFjdFNldFwiLCBGYWN0U2V0KTtcclxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIkNvbHVtblNldFwiLCBDb2x1bW5TZXQpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiQWN0aW9uU2V0XCIsIEFjdGlvblNldCwgVmVyc2lvbnMudjFfMik7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5UZXh0XCIsIFRleHRJbnB1dCk7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5EYXRlXCIsIERhdGVJbnB1dCk7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5UaW1lXCIsIFRpbWVJbnB1dCk7XHJcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5OdW1iZXJcIiwgTnVtYmVySW5wdXQpO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW5wdXQuQ2hvaWNlU2V0XCIsIENob2ljZVNldElucHV0KTtcclxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIklucHV0LlRvZ2dsZVwiLCBUb2dnbGVJbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBvcHVsYXRlV2l0aERlZmF1bHRBY3Rpb25zKHJlZ2lzdHJ5OiBDYXJkT2JqZWN0UmVnaXN0cnk8QWN0aW9uPikge1xyXG4gICAgICAgIHJlZ2lzdHJ5LmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKE9wZW5VcmxBY3Rpb24uSnNvblR5cGVOYW1lLCBPcGVuVXJsQWN0aW9uKTtcclxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihTdWJtaXRBY3Rpb24uSnNvblR5cGVOYW1lLCBTdWJtaXRBY3Rpb24pO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFNob3dDYXJkQWN0aW9uLkpzb25UeXBlTmFtZSwgU2hvd0NhcmRBY3Rpb24pO1xyXG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFRvZ2dsZVZpc2liaWxpdHlBY3Rpb24uSnNvblR5cGVOYW1lLCBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLCBWZXJzaW9ucy52MV8yKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgZWxlbWVudHMgPSBuZXcgQ2FyZE9iamVjdFJlZ2lzdHJ5PENhcmRFbGVtZW50PigpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGFjdGlvbnMgPSBuZXcgQ2FyZE9iamVjdFJlZ2lzdHJ5PEFjdGlvbj4oKTtcclxuXHJcbiAgICBzdGF0aWMgcmVzZXQoKSB7XHJcbiAgICAgICAgR2xvYmFsUmVnaXN0cnkucG9wdWxhdGVXaXRoRGVmYXVsdEVsZW1lbnRzKEdsb2JhbFJlZ2lzdHJ5LmVsZW1lbnRzKTtcclxuICAgICAgICBHbG9iYWxSZWdpc3RyeS5wb3B1bGF0ZVdpdGhEZWZhdWx0QWN0aW9ucyhHbG9iYWxSZWdpc3RyeS5hY3Rpb25zKTtcclxuICAgIH1cclxufVxyXG5cclxuR2xvYmFsUmVnaXN0cnkucmVzZXQoKTtcclxuXHJcbmNvbnN0IGVudW0gVHlwZUVycm9yVHlwZSB7XHJcbiAgICBVbmtub3duVHlwZSxcclxuICAgIEZvcmJpZGRlblR5cGVcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YXRpb25Db250ZXh0IGV4dGVuZHMgQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0IHtcclxuICAgIHByaXZhdGUgX2VsZW1lbnRSZWdpc3RyeT86IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD47XHJcbiAgICBwcml2YXRlIF9hY3Rpb25SZWdpc3RyeT86IENhcmRPYmplY3RSZWdpc3RyeTxBY3Rpb24+O1xyXG5cclxuICAgIHByaXZhdGUgaW50ZXJuYWxQYXJzZUNhcmRPYmplY3Q8VCBleHRlbmRzIENhcmRPYmplY3Q+KFxyXG4gICAgICAgIHBhcmVudDogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgc291cmNlOiBhbnksXHJcbiAgICAgICAgZm9yYmlkZGVuVHlwZU5hbWVzOiBzdHJpbmdbXSxcclxuICAgICAgICBhbGxvd0ZhbGxiYWNrOiBib29sZWFuLFxyXG4gICAgICAgIGNyZWF0ZUluc3RhbmNlQ2FsbGJhY2s6ICh0eXBlTmFtZTogc3RyaW5nKSA9PiBUIHwgdW5kZWZpbmVkLFxyXG4gICAgICAgIGxvZ1BhcnNlRXZlbnQ6ICh0eXBlTmFtZTogc3RyaW5nLCBlcnJvclR5cGU6IFR5cGVFcnJvclR5cGUpID0+IHZvaWQpOiBUIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBUIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgbGV0IHRyeVRvRmFsbGJhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHR5cGVOYW1lID0gVXRpbHMucGFyc2VTdHJpbmcoc291cmNlW1widHlwZVwiXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JiaWRkZW5UeXBlTmFtZXMuaW5kZXhPZih0eXBlTmFtZSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ1BhcnNlRXZlbnQodHlwZU5hbWUsIFR5cGVFcnJvclR5cGUuRm9yYmlkZGVuVHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrKHR5cGVOYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5VG9GYWxsYmFjayA9IGFsbG93RmFsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dQYXJzZUV2ZW50KHR5cGVOYW1lLCBUeXBlRXJyb3JUeXBlLlVua25vd25UeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRQYXJlbnQocGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnNlKHNvdXJjZSwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlUb0ZhbGxiYWNrID0gcmVzdWx0LnNob3VsZEZhbGxiYWNrKCkgJiYgYWxsb3dGYWxsYmFjaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cnlUb0ZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYWxsYmFjayA9IHNvdXJjZVtcImZhbGxiYWNrXCJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWxsYmFjayAmJiBwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zZXRTaG91bGRGYWxsYmFjayh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcInN0cmluZ1wiICYmIGZhbGxiYWNrLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmludGVybmFsUGFyc2VDYXJkT2JqZWN0PFQ+KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFjayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JiaWRkZW5UeXBlTmFtZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ1BhcnNlRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjYXJkT2JqZWN0UGFyc2VkKG86IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBhbnkpIHtcclxuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEFjdGlvbiAmJiB0aGlzLm9uUGFyc2VBY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhcnNlQWN0aW9uKG8sIHNvdXJjZSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG8gaW5zdGFuY2VvZiBDYXJkRWxlbWVudCAmJiB0aGlzLm9uUGFyc2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMub25QYXJzZUVsZW1lbnQobywgc291cmNlLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25QYXJzZUFjdGlvbj86IChhY3Rpb246IEFjdGlvbiwgc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB2b2lkO1xyXG4gICAgb25QYXJzZUVsZW1lbnQ/OiAoZWxlbWVudDogQ2FyZEVsZW1lbnQsIHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4gdm9pZDtcclxuXHJcbiAgICBwYXJzZUNhcmRPYmplY3Q8VCBleHRlbmRzIENhcmRPYmplY3Q+KFxyXG4gICAgICAgIHBhcmVudDogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgc291cmNlOiBhbnksXHJcbiAgICAgICAgZm9yYmlkZGVuVHlwZU5hbWVzOiBzdHJpbmdbXSxcclxuICAgICAgICBhbGxvd0ZhbGxiYWNrOiBib29sZWFuLFxyXG4gICAgICAgIGNyZWF0ZUluc3RhbmNlQ2FsbGJhY2s6ICh0eXBlTmFtZTogc3RyaW5nKSA9PiBUIHwgdW5kZWZpbmVkLFxyXG4gICAgICAgIGxvZ1BhcnNlRXZlbnQ6ICh0eXBlTmFtZTogc3RyaW5nLCBlcnJvclR5cGU6IFR5cGVFcnJvclR5cGUpID0+IHZvaWQpOiBUIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5pbnRlcm5hbFBhcnNlQ2FyZE9iamVjdChcclxuICAgICAgICAgICAgcGFyZW50LFxyXG4gICAgICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgICAgIGZvcmJpZGRlblR5cGVOYW1lcyxcclxuICAgICAgICAgICAgYWxsb3dGYWxsYmFjayxcclxuICAgICAgICAgICAgY3JlYXRlSW5zdGFuY2VDYWxsYmFjayxcclxuICAgICAgICAgICAgbG9nUGFyc2VFdmVudCk7XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRPYmplY3RQYXJzZWQocmVzdWx0LCBzb3VyY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUVsZW1lbnQocGFyZW50OiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCwgc291cmNlOiBhbnksIGFsbG93RmFsbGJhY2s6IGJvb2xlYW4pOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VDYXJkT2JqZWN0PENhcmRFbGVtZW50PihcclxuICAgICAgICAgICAgcGFyZW50LFxyXG4gICAgICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgICAgIFtdLCAvLyBGb3JiaWRkZW4gdHlwZXMgbm90IHN1cHBvcnRlZCBmb3IgZWxlbWVudHMgZm9yIG5vd1xyXG4gICAgICAgICAgICBhbGxvd0ZhbGxiYWNrLFxyXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZ2lzdHJ5LmNyZWF0ZUluc3RhbmNlKHR5cGVOYW1lLCB0aGlzLnRhcmdldFZlcnNpb24pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZywgZXJyb3JUeXBlOiBUeXBlRXJyb3JUeXBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JUeXBlID09PSBUeXBlRXJyb3JUeXBlLlVua25vd25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dQYXJzZUV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuVW5rbm93bkVsZW1lbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlVua25vd24gZWxlbWVudCB0eXBlOiBcIiArIHR5cGVOYW1lICsgXCIuIEZhbGxiYWNrIHdpbGwgYmUgdXNlZCBpZiBwcmVzZW50LlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkVsZW1lbnRUeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJFbGVtZW50IHR5cGUgXCIgKyB0eXBlTmFtZSArIFwiIGlzIG5vdCBhbGxvd2VkIGluIHRoaXMgY29udGV4dC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQWN0aW9uKFxyXG4gICAgICAgIHBhcmVudDogQ2FyZEVsZW1lbnQsXHJcbiAgICAgICAgc291cmNlOiBhbnksXHJcbiAgICAgICAgZm9yYmlkZGVuQWN0aW9uVHlwZXM6IHN0cmluZ1tdLFxyXG4gICAgICAgIGFsbG93RmFsbGJhY2s6IGJvb2xlYW4pOiBBY3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlQ2FyZE9iamVjdDxBY3Rpb24+KFxyXG4gICAgICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZSxcclxuICAgICAgICAgICAgZm9yYmlkZGVuQWN0aW9uVHlwZXMsXHJcbiAgICAgICAgICAgIGFsbG93RmFsbGJhY2ssXHJcbiAgICAgICAgICAgICh0eXBlTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25SZWdpc3RyeS5jcmVhdGVJbnN0YW5jZSh0eXBlTmFtZSwgdGhpcy50YXJnZXRWZXJzaW9uKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKHR5cGVOYW1lOiBzdHJpbmcsIGVycm9yVHlwZTogVHlwZUVycm9yVHlwZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yVHlwZSA9PSBUeXBlRXJyb3JUeXBlLlVua25vd25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FdmVudC5Vbmtub3duQWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJVbmtub3duIGFjdGlvbiB0eXBlOiBcIiArIHR5cGVOYW1lICsgXCIuIEZhbGxiYWNrIHdpbGwgYmUgdXNlZCBpZiBwcmVzZW50LlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FdmVudC5BY3Rpb25UeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBY3Rpb24gdHlwZSBcIiArIHR5cGVOYW1lICsgXCIgaXMgbm90IGFsbG93ZWQgaW4gdGhpcyBjb250ZXh0LlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZWxlbWVudFJlZ2lzdHJ5KCk6IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50UmVnaXN0cnkgPyB0aGlzLl9lbGVtZW50UmVnaXN0cnkgOiBHbG9iYWxSZWdpc3RyeS5lbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3QgdXNpbmcgYSBwcm9wZXJ0eSBzZXR0ZXIgaGVyZSBiZWNhdXNlIHRoZSBzZXR0ZXIgc2hvdWxkIGFjY2VwdCBcInVuZGVmaW5lZFwiXHJcbiAgICAvLyB3aGVyZWFzIHRoZSBnZXR0ZXIgc2hvdWxkIG5ldmVyIHJldHVybiB1bmRlZmluZWQuXHJcbiAgICBzZXRFbGVtZW50UmVnaXN0cnkodmFsdWU6IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4gfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50UmVnaXN0cnkgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aW9uUmVnaXN0cnkoKTogQ2FyZE9iamVjdFJlZ2lzdHJ5PEFjdGlvbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25SZWdpc3RyeSA/IHRoaXMuX2FjdGlvblJlZ2lzdHJ5IDogR2xvYmFsUmVnaXN0cnkuYWN0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3QgdXNpbmcgYSBwcm9wZXJ0eSBzZXR0ZXIgaGVyZSBiZWNhdXNlIHRoZSBzZXR0ZXIgc2hvdWxkIGFjY2VwdCBcInVuZGVmaW5lZFwiXHJcbiAgICAvLyB3aGVyZWFzIHRoZSBnZXR0ZXIgc2hvdWxkIG5ldmVyIHJldHVybiB1bmRlZmluZWQuXHJcbiAgICBzZXRBY3Rpb25SZWdpc3RyeSh2YWx1ZTogQ2FyZE9iamVjdFJlZ2lzdHJ5PEFjdGlvbj4gfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25SZWdpc3RyeSA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEVudW1zIGZyb20gXCIuL2VudW1zXCI7XHJcbmltcG9ydCB7IERpY3Rpb25hcnksIEdsb2JhbFNldHRpbmdzIH0gZnJvbSBcIi4vc2hhcmVkXCI7XHJcbmltcG9ydCB7IEhvc3RDb25maWcgfSBmcm9tIFwiLi9ob3N0LWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBIb3N0Q2FwYWJpbGl0aWVzIH0gZnJvbSBcIi4vaG9zdC1jYXBhYmlsaXRpZXNcIjtcclxuaW1wb3J0IHsgVmVyc2lvbnMsIHByb3BlcnR5LCBTZXJpYWxpemFibGVPYmplY3QsIFN0cmluZ1Byb3BlcnR5LCBTZXJpYWxpemFibGVPYmplY3RQcm9wZXJ0eSwgSVZhbGlkYXRpb25FdmVudCwgUHJvcGVydHlEZWZpbml0aW9uIH0gZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25SZXN1bHRzIHtcclxuICAgIHJlYWRvbmx5IGFsbElkczogRGljdGlvbmFyeTxudW1iZXI+ID0ge307XHJcbiAgICByZWFkb25seSB2YWxpZGF0aW9uRXZlbnRzOiBJVmFsaWRhdGlvbkV2ZW50W10gPSBbXTtcclxuXHJcbiAgICBhZGRGYWlsdXJlKGNhcmRPYmplY3Q6IENhcmRPYmplY3QsIGV2ZW50OiBFbnVtcy5WYWxpZGF0aW9uRXZlbnQsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGlvbkV2ZW50cy5wdXNoKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwaGFzZTogRW51bXMuVmFsaWRhdGlvblBoYXNlLlZhbGlkYXRpb24sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGNhcmRPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDYXJkT2JqZWN0VHlwZSA9IHsgbmV3KCk6IENhcmRPYmplY3QgfTtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkT2JqZWN0IGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcclxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdHlwZU5hbWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwidHlwZVwiLFxyXG4gICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgIChzZW5kZXI6IG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxDYXJkT2JqZWN0PnNlbmRlcikuZ2V0SnNvblR5cGVOYW1lKClcclxuICAgICAgICB9KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBpZFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiaWRcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcmVxdWlyZXNQcm9wZXJ0eSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RQcm9wZXJ0eShcclxuICAgICAgICBWZXJzaW9ucy52MV8yLFxyXG4gICAgICAgIFwicmVxdWlyZXNcIixcclxuICAgICAgICBIb3N0Q2FwYWJpbGl0aWVzKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SnNvblR5cGVOYW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KENhcmRPYmplY3QuaWRQcm9wZXJ0eSlcclxuICAgIGlkPzogc3RyaW5nO1xyXG5cclxuICAgIEBwcm9wZXJ0eShDYXJkT2JqZWN0LnJlcXVpcmVzUHJvcGVydHkpXHJcbiAgICBnZXQgcmVxdWlyZXMoKTogSG9zdENhcGFiaWxpdGllcyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoQ2FyZE9iamVjdC5yZXF1aXJlc1Byb3BlcnR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIF9zaG91bGRGYWxsYmFjazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHByb3RlY3RlZCBfcGFyZW50PzogQ2FyZE9iamVjdDtcclxuICAgIHByb3RlY3RlZCBfcmVuZGVyZWRFbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgb25QcmVQcm9jZXNzUHJvcGVydHlWYWx1ZT86IChzZW5kZXI6IENhcmRPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHZhbHVlOiBhbnkpID0+IGFueTtcclxuXHJcbiAgICBhYnN0cmFjdCBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nO1xyXG5cclxuICAgIGFic3RyYWN0IGdldCBob3N0Q29uZmlnKCk6IEhvc3RDb25maWc7XHJcblxyXG4gICAgcHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUocHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgcHJvcGVydHlWYWx1ZT86IGFueSk6IGFueSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gcHJvcGVydHlWYWx1ZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5nZXRWYWx1ZShwcm9wZXJ0eSkgOiBwcm9wZXJ0eVZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuYWxsb3dQcmVQcm9jZXNzaW5nUHJvcGVydHlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRPYmplY3Q6IENhcmRPYmplY3QgfCB1bmRlZmluZWQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRPYmplY3QgJiYgIWN1cnJlbnRPYmplY3Qub25QcmVQcm9jZXNzUHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudE9iamVjdCA9IGN1cnJlbnRPYmplY3QucGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudE9iamVjdCAmJiBjdXJyZW50T2JqZWN0Lm9uUHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50T2JqZWN0Lm9uUHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUodGhpcywgcHJvcGVydHksIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBhcmVudCh2YWx1ZTogQ2FyZE9iamVjdCB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNob3VsZEZhbGxiYWNrKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkRmFsbGJhY2sgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRGYWxsYmFjaygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2hvdWxkRmFsbGJhY2sgfHwgIXRoaXMucmVxdWlyZXMuYXJlQWxsTWV0KHRoaXMuaG9zdENvbmZpZy5ob3N0Q2FwYWJpbGl0aWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb290T2JqZWN0KCk6IENhcmRPYmplY3Qge1xyXG4gICAgICAgIGxldCByb290T2JqZWN0OiBDYXJkT2JqZWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgd2hpbGUgKHJvb3RPYmplY3QucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHJvb3RPYmplY3QgPSByb290T2JqZWN0LnBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb290T2JqZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRleHQuYWxsSWRzLmhhc093blByb3BlcnR5KHRoaXMuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5hbGxJZHNbdGhpcy5pZF0gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkR1cGxpY2F0ZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkR1cGxpY2F0ZSBJZDogXCIgKyB0aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFsbElkc1t0aGlzLmlkXSArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5hbGxJZHNbdGhpcy5pZF0gPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlUHJvcGVydGllcygpOiBWYWxpZGF0aW9uUmVzdWx0cyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBWYWxpZGF0aW9uUmVzdWx0cygpO1xyXG5cclxuICAgICAgICB0aGlzLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKHJlc3VsdCk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhcmVudCgpOiBDYXJkT2JqZWN0IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZW5kZXJlZEVsZW1lbnQoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuXHJcbi8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhlc2UgcmVhZG9ubHkgZmllbGRzIGFyZSBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZFxyXG4vLyBhIGJyZWFraW5nIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXHJcbi8vIGFuZCBhZG9wdCB0aGlzIHN5bnRheCBmb3IgYWxsIG90aGVyIHN0YXRpYyByZWFkb25seSBmaWVsZHMuXHJcbmV4cG9ydCBjbGFzcyBBY3Rpb25TdHlsZSB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRGVmYXVsdDogXCJkZWZhdWx0XCIgPSBcImRlZmF1bHRcIjtcclxuICAgIHN0YXRpYyByZWFkb25seSBQb3NpdGl2ZTogXCJwb3NpdGl2ZVwiID0gXCJwb3NpdGl2ZVwiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IERlc3RydWN0aXZlOiBcImRlc3RydWN0aXZlXCIgPSBcImRlc3RydWN0aXZlXCI7XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNpemUge1xyXG4gICAgQXV0byxcclxuICAgIFN0cmV0Y2gsXHJcbiAgICBTbWFsbCxcclxuICAgIE1lZGl1bSxcclxuICAgIExhcmdlXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEltYWdlU2l6ZSB7XHJcbiAgICBTbWFsbCxcclxuICAgIE1lZGl1bSxcclxuICAgIExhcmdlXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNpemVVbml0IHtcclxuICAgIFdlaWdodCxcclxuICAgIFBpeGVsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRleHRTaXplIHtcclxuICAgIFNtYWxsLFxyXG4gICAgRGVmYXVsdCxcclxuICAgIE1lZGl1bSxcclxuICAgIExhcmdlLFxyXG4gICAgRXh0cmFMYXJnZVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBUZXh0V2VpZ2h0IHtcclxuICAgIExpZ2h0ZXIsXHJcbiAgICBEZWZhdWx0LFxyXG4gICAgQm9sZGVyXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEZvbnRUeXBlIHtcclxuICAgIERlZmF1bHQsXHJcbiAgICBNb25vc3BhY2VcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU3BhY2luZyB7XHJcbiAgICBOb25lLFxyXG4gICAgU21hbGwsXHJcbiAgICBEZWZhdWx0LFxyXG4gICAgTWVkaXVtLFxyXG4gICAgTGFyZ2UsXHJcbiAgICBFeHRyYUxhcmdlLFxyXG4gICAgUGFkZGluZ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBUZXh0Q29sb3Ige1xyXG4gICAgRGVmYXVsdCxcclxuICAgIERhcmssXHJcbiAgICBMaWdodCxcclxuICAgIEFjY2VudCxcclxuICAgIEdvb2QsXHJcbiAgICBXYXJuaW5nLFxyXG4gICAgQXR0ZW50aW9uXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEhvcml6b250YWxBbGlnbm1lbnQge1xyXG4gICAgTGVmdCxcclxuICAgIENlbnRlcixcclxuICAgIFJpZ2h0XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFZlcnRpY2FsQWxpZ25tZW50IHtcclxuICAgIFRvcCxcclxuICAgIENlbnRlcixcclxuICAgIEJvdHRvbVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBBY3Rpb25BbGlnbm1lbnQge1xyXG4gICAgTGVmdCxcclxuICAgIENlbnRlcixcclxuICAgIFJpZ2h0LFxyXG4gICAgU3RyZXRjaFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBJbWFnZVN0eWxlIHtcclxuICAgIERlZmF1bHQsXHJcbiAgICBQZXJzb25cclxufVxyXG5cclxuZXhwb3J0IGVudW0gU2hvd0NhcmRBY3Rpb25Nb2RlIHtcclxuICAgIElubGluZSxcclxuICAgIFBvcHVwXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE9yaWVudGF0aW9uIHtcclxuICAgIEhvcml6b250YWwsXHJcbiAgICBWZXJ0aWNhbFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBGaWxsTW9kZSB7XHJcbiAgICBDb3ZlcixcclxuICAgIFJlcGVhdEhvcml6b250YWxseSxcclxuICAgIFJlcGVhdFZlcnRpY2FsbHksXHJcbiAgICBSZXBlYXRcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQWN0aW9uSWNvblBsYWNlbWVudCB7XHJcbiAgICBMZWZ0T2ZUaXRsZSxcclxuICAgIEFib3ZlVGl0bGVcclxufVxyXG5cclxuZXhwb3J0IGVudW0gSW5wdXRUZXh0U3R5bGUge1xyXG4gICAgVGV4dCxcclxuICAgIFRlbCxcclxuICAgIFVybCxcclxuICAgIEVtYWlsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIElucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eSB7XHJcbiAgICBPcHRpb25hbCxcclxuICAgIFJlcXVpcmVkLFxyXG4gICAgUmVxdWlyZWRXaXRoVmlzdWFsQ3VlXHJcbn1cclxuXHJcbi8qXHJcbiAgICBUaGlzIHNob3VsZCByZWFsbHkgYmUgYSBzdHJpbmcgZW51bSwgZS5nLlxyXG5cclxuICAgICAgICBleHBvcnQgZW51bSBDb250YWluZXJTdHlsZSB7XHJcbiAgICAgICAgICAgIERlZmF1bHQgPSBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgRW1waGFzaXMgPSBcImVtcGhhc2lzXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgSG93ZXZlciwgc29tZSBob3N0cyBkbyBub3QgdXNlIGEgdmVyc2lvbiBvZiBUeXBlU2NyaXB0XHJcbiAgICByZWNlbnQgZW5vdWdoIHRvIHVuZGVyc3RhbmQgc3RyaW5nIGVudW1zLiBUaGlzIGlzXHJcbiAgICBhIGNvbXBhdGlibGUgY29uc3RydWN0IHRoYXQgZG9lcyBub3QgcmVxdWlyZSB1c2luZ1xyXG4gICAgYSBtb3JlIHJlY2VudCB2ZXJzaW9uIG9mIFR5cGVTY3JpcHQuXHJcblxyXG4gICAgQWxzbyBub3RlIHRoZSBcIndlaXJkXCIgd2F5IHRoZXNlIHJlYWRvbmx5IGZpZWxkcyBhcmUgZGVjbGFyZWQgaXMgdG8gd29yayBhcm91bmRcclxuICAgIGEgYnJlYWtpbmcgY2hhbmdlIGludHJvZHVjZWQgaW4gVFMgMy4xIHdydCBkLnRzIGdlbmVyYXRpb24uIERPIE5PVCBDSEFOR0VcclxuICAgIGFuZCBhZG9wdCB0aGlzIHN5bnRheCBmb3IgYWxsIG90aGVyIHN0YXRpYyByZWFkb25seSBmaWVsZHMuXHJcbiovXHJcbmV4cG9ydCBjbGFzcyBDb250YWluZXJTdHlsZSB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRGVmYXVsdDogXCJkZWZhdWx0XCIgPSBcImRlZmF1bHRcIjtcclxuICAgIHN0YXRpYyByZWFkb25seSBFbXBoYXNpczogXCJlbXBoYXNpc1wiID0gXCJlbXBoYXNpc1wiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEFjY2VudDogXCJhY2NlbnRcIiA9IFwiYWNjZW50XCI7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgR29vZDogXCJnb29kXCIgPSBcImdvb2RcIjtcclxuICAgIHN0YXRpYyByZWFkb25seSBBdHRlbnRpb246IFwiYXR0ZW50aW9uXCIgPSBcImF0dGVudGlvblwiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFdhcm5pbmc6IFwid2FybmluZ1wiID0gXCJ3YXJuaW5nXCI7XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFZhbGlkYXRpb25QaGFzZSB7XHJcbiAgICBQYXJzZSxcclxuICAgIFRvSlNPTixcclxuICAgIFZhbGlkYXRpb25cclxufVxyXG5cclxuZXhwb3J0IGVudW0gVmFsaWRhdGlvbkV2ZW50IHtcclxuICAgIEhpbnQsXHJcbiAgICBBY3Rpb25UeXBlTm90QWxsb3dlZCxcclxuICAgIENvbGxlY3Rpb25DYW50QmVFbXB0eSxcclxuICAgIERlcHJlY2F0ZWQsXHJcbiAgICBFbGVtZW50VHlwZU5vdEFsbG93ZWQsXHJcbiAgICBJbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcclxuICAgIEludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgTWlzc2luZ0NhcmRUeXBlLFxyXG4gICAgUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgVG9vTWFueUFjdGlvbnMsXHJcbiAgICBVbmtub3duQWN0aW9uVHlwZSxcclxuICAgIFVua25vd25FbGVtZW50VHlwZSxcclxuICAgIFVuc3VwcG9ydGVkQ2FyZFZlcnNpb24sXHJcbiAgICBEdXBsaWNhdGVJZCxcclxuICAgIFVuc3VwcG9ydGVkUHJvcGVydHksXHJcbiAgICBPdGhlclxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb250YWluZXJGaXRTdGF0dXMge1xyXG4gICAgRnVsbHlJbkNvbnRhaW5lcixcclxuICAgIE92ZXJmbG93aW5nLFxyXG4gICAgRnVsbHlPdXRPZkNvbnRhaW5lclxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCB7IFRhcmdldFZlcnNpb24sIFZlcnNpb24sIFNlcmlhbGl6YWJsZU9iamVjdCwgQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0LCBQcm9wZXJ0eUJhZyB9IGZyb20gXCIuL3NlcmlhbGl6YXRpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIb3N0Q2FwYWJpbGl0aWVzIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcclxuICAgIHByaXZhdGUgX2NhcGFiaWxpdGllczogeyBba2V5OiBzdHJpbmddOiBUYXJnZXRWZXJzaW9uIH0gPSB7fTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiSG9zdENhcGFiaWxpdGllc1wiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBqc29uVmVyc2lvbiA9IHNvdXJjZVtuYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpzb25WZXJzaW9uID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25WZXJzaW9uID09IFwiKlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2FwYWJpbGl0eShuYW1lLCBcIipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmVyc2lvbiA9IFZlcnNpb24ucGFyc2UoanNvblZlcnNpb24sIGNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNpb24gJiYgdmVyc2lvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENhcGFiaWxpdHkobmFtZSwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsVG9KU09OKHRhcmdldDogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLl9jYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB0aGlzLl9jYXBhYmlsaXRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FwYWJpbGl0eShuYW1lOiBzdHJpbmcsIHZlcnNpb246IFRhcmdldFZlcnNpb24pIHtcclxuICAgICAgICB0aGlzLl9jYXBhYmlsaXRpZXNbbmFtZV0gPSB2ZXJzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUNhcGFiaWxpdHkobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuX2NhcGFiaWxpdGllc1tuYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jYXBhYmlsaXRpZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNDYXBhYmlsaXR5KG5hbWU6IHN0cmluZywgdmVyc2lvbjogVGFyZ2V0VmVyc2lvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXBhYmlsaXRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICAgICAgaWYgKHZlcnNpb24gPT0gXCIqXCIgfHwgdGhpcy5fY2FwYWJpbGl0aWVzW25hbWVdID09IFwiKlwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb24uY29tcGFyZVRvKDxWZXJzaW9uPnRoaXMuX2NhcGFiaWxpdGllc1tuYW1lXSkgPD0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBhcmVBbGxNZXQoaG9zdENhcGFiaWxpdGllczogSG9zdENhcGFiaWxpdGllcyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvciAobGV0IGNhcGFiaWxpdHlOYW1lIGluIHRoaXMuX2NhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICBpZiAoIWhvc3RDYXBhYmlsaXRpZXMuaGFzQ2FwYWJpbGl0eShjYXBhYmlsaXR5TmFtZSwgdGhpcy5fY2FwYWJpbGl0aWVzW2NhcGFiaWxpdHlOYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBFbnVtcyBmcm9tIFwiLi9lbnVtc1wiO1xyXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgKiBhcyBTaGFyZWQgZnJvbSBcIi4vc2hhcmVkXCI7XHJcbmltcG9ydCB7IEhvc3RDYXBhYmlsaXRpZXMgfSBmcm9tIFwiLi9ob3N0LWNhcGFiaWxpdGllc1wiO1xyXG5cclxuZnVuY3Rpb24gcGFyc2VIb3N0Q29uZmlnRW51bSh0YXJnZXRFbnVtOiB7IFtzOiBudW1iZXJdOiBzdHJpbmcgfSwgdmFsdWU6IHN0cmluZyB8IG51bWJlciwgZGVmYXVsdFZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGxldCBwYXJzZWRWYWx1ZSA9IFV0aWxzLnBhcnNlRW51bSh0YXJnZXRFbnVtLCB2YWx1ZSwgZGVmYXVsdFZhbHVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZFZhbHVlICE9PSB1bmRlZmluZWQgPyBwYXJzZWRWYWx1ZSA6IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb2xvckRlZmluaXRpb24ge1xyXG4gICAgZGVmYXVsdDogc3RyaW5nID0gXCIjMDAwMDAwXCI7XHJcbiAgICBzdWJ0bGU6IHN0cmluZyA9IFwiIzY2NjY2NlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRDb2xvcj86IHN0cmluZywgc3VidGxlQ29sb3I/OiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoZGVmYXVsdENvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IGRlZmF1bHRDb2xvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdWJ0bGVDb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnRsZSA9IHN1YnRsZUNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZShvYmo/OiBhbnkpIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG9ialtcImRlZmF1bHRcIl0gfHwgdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgICAgICB0aGlzLnN1YnRsZSA9IG9ialtcInN1YnRsZVwiXSB8fCB0aGlzLnN1YnRsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0Q29sb3JEZWZpbml0aW9uIGV4dGVuZHMgQ29sb3JEZWZpbml0aW9uIHtcclxuICAgIHJlYWRvbmx5IGhpZ2hsaWdodENvbG9ycyA9IG5ldyBDb2xvckRlZmluaXRpb24oXCIjMjIwMDAwMDBcIiwgXCIjMTEwMDAwMDBcIik7XHJcblxyXG4gICAgcGFyc2Uob2JqPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIucGFyc2Uob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodENvbG9ycy5wYXJzZShvYmpbXCJoaWdobGlnaHRDb2xvcnNcIl0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkYXB0aXZlQ2FyZENvbmZpZyB7XHJcbiAgICBhbGxvd0N1c3RvbVN0eWxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmFsbG93Q3VzdG9tU3R5bGUgPSBvYmpbXCJhbGxvd0N1c3RvbVN0eWxlXCJdIHx8IHRoaXMuYWxsb3dDdXN0b21TdHlsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZVNldENvbmZpZyB7XHJcbiAgICBpbWFnZVNpemU6IEVudW1zLlNpemUgPSBFbnVtcy5TaXplLk1lZGl1bTtcclxuICAgIG1heEltYWdlSGVpZ2h0OiBudW1iZXIgPSAxMDA7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlU2l6ZSA9IG9ialtcImltYWdlU2l6ZVwiXSAhPSBudWxsID8gb2JqW1wiaW1hZ2VTaXplXCJdIDogdGhpcy5pbWFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMubWF4SW1hZ2VIZWlnaHQgPSA8bnVtYmVyPlV0aWxzLnBhcnNlTnVtYmVyKG9ialtcIm1heEltYWdlSGVpZ2h0XCJdLCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW1hZ2VTaXplOiBFbnVtcy5TaXplW3RoaXMuaW1hZ2VTaXplXSxcclxuICAgICAgICAgICAgbWF4SW1hZ2VIZWlnaHQ6IHRoaXMubWF4SW1hZ2VIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZWRpYUNvbmZpZyB7XHJcbiAgICBkZWZhdWx0UG9zdGVyPzogc3RyaW5nO1xyXG4gICAgYWxsb3dJbmxpbmVQbGF5YmFjazogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRQb3N0ZXIgPSBvYmpbXCJkZWZhdWx0UG9zdGVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmFsbG93SW5saW5lUGxheWJhY2sgPSBvYmpbXCJhbGxvd0lubGluZVBsYXliYWNrXCJdIHx8IHRoaXMuYWxsb3dJbmxpbmVQbGF5YmFjaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHRQb3N0ZXI6IHRoaXMuZGVmYXVsdFBvc3RlcixcclxuICAgICAgICAgICAgYWxsb3dJbmxpbmVQbGF5YmFjazogdGhpcy5hbGxvd0lubGluZVBsYXliYWNrXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjdFRleHREZWZpbml0aW9uIHtcclxuICAgIHNpemU6IEVudW1zLlRleHRTaXplID0gRW51bXMuVGV4dFNpemUuRGVmYXVsdDtcclxuICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IgPSBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdDs7XHJcbiAgICBpc1N1YnRsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgd2VpZ2h0OiBFbnVtcy5UZXh0V2VpZ2h0ID0gRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0O1xyXG4gICAgd3JhcDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRTaXplLCBvYmpbXCJzaXplXCJdLCBFbnVtcy5UZXh0U2l6ZS5EZWZhdWx0KTtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IHBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuVGV4dENvbG9yLCBvYmpbXCJjb2xvclwiXSwgRW51bXMuVGV4dENvbG9yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLmlzU3VidGxlID0gb2JqW1wiaXNTdWJ0bGVcIl0gfHwgdGhpcy5pc1N1YnRsZTtcclxuICAgICAgICAgICAgdGhpcy53ZWlnaHQgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRXZWlnaHQsIG9ialtcIndlaWdodFwiXSwgdGhpcy5nZXREZWZhdWx0V2VpZ2h0KCkpO1xyXG4gICAgICAgICAgICB0aGlzLndyYXAgPSBvYmpbXCJ3cmFwXCJdICE9IG51bGwgPyBvYmpbXCJ3cmFwXCJdIDogdGhpcy53cmFwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXREZWZhdWx0V2VpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiBFbnVtcy5UZXh0V2VpZ2h0LkRlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemVbdGhpcy5zaXplXSxcclxuICAgICAgICAgICAgY29sb3I6IEVudW1zLlRleHRDb2xvclt0aGlzLmNvbG9yXSxcclxuICAgICAgICAgICAgaXNTdWJ0bGU6IHRoaXMuaXNTdWJ0bGUsXHJcbiAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodFt0aGlzLndlaWdodF0sXHJcbiAgICAgICAgICAgIHdyYXA6IHRoaXMud3JhcFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZhY3RUaXRsZURlZmluaXRpb24gZXh0ZW5kcyBGYWN0VGV4dERlZmluaXRpb24ge1xyXG4gICAgbWF4V2lkdGg/OiBudW1iZXIgPSAxNTA7XHJcbiAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQgPSBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4V2lkdGggPSBvYmpbXCJtYXhXaWR0aFwiXSAhPSBudWxsID8gb2JqW1wibWF4V2lkdGhcIl0gOiB0aGlzLm1heFdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLndlaWdodCA9IHBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuVGV4dFdlaWdodCwgb2JqW1wid2VpZ2h0XCJdLCBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldERlZmF1bHRXZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjdFNldENvbmZpZyB7XHJcbiAgICByZWFkb25seSB0aXRsZTogRmFjdFRpdGxlRGVmaW5pdGlvbiA9IG5ldyBGYWN0VGl0bGVEZWZpbml0aW9uKCk7XHJcbiAgICByZWFkb25seSB2YWx1ZTogRmFjdFRleHREZWZpbml0aW9uID0gbmV3IEZhY3RUZXh0RGVmaW5pdGlvbigpO1xyXG4gICAgc3BhY2luZzogbnVtYmVyID0gMTA7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlID0gbmV3IEZhY3RUaXRsZURlZmluaXRpb24ob2JqW1widGl0bGVcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEZhY3RUZXh0RGVmaW5pdGlvbihvYmpbXCJ2YWx1ZVwiXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nICE9IG51bGwgPyBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZyA6IHRoaXMuc3BhY2luZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaG93Q2FyZEFjdGlvbkNvbmZpZyB7XHJcbiAgICBhY3Rpb25Nb2RlOiBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGUgPSBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGUuSW5saW5lO1xyXG4gICAgaW5saW5lVG9wTWFyZ2luOiBudW1iZXIgPSAxNjtcclxuICAgIHN0eWxlPzogc3RyaW5nID0gRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1vZGUgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZSwgb2JqW1wiYWN0aW9uTW9kZVwiXSwgRW51bXMuU2hvd0NhcmRBY3Rpb25Nb2RlLklubGluZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5saW5lVG9wTWFyZ2luID0gb2JqW1wiaW5saW5lVG9wTWFyZ2luXCJdICE9IG51bGwgPyBvYmpbXCJpbmxpbmVUb3BNYXJnaW5cIl0gOiB0aGlzLmlubGluZVRvcE1hcmdpbjtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG9ialtcInN0eWxlXCJdICYmIHR5cGVvZiBvYmpbXCJzdHlsZVwiXSA9PT0gXCJzdHJpbmdcIiA/IG9ialtcInN0eWxlXCJdIDogRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY3Rpb25Nb2RlOiBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGVbdGhpcy5hY3Rpb25Nb2RlXSxcclxuICAgICAgICAgICAgaW5saW5lVG9wTWFyZ2luOiB0aGlzLmlubGluZVRvcE1hcmdpbixcclxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuc3R5bGVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBY3Rpb25zQ29uZmlnIHtcclxuICAgIG1heEFjdGlvbnM6IG51bWJlciA9IDU7XHJcbiAgICBzcGFjaW5nOiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5EZWZhdWx0O1xyXG4gICAgYnV0dG9uU3BhY2luZzogbnVtYmVyID0gMjA7XHJcbiAgICByZWFkb25seSBzaG93Q2FyZDogU2hvd0NhcmRBY3Rpb25Db25maWcgPSBuZXcgU2hvd0NhcmRBY3Rpb25Db25maWcoKTtcclxuICAgIHByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uPzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgYWN0aW9uc09yaWVudGF0aW9uOiBFbnVtcy5PcmllbnRhdGlvbiA9IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWw7XHJcbiAgICBhY3Rpb25BbGlnbm1lbnQ6IEVudW1zLkFjdGlvbkFsaWdubWVudCA9IEVudW1zLkFjdGlvbkFsaWdubWVudC5MZWZ0O1xyXG4gICAgaWNvblBsYWNlbWVudDogRW51bXMuQWN0aW9uSWNvblBsYWNlbWVudCA9IEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQuTGVmdE9mVGl0bGU7XHJcbiAgICBhbGxvd1RpdGxlVG9XcmFwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBpY29uU2l6ZTogbnVtYmVyID0gMTY7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLm1heEFjdGlvbnMgPSBvYmpbXCJtYXhBY3Rpb25zXCJdICE9IG51bGwgPyBvYmpbXCJtYXhBY3Rpb25zXCJdIDogdGhpcy5tYXhBY3Rpb25zO1xyXG4gICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlNwYWNpbmcsIG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nLCBFbnVtcy5TcGFjaW5nLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvblNwYWNpbmcgPSBvYmpbXCJidXR0b25TcGFjaW5nXCJdICE9IG51bGwgPyBvYmpbXCJidXR0b25TcGFjaW5nXCJdIDogdGhpcy5idXR0b25TcGFjaW5nO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkID0gbmV3IFNob3dDYXJkQWN0aW9uQ29uZmlnKG9ialtcInNob3dDYXJkXCJdKTtcclxuICAgICAgICAgICAgdGhpcy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbiA9IFV0aWxzLnBhcnNlQm9vbChvYmpbXCJwcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvblwiXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNPcmllbnRhdGlvbiA9IHBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuT3JpZW50YXRpb24sIG9ialtcImFjdGlvbnNPcmllbnRhdGlvblwiXSwgRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uQWxpZ25tZW50ID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5BY3Rpb25BbGlnbm1lbnQsIG9ialtcImFjdGlvbkFsaWdubWVudFwiXSwgRW51bXMuQWN0aW9uQWxpZ25tZW50LkxlZnQpO1xyXG4gICAgICAgICAgICB0aGlzLmljb25QbGFjZW1lbnQgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQsIG9ialtcImljb25QbGFjZW1lbnRcIl0sIEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQuTGVmdE9mVGl0bGUpO1xyXG4gICAgICAgICAgICB0aGlzLmFsbG93VGl0bGVUb1dyYXAgPSBvYmpbXCJhbGxvd1RpdGxlVG9XcmFwXCJdICE9IG51bGwgPyBvYmpbXCJhbGxvd1RpdGxlVG9XcmFwXCJdIDogdGhpcy5hbGxvd1RpdGxlVG9XcmFwO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCBzaXplQW5kVW5pdCA9IFNoYXJlZC5TaXplQW5kVW5pdC5wYXJzZShvYmpbXCJpY29uU2l6ZVwiXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNpemVBbmRVbml0LnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuUGl4ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmljb25TaXplID0gc2l6ZUFuZFVuaXQucGh5c2ljYWxTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTd2FsbG93IHRoaXMsIGtlZXAgZGVmYXVsdCBpY29uIHNpemVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWF4QWN0aW9uczogdGhpcy5tYXhBY3Rpb25zLFxyXG4gICAgICAgICAgICBzcGFjaW5nOiBFbnVtcy5TcGFjaW5nW3RoaXMuc3BhY2luZ10sXHJcbiAgICAgICAgICAgIGJ1dHRvblNwYWNpbmc6IHRoaXMuYnV0dG9uU3BhY2luZyxcclxuICAgICAgICAgICAgc2hvd0NhcmQ6IHRoaXMuc2hvd0NhcmQsXHJcbiAgICAgICAgICAgIHByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uOiB0aGlzLnByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uLFxyXG4gICAgICAgICAgICBhY3Rpb25zT3JpZW50YXRpb246IEVudW1zLk9yaWVudGF0aW9uW3RoaXMuYWN0aW9uc09yaWVudGF0aW9uXSxcclxuICAgICAgICAgICAgYWN0aW9uQWxpZ25tZW50OiBFbnVtcy5BY3Rpb25BbGlnbm1lbnRbdGhpcy5hY3Rpb25BbGlnbm1lbnRdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sb3JTZXREZWZpbml0aW9uIHtcclxuICAgIHByaXZhdGUgcGFyc2VTaW5nbGVDb2xvcihvYmo6IGFueSwgcHJvcGVydHlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgICgoPGFueT50aGlzKVtwcm9wZXJ0eU5hbWVdIGFzIFRleHRDb2xvckRlZmluaXRpb24pLnBhcnNlKG9ialtwcm9wZXJ0eU5hbWVdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVmYXVsdDogVGV4dENvbG9yRGVmaW5pdGlvbiA9IG5ldyBUZXh0Q29sb3JEZWZpbml0aW9uKCk7XHJcbiAgICBkYXJrOiBUZXh0Q29sb3JEZWZpbml0aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgIGxpZ2h0OiBUZXh0Q29sb3JEZWZpbml0aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgIGFjY2VudDogVGV4dENvbG9yRGVmaW5pdGlvbiA9IG5ldyBUZXh0Q29sb3JEZWZpbml0aW9uKCk7XHJcbiAgICBnb29kOiBUZXh0Q29sb3JEZWZpbml0aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgIHdhcm5pbmc6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xyXG4gICAgYXR0ZW50aW9uOiBUZXh0Q29sb3JEZWZpbml0aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLnBhcnNlKG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2Uob2JqOiBhbnkpIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZGVmYXVsdFwiKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNpbmdsZUNvbG9yKG9iaiwgXCJkYXJrXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcImxpZ2h0XCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcImFjY2VudFwiKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNpbmdsZUNvbG9yKG9iaiwgXCJnb29kXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcIndhcm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiYXR0ZW50aW9uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbiB7XHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XHJcblxyXG4gICAgcmVhZG9ubHkgZm9yZWdyb3VuZENvbG9yczogQ29sb3JTZXREZWZpbml0aW9uID0gbmV3IENvbG9yU2V0RGVmaW5pdGlvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFwiOiB7IGRlZmF1bHQ6IFwiIzMzMzMzM1wiLCBzdWJ0bGU6IFwiI0VFMzMzMzMzXCIgfSxcclxuICAgICAgICAgICAgXCJkYXJrXCI6IHsgZGVmYXVsdDogXCIjMDAwMDAwXCIsIHN1YnRsZTogXCIjNjYwMDAwMDBcIiB9LFxyXG4gICAgICAgICAgICBcImxpZ2h0XCI6IHsgZGVmYXVsdDogXCIjRkZGRkZGXCIsIHN1YnRsZTogXCIjMzMwMDAwMDBcIiB9LFxyXG4gICAgICAgICAgICBcImFjY2VudFwiOiB7IGRlZmF1bHQ6IFwiIzJFODlGQ1wiLCBzdWJ0bGU6IFwiIzg4MkU4OUZDXCIgfSxcclxuICAgICAgICAgICAgXCJnb29kXCI6IHsgZGVmYXVsdDogXCIjMDI4QTAyXCIsIHN1YnRsZTogXCIjREQwMjc1MDJcIiB9LFxyXG4gICAgICAgICAgICBcIndhcm5pbmdcIjogeyBkZWZhdWx0OiBcIiNFNjk1MDBcIiwgc3VidGxlOiBcIiNEREU2OTUwMFwiIH0sXHJcbiAgICAgICAgICAgIFwiYXR0ZW50aW9uXCI6IHsgZGVmYXVsdDogXCIjQ0MzMzAwXCIsIHN1YnRsZTogXCIjRERDQzMzMDBcIiB9XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBoaWdobGlnaHRCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XHJcbiAgICBoaWdobGlnaHRGb3JlZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XHJcblxyXG4gICAgcGFyc2Uob2JqOiBhbnkpIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gb2JqW1wiYmFja2dyb3VuZENvbG9yXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3JlZ3JvdW5kQ29sb3JzLnBhcnNlKG9ialtcImZvcmVncm91bmRDb2xvcnNcIl0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRCYWNrZ3JvdW5kQ29sb3IgPSBvYmpbXCJoaWdobGlnaHRCYWNrZ3JvdW5kQ29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yID0gb2JqW1wiaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yXCJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLnBhcnNlKG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzQnVpbHRJbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24gZXh0ZW5kcyBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xyXG4gICAgZ2V0IGlzQnVpbHRJbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTGluZUhlaWdodERlZmluaXRpb25zIHtcclxuICAgIHNtYWxsOiBudW1iZXI7XHJcbiAgICBtZWRpdW06IG51bWJlcjtcclxuICAgIGRlZmF1bHQ6IG51bWJlcjtcclxuICAgIGxhcmdlOiBudW1iZXI7XHJcbiAgICBleHRyYUxhcmdlOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb250YWluZXJTdHlsZVNldCB7XHJcbiAgICBwcml2YXRlIF9hbGxTdHlsZXM6IHsgW2tleTogc3RyaW5nXTogQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIH0gPSB7fTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF0gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpc10gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuR29vZF0gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb25dID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuV2FybmluZ10gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG5cclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0XS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXNdLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpc10pO1xyXG4gICAgICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuQWNjZW50XS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuQWNjZW50XSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5Hb29kXS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuR29vZF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuQXR0ZW50aW9uXS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuQXR0ZW50aW9uXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5XYXJuaW5nXS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuV2FybmluZ10pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tU3R5bGVBcnJheSA9IG9ialtcImN1c3RvbVN0eWxlc1wiXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXN0b21TdHlsZUFycmF5ICYmIEFycmF5LmlzQXJyYXkoY3VzdG9tU3R5bGVBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGN1c3RvbVN0eWxlIG9mIGN1c3RvbVN0eWxlQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlTmFtZSA9IGN1c3RvbVN0eWxlW1wibmFtZVwiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZU5hbWUgJiYgdHlwZW9mIHN0eWxlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsbFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW3N0eWxlTmFtZV0ucGFyc2UoY3VzdG9tU3R5bGVbXCJzdHlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbGxTdHlsZXNbc3R5bGVOYW1lXSA9IG5ldyBDb250YWluZXJTdHlsZURlZmluaXRpb24oY3VzdG9tU3R5bGVbXCJzdHlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGxldCBjdXN0b21TdHlsZUFycmF5OiBhbnlbXSA9IFtdO1xyXG5cclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLl9hbGxTdHlsZXMpLmZvckVhY2goXHJcbiAgICAgICAgICAgIChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYWxsU3R5bGVzW2tleV0uaXNCdWlsdEluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tU3R5bGVBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5fYWxsU3R5bGVzW2tleV1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQ6IGFueSA9IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogdGhpcy5kZWZhdWx0LFxyXG4gICAgICAgICAgICBlbXBoYXNpczogdGhpcy5lbXBoYXNpc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGN1c3RvbVN0eWxlQXJyYXkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQuY3VzdG9tU3R5bGVzID0gY3VzdG9tU3R5bGVBcnJheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3R5bGVCeU5hbWUobmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBkZWZhdWx0VmFsdWU/OiBDb250YWluZXJTdHlsZURlZmluaXRpb24pOiBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xyXG4gICAgICAgIGlmIChuYW1lICYmIHRoaXMuX2FsbFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWxsU3R5bGVzW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSA/IGRlZmF1bHRWYWx1ZSA6IHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRlZmF1bHQoKTogQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHRdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbXBoYXNpcygpOiBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXNdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGb250U2l6ZURlZmluaXRpb25zIHtcclxuICAgIHNtYWxsOiBudW1iZXI7XHJcbiAgICBkZWZhdWx0OiBudW1iZXI7XHJcbiAgICBtZWRpdW06IG51bWJlcjtcclxuICAgIGxhcmdlOiBudW1iZXI7XHJcbiAgICBleHRyYUxhcmdlOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZvbnRXZWlnaHREZWZpbml0aW9ucyB7XHJcbiAgICBsaWdodGVyOiBudW1iZXI7XHJcbiAgICBkZWZhdWx0OiBudW1iZXI7XHJcbiAgICBib2xkZXI6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZvbnRUeXBlRGVmaW5pdGlvbiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbW9ub3NwYWNlID0gbmV3IEZvbnRUeXBlRGVmaW5pdGlvbihcIidDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZVwiKTtcclxuXHJcbiAgICBmb250RmFtaWx5Pzogc3RyaW5nID0gXCJTZWdvZSBVSSxTZWdvZSxTZWdvZSBXUCxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwiO1xyXG5cclxuICAgIGZvbnRTaXplczogSUZvbnRTaXplRGVmaW5pdGlvbnMgPSB7XHJcbiAgICAgICAgc21hbGw6IDEyLFxyXG4gICAgICAgIGRlZmF1bHQ6IDE0LFxyXG4gICAgICAgIG1lZGl1bTogMTcsXHJcbiAgICAgICAgbGFyZ2U6IDIxLFxyXG4gICAgICAgIGV4dHJhTGFyZ2U6IDI2XHJcbiAgICB9O1xyXG5cclxuICAgIGZvbnRXZWlnaHRzOiBJRm9udFdlaWdodERlZmluaXRpb25zID0ge1xyXG4gICAgICAgIGxpZ2h0ZXI6IDIwMCxcclxuICAgICAgICBkZWZhdWx0OiA0MDAsXHJcbiAgICAgICAgYm9sZGVyOiA2MDBcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoZm9udEZhbWlseT86IHN0cmluZykge1xyXG4gICAgICAgIGlmIChmb250RmFtaWx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9udEZhbWlseSA9IGZvbnRGYW1pbHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlKG9iaj86IGFueSkge1xyXG4gICAgICAgIHRoaXMuZm9udEZhbWlseSA9IG9ialtcImZvbnRGYW1pbHlcIl0gfHwgdGhpcy5mb250RmFtaWx5O1xyXG4gICAgICAgIHRoaXMuZm9udFNpemVzID0ge1xyXG4gICAgICAgICAgICBzbWFsbDogb2JqLmZvbnRTaXplcyAmJiBvYmouZm9udFNpemVzW1wic21hbGxcIl0gfHwgdGhpcy5mb250U2l6ZXMuc21hbGwsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5mb250U2l6ZXMgJiYgb2JqLmZvbnRTaXplc1tcImRlZmF1bHRcIl0gfHwgdGhpcy5mb250U2l6ZXMuZGVmYXVsdCxcclxuICAgICAgICAgICAgbWVkaXVtOiBvYmouZm9udFNpemVzICYmIG9iai5mb250U2l6ZXNbXCJtZWRpdW1cIl0gfHwgdGhpcy5mb250U2l6ZXMubWVkaXVtLFxyXG4gICAgICAgICAgICBsYXJnZTogb2JqLmZvbnRTaXplcyAmJiBvYmouZm9udFNpemVzW1wibGFyZ2VcIl0gfHwgdGhpcy5mb250U2l6ZXMubGFyZ2UsXHJcbiAgICAgICAgICAgIGV4dHJhTGFyZ2U6IG9iai5mb250U2l6ZXMgJiYgb2JqLmZvbnRTaXplc1tcImV4dHJhTGFyZ2VcIl0gfHwgdGhpcy5mb250U2l6ZXMuZXh0cmFMYXJnZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb250V2VpZ2h0cyA9IHtcclxuICAgICAgICAgICAgbGlnaHRlcjogb2JqLmZvbnRXZWlnaHRzICYmIG9iai5mb250V2VpZ2h0c1tcImxpZ2h0ZXJcIl0gfHwgdGhpcy5mb250V2VpZ2h0cy5saWdodGVyLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBvYmouZm9udFdlaWdodHMgJiYgb2JqLmZvbnRXZWlnaHRzW1wiZGVmYXVsdFwiXSB8fCB0aGlzLmZvbnRXZWlnaHRzLmRlZmF1bHQsXHJcbiAgICAgICAgICAgIGJvbGRlcjogb2JqLmZvbnRXZWlnaHRzICYmIG9iai5mb250V2VpZ2h0c1tcImJvbGRlclwiXSB8fCB0aGlzLmZvbnRXZWlnaHRzLmJvbGRlclxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGb250VHlwZVNldCB7XHJcbiAgICBkZWZhdWx0OiBGb250VHlwZURlZmluaXRpb247XHJcbiAgICBtb25vc3BhY2U6IEZvbnRUeXBlRGVmaW5pdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5tb25vc3BhY2UgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKFwiJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlXCIpO1xyXG5cclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdC5wYXJzZShvYmpbXCJkZWZhdWx0XCJdKTtcclxuICAgICAgICAgICAgdGhpcy5tb25vc3BhY2UucGFyc2Uob2JqW1wibW9ub3NwYWNlXCJdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3R5bGVEZWZpbml0aW9uKHN0eWxlOiBFbnVtcy5Gb250VHlwZSB8IHVuZGVmaW5lZCk6IEZvbnRUeXBlRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgc3dpdGNoIChzdHlsZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLkZvbnRUeXBlLk1vbm9zcGFjZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vbm9zcGFjZTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5Gb250VHlwZS5EZWZhdWx0OlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIb3N0Q29uZmlnIHtcclxuICAgIHJlYWRvbmx5IGhvc3RDYXBhYmlsaXRpZXMgPSBuZXcgSG9zdENhcGFiaWxpdGllcygpO1xyXG5cclxuICAgIHByaXZhdGUgX2xlZ2FjeUZvbnRUeXBlOiBGb250VHlwZURlZmluaXRpb247XHJcblxyXG4gICAgY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvcjogc3RyaW5nID0gXCIsXCI7XHJcbiAgICBzdXBwb3J0c0ludGVyYWN0aXZpdHk6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgbGluZUhlaWdodHM/OiBJTGluZUhlaWdodERlZmluaXRpb25zO1xyXG4gICAgZm9udFR5cGVzPzogRm9udFR5cGVTZXQ7XHJcblxyXG4gICAgcmVhZG9ubHkgc3BhY2luZyA9IHtcclxuICAgICAgICBzbWFsbDogMyxcclxuICAgICAgICBkZWZhdWx0OiA4LFxyXG4gICAgICAgIG1lZGl1bTogMjAsXHJcbiAgICAgICAgbGFyZ2U6IDMwLFxyXG4gICAgICAgIGV4dHJhTGFyZ2U6IDQwLFxyXG4gICAgICAgIHBhZGRpbmc6IDE1XHJcbiAgICB9O1xyXG5cclxuICAgIHJlYWRvbmx5IHNlcGFyYXRvciA9IHtcclxuICAgICAgICBsaW5lVGhpY2tuZXNzOiAxLFxyXG4gICAgICAgIGxpbmVDb2xvcjogXCIjRUVFRUVFXCJcclxuICAgIH07XHJcblxyXG4gICAgcmVhZG9ubHkgaW1hZ2VTaXplcyA9IHtcclxuICAgICAgICBzbWFsbDogNDAsXHJcbiAgICAgICAgbWVkaXVtOiA4MCxcclxuICAgICAgICBsYXJnZTogMTYwXHJcbiAgICB9O1xyXG5cclxuICAgIHJlYWRvbmx5IGNvbnRhaW5lclN0eWxlczogQ29udGFpbmVyU3R5bGVTZXQgPSBuZXcgQ29udGFpbmVyU3R5bGVTZXQoKTtcclxuICAgIHJlYWRvbmx5IGFjdGlvbnM6IEFjdGlvbnNDb25maWcgPSBuZXcgQWN0aW9uc0NvbmZpZygpO1xyXG4gICAgcmVhZG9ubHkgYWRhcHRpdmVDYXJkOiBBZGFwdGl2ZUNhcmRDb25maWcgPSBuZXcgQWRhcHRpdmVDYXJkQ29uZmlnKCk7XHJcbiAgICByZWFkb25seSBpbWFnZVNldDogSW1hZ2VTZXRDb25maWcgPSBuZXcgSW1hZ2VTZXRDb25maWcoKTtcclxuICAgIHJlYWRvbmx5IG1lZGlhOiBNZWRpYUNvbmZpZyA9IG5ldyBNZWRpYUNvbmZpZygpO1xyXG4gICAgcmVhZG9ubHkgZmFjdFNldDogRmFjdFNldENvbmZpZyA9IG5ldyBGYWN0U2V0Q29uZmlnKCk7XHJcblxyXG4gICAgY3NzQ2xhc3NOYW1lUHJlZml4Pzogc3RyaW5nO1xyXG4gICAgYWx3YXlzQWxsb3dCbGVlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCIgfHwgb2JqIGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKG9iaiBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3IgPSAob2JqICYmIHR5cGVvZiBvYmpbXCJjaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yXCJdID09PSBcInN0cmluZ1wiKSA/IG9ialtcImNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3JcIl0gOiB0aGlzLmNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3I7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNJbnRlcmFjdGl2aXR5ID0gKG9iaiAmJiB0eXBlb2Ygb2JqW1wic3VwcG9ydHNJbnRlcmFjdGl2aXR5XCJdID09PSBcImJvb2xlYW5cIikgPyBvYmpbXCJzdXBwb3J0c0ludGVyYWN0aXZpdHlcIl0gOiB0aGlzLnN1cHBvcnRzSW50ZXJhY3Rpdml0eTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2xlZ2FjeUZvbnRUeXBlID0gbmV3IEZvbnRUeXBlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZS5wYXJzZShvYmopO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9iai5mb250VHlwZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9udFR5cGVzID0gbmV3IEZvbnRUeXBlU2V0KG9iai5mb250VHlwZXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqLmxpbmVIZWlnaHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHRzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNtYWxsOiBvYmoubGluZUhlaWdodHNbXCJzbWFsbFwiXSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBvYmoubGluZUhlaWdodHNbXCJkZWZhdWx0XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogb2JqLmxpbmVIZWlnaHRzW1wibWVkaXVtXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhcmdlOiBvYmoubGluZUhlaWdodHNbXCJsYXJnZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYUxhcmdlOiBvYmoubGluZUhlaWdodHNbXCJleHRyYUxhcmdlXCJdXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbWFnZVNpemVzID0ge1xyXG4gICAgICAgICAgICAgICAgc21hbGw6IG9iai5pbWFnZVNpemVzICYmIG9iai5pbWFnZVNpemVzW1wic21hbGxcIl0gfHwgdGhpcy5pbWFnZVNpemVzLnNtYWxsLFxyXG4gICAgICAgICAgICAgICAgbWVkaXVtOiBvYmouaW1hZ2VTaXplcyAmJiBvYmouaW1hZ2VTaXplc1tcIm1lZGl1bVwiXSB8fCB0aGlzLmltYWdlU2l6ZXMubWVkaXVtLFxyXG4gICAgICAgICAgICAgICAgbGFyZ2U6IG9iai5pbWFnZVNpemVzICYmIG9iai5pbWFnZVNpemVzW1wibGFyZ2VcIl0gfHwgdGhpcy5pbWFnZVNpemVzLmxhcmdlLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZXMgPSBuZXcgQ29udGFpbmVyU3R5bGVTZXQob2JqW1wiY29udGFpbmVyU3R5bGVzXCJdKTtcclxuICAgICAgICAgICAgdGhpcy5zcGFjaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgc21hbGw6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wic21hbGxcIl0gfHwgdGhpcy5zcGFjaW5nLnNtYWxsLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJkZWZhdWx0XCJdIHx8IHRoaXMuc3BhY2luZy5kZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgbWVkaXVtOiBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZ1tcIm1lZGl1bVwiXSB8fCB0aGlzLnNwYWNpbmcubWVkaXVtLFxyXG4gICAgICAgICAgICAgICAgbGFyZ2U6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wibGFyZ2VcIl0gfHwgdGhpcy5zcGFjaW5nLmxhcmdlLFxyXG4gICAgICAgICAgICAgICAgZXh0cmFMYXJnZTogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJleHRyYUxhcmdlXCJdIHx8IHRoaXMuc3BhY2luZy5leHRyYUxhcmdlLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJwYWRkaW5nXCJdIHx8IHRoaXMuc3BhY2luZy5wYWRkaW5nXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlcGFyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IG9iai5zZXBhcmF0b3IgJiYgb2JqLnNlcGFyYXRvcltcImxpbmVUaGlja25lc3NcIl0gfHwgdGhpcy5zZXBhcmF0b3IubGluZVRoaWNrbmVzcyxcclxuICAgICAgICAgICAgICAgIGxpbmVDb2xvcjogb2JqLnNlcGFyYXRvciAmJiBvYmouc2VwYXJhdG9yW1wibGluZUNvbG9yXCJdIHx8IHRoaXMuc2VwYXJhdG9yLmxpbmVDb2xvclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMgPSBuZXcgQWN0aW9uc0NvbmZpZyhvYmouYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmFkYXB0aXZlQ2FyZCA9IG5ldyBBZGFwdGl2ZUNhcmRDb25maWcob2JqLmFkYXB0aXZlQ2FyZCB8fCB0aGlzLmFkYXB0aXZlQ2FyZCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTZXQgPSBuZXcgSW1hZ2VTZXRDb25maWcob2JqW1wiaW1hZ2VTZXRcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLmZhY3RTZXQgPSBuZXcgRmFjdFNldENvbmZpZyhvYmpbXCJmYWN0U2V0XCJdKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRGb250VHlwZURlZmluaXRpb24oc3R5bGU/OiBFbnVtcy5Gb250VHlwZSk6IEZvbnRUeXBlRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZm9udFR5cGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvbnRUeXBlcy5nZXRTdHlsZURlZmluaXRpb24oc3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlID09IEVudW1zLkZvbnRUeXBlLk1vbm9zcGFjZSA/IEZvbnRUeXBlRGVmaW5pdGlvbi5tb25vc3BhY2UgOiB0aGlzLl9sZWdhY3lGb250VHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RWZmZWN0aXZlU3BhY2luZyhzcGFjaW5nOiBFbnVtcy5TcGFjaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBzd2l0Y2ggKHNwYWNpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5zbWFsbDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLm1lZGl1bTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkxhcmdlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5sYXJnZTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkV4dHJhTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLmV4dHJhTGFyZ2U7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5QYWRkaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5wYWRkaW5nO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhZGRpbmdEZWZpbml0aW9uVG9TcGFjaW5nRGVmaW5pdGlvbihwYWRkaW5nRGVmaW5pdGlvbjogU2hhcmVkLlBhZGRpbmdEZWZpbml0aW9uKTogU2hhcmVkLlNwYWNpbmdEZWZpbml0aW9uIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNoYXJlZC5TcGFjaW5nRGVmaW5pdGlvbihcclxuICAgICAgICAgICAgdGhpcy5nZXRFZmZlY3RpdmVTcGFjaW5nKHBhZGRpbmdEZWZpbml0aW9uLnRvcCksXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RWZmZWN0aXZlU3BhY2luZyhwYWRkaW5nRGVmaW5pdGlvbi5yaWdodCksXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RWZmZWN0aXZlU3BhY2luZyhwYWRkaW5nRGVmaW5pdGlvbi5ib3R0b20pLFxyXG4gICAgICAgICAgICB0aGlzLmdldEVmZmVjdGl2ZVNwYWNpbmcocGFkZGluZ0RlZmluaXRpb24ubGVmdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VDc3NDbGFzc05hbWVzKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNsYXNzTmFtZSBvZiBjbGFzc05hbWVzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKCh0aGlzLmNzc0NsYXNzTmFtZVByZWZpeCA/IHRoaXMuY3NzQ2xhc3NOYW1lUHJlZml4ICsgXCItXCIgOiBcIlwiKSArIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VDc3NDbGFzc05hbWUoLi4uY2xhc3NOYW1lczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLm1ha2VDc3NDbGFzc05hbWVzKC4uLmNsYXNzTmFtZXMpLmpvaW4oXCIgXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0IDogXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udEZhbWlseSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250RmFtaWx5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb250RmFtaWx5KHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250RmFtaWx5ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZvbnRTaXplcygpOiBJRm9udFNpemVEZWZpbml0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLmZvbnRTaXplcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udFdlaWdodHMoKTogSUZvbnRXZWlnaHREZWZpbml0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLmZvbnRXZWlnaHRzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdEhvc3RDb25maWc6IEhvc3RDb25maWcgPSBuZXcgSG9zdENvbmZpZyhcclxuICAgIHtcclxuICAgICAgICBzdXBwb3J0c0ludGVyYWN0aXZpdHk6IHRydWUsXHJcbiAgICAgICAgc3BhY2luZzoge1xyXG4gICAgICAgICAgICBzbWFsbDogMTAsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDIwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDMwLFxyXG4gICAgICAgICAgICBsYXJnZTogNDAsXHJcbiAgICAgICAgICAgIGV4dHJhTGFyZ2U6IDUwLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VwYXJhdG9yOiB7XHJcbiAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IDEsXHJcbiAgICAgICAgICAgIGxpbmVDb2xvcjogXCIjRUVFRUVFXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvbnRUeXBlczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBcIidTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmXCIsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbWFsbDogMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogMTQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaXVtOiAxNyxcclxuICAgICAgICAgICAgICAgICAgICBsYXJnZTogMjEsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFMYXJnZTogMjZcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0czoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0ZXI6IDIwMCxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiA0MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9sZGVyOiA2MDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW9ub3NwYWNlOiB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBcIidDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc21hbGw6IDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDE0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogMTcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFyZ2U6IDIxLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IDI2XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBsaWdodGVyOiAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvbGRlcjogNjAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGltYWdlU2l6ZXM6IHtcclxuICAgICAgICAgICAgc21hbGw6IDQwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDgwLFxyXG4gICAgICAgICAgICBsYXJnZTogMTYwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250YWluZXJTdHlsZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkZGRkZcIixcclxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAyOEEwMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REMDI3NTAyXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW1waGFzaXM6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMDgwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAyOEEwMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REMDI3NTAyXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0M3REVGOVwiLFxyXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGFyazoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBsaWdodDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDI4QTAyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQwMjc1MDJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0NDRkZDQ1wiLFxyXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGFyazoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBsaWdodDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDI4QTAyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQwMjc1MDJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRkZDNUIyXCIsXHJcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMjhBMDJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDAyNzUwMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRkZFMkIyXCIsXHJcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMjhBMDJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDAyNzUwMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFjdGlvbnM6IHtcclxuICAgICAgICAgICAgbWF4QWN0aW9uczogNSxcclxuICAgICAgICAgICAgc3BhY2luZzogRW51bXMuU3BhY2luZy5EZWZhdWx0LFxyXG4gICAgICAgICAgICBidXR0b25TcGFjaW5nOiAxMCxcclxuICAgICAgICAgICAgc2hvd0NhcmQ6IHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbk1vZGU6IEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZS5JbmxpbmUsXHJcbiAgICAgICAgICAgICAgICBpbmxpbmVUb3BNYXJnaW46IDE2XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFjdGlvbnNPcmllbnRhdGlvbjogRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCxcclxuICAgICAgICAgICAgYWN0aW9uQWxpZ25tZW50OiBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuTGVmdFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRhcHRpdmVDYXJkOiB7XHJcbiAgICAgICAgICAgIGFsbG93Q3VzdG9tU3R5bGU6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWFnZVNldDoge1xyXG4gICAgICAgICAgICBpbWFnZVNpemU6IEVudW1zLlNpemUuTWVkaXVtLFxyXG4gICAgICAgICAgICBtYXhJbWFnZUhlaWdodDogMTAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmYWN0U2V0OiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogRW51bXMuVGV4dENvbG9yLkRlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBFbnVtcy5UZXh0U2l6ZS5EZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgaXNTdWJ0bGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcixcclxuICAgICAgICAgICAgICAgIHdyYXA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogMTUwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IEVudW1zLlRleHRDb2xvci5EZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemUuRGVmYXVsdCxcclxuICAgICAgICAgICAgICAgIGlzU3VidGxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgd3JhcDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3BhY2luZzogMTBcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgU2VyaWFsaXphYmxlT2JqZWN0LCBWZXJzaW9uLCBWZXJzaW9ucyB9IGZyb20gXCIuL3NlcmlhbGl6YXRpb25cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVR5cGVSZWdpc3RyYXRpb248VCBleHRlbmRzIFNlcmlhbGl6YWJsZU9iamVjdD4ge1xyXG4gICAgdHlwZU5hbWU6IHN0cmluZyxcclxuICAgIG9iamVjdFR5cGU6IHsgbmV3KCk6IFQgfSxcclxuICAgIHNjaGVtYVZlcnNpb246IFZlcnNpb25cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhcmRPYmplY3RSZWdpc3RyeTxUIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0PiB7XHJcbiAgICBwcml2YXRlIF9pdGVtczogeyBbdHlwZU5hbWU6IHN0cmluZ106IElUeXBlUmVnaXN0cmF0aW9uPFQ+IH0gPSB7fTtcclxuXHJcbiAgICBmaW5kQnlOYW1lKHR5cGVOYW1lOiBzdHJpbmcpOiBJVHlwZVJlZ2lzdHJhdGlvbjxUPiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmhhc093blByb3BlcnR5KHR5cGVOYW1lKSA/IHRoaXMuX2l0ZW1zW3R5cGVOYW1lXSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyKHR5cGVOYW1lOiBzdHJpbmcsIG9iamVjdFR5cGU6IHsgbmV3KCk6IFQgfSwgc2NoZW1hVmVyc2lvbjogVmVyc2lvbiA9IFZlcnNpb25zLnYxXzApIHtcclxuICAgICAgICBsZXQgcmVnaXN0cmF0aW9uSW5mbyA9IHRoaXMuZmluZEJ5TmFtZSh0eXBlTmFtZSk7XHJcblxyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25JbmZvICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uSW5mby5vYmplY3RUeXBlID0gb2JqZWN0VHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbkluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogdHlwZU5hbWUsXHJcbiAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBvYmplY3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgc2NoZW1hVmVyc2lvbjogc2NoZW1hVmVyc2lvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pdGVtc1t0eXBlTmFtZV0gPSByZWdpc3RyYXRpb25JbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHVucmVnaXN0ZXIodHlwZU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9pdGVtc1t0eXBlTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlSW5zdGFuY2UodHlwZU5hbWU6IHN0cmluZywgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbik6IFQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZWdpc3RyYXRpb25JbmZvID0gdGhpcy5maW5kQnlOYW1lKHR5cGVOYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChyZWdpc3RyYXRpb25JbmZvICYmIHJlZ2lzdHJhdGlvbkluZm8uc2NoZW1hVmVyc2lvbi5jb21wYXJlVG8odGFyZ2V0VmVyc2lvbikgPD0gMCkgPyBuZXcgcmVnaXN0cmF0aW9uSW5mby5vYmplY3RUeXBlKCkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2l0ZW1zKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUF0KGluZGV4OiBudW1iZXIpOiBJVHlwZVJlZ2lzdHJhdGlvbjxUPiB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5faXRlbXMpW2luZGV4XTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgeyBHbG9iYWxTZXR0aW5ncywgU2l6ZUFuZFVuaXQgfSBmcm9tIFwiLi9zaGFyZWRcIjtcclxuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0ICogYXMgRW51bXMgZnJvbSBcIi4vZW51bXNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb25FdmVudCB7XHJcbiAgICBzb3VyY2U/OiBTZXJpYWxpemFibGVPYmplY3QsXHJcbiAgICBwaGFzZTogRW51bXMuVmFsaWRhdGlvblBoYXNlLFxyXG4gICAgZXZlbnQ6IEVudW1zLlZhbGlkYXRpb25FdmVudCxcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZlcnNpb24ge1xyXG4gICAgcHJpdmF0ZSBfdmVyc2lvblN0cmluZzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfbWFqb3I6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX21pbm9yOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9pc1ZhbGlkOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX2xhYmVsPzogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1ham9yOiBudW1iZXIgPSAxLCBtaW5vcjogbnVtYmVyID0gMSwgbGFiZWw/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9tYWpvciA9IG1ham9yO1xyXG4gICAgICAgIHRoaXMuX21pbm9yID0gbWlub3I7XHJcbiAgICAgICAgdGhpcy5fbGFiZWwgPSBsYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2UodmVyc2lvblN0cmluZzogc3RyaW5nLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBWZXJzaW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIXZlcnNpb25TdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVmVyc2lvbigpO1xyXG4gICAgICAgIHJlc3VsdC5fdmVyc2lvblN0cmluZyA9IHZlcnNpb25TdHJpbmc7XHJcblxyXG4gICAgICAgIGxldCByZWdFeCA9IC8oXFxkKykuKFxcZCspL2dpO1xyXG4gICAgICAgIGxldCBtYXRjaGVzID0gcmVnRXguZXhlYyh2ZXJzaW9uU3RyaW5nKTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoZXMgIT0gbnVsbCAmJiBtYXRjaGVzLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5fbWFqb3IgPSBwYXJzZUludChtYXRjaGVzWzFdKTtcclxuICAgICAgICAgICAgcmVzdWx0Ll9taW5vciA9IHBhcnNlSW50KG1hdGNoZXNbMl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0Ll9pc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXJlc3VsdC5faXNWYWxpZCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBcIkludmFsaWQgdmVyc2lvbiBzdHJpbmc6IFwiICsgcmVzdWx0Ll92ZXJzaW9uU3RyaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuX2lzVmFsaWQgPyB0aGlzLl92ZXJzaW9uU3RyaW5nIDogdGhpcy5fbWFqb3IgKyBcIi5cIiArIHRoaXMuX21pbm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTigpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZVRvKG90aGVyVmVyc2lvbjogVmVyc2lvbik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyVmVyc2lvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjb21wYXJlIGludmFsaWQgdmVyc2lvbi5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYWpvciA+IG90aGVyVmVyc2lvbi5tYWpvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tYWpvciA8IG90aGVyVmVyc2lvbi5tYWpvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWlub3IgPiBvdGhlclZlcnNpb24ubWlub3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWlub3IgPCBvdGhlclZlcnNpb24ubWlub3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxhYmVsKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhYmVsID8gdGhpcy5fbGFiZWwgOiB0aGlzLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1ham9yKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21ham9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtaW5vcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9taW5vcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNWYWxpZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNWYWxpZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24gfCBcIipcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWZXJzaW9ucyB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdjFfMCA9IG5ldyBWZXJzaW9uKDEsIDApO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHYxXzEgPSBuZXcgVmVyc2lvbigxLCAxKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2MV8yID0gbmV3IFZlcnNpb24oMSwgMik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdjFfMyA9IG5ldyBWZXJzaW9uKDEsIDMsIFwiMS4zIChQcmV2aWV3KVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBsYXRlc3QgPSBWZXJzaW9ucy52MV8yO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWZXJzaW9uTGVzc09yRXF1YWwodmVyc2lvbjogVGFyZ2V0VmVyc2lvbiwgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbik6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBWZXJzaW9uKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gaW5zdGFuY2VvZiBWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyh2ZXJzaW9uKSA+PSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGFyZ2V0IHZlcnNpb24gaXMgKlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBWZXJzaW9uIGlzICpcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCB7XHJcbiAgICBwcml2YXRlIF92YWxpZGF0aW9uRXZlbnRzOiBJVmFsaWRhdGlvbkV2ZW50W10gPSBbXTtcclxuXHJcbiAgICBzZXJpYWxpemVWYWx1ZSh0YXJnZXQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBwcm9wZXJ0eVZhbHVlOiBhbnksIGRlZmF1bHRWYWx1ZTogYW55ID0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT09IG51bGwgfHwgcHJvcGVydHlWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BlcnR5VmFsdWUgPT09IGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlcmlhbGl6ZU51bWJlcih0YXJnZXQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBwcm9wZXJ0eVZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsIGRlZmF1bHRWYWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT09IG51bGwgfHwgcHJvcGVydHlWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BlcnR5VmFsdWUgPT09IGRlZmF1bHRWYWx1ZSB8fCBpc05hTihwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlcmlhbGl6ZUVudW0oXHJcbiAgICAgICAgZW51bVR5cGU6IHsgW3M6IG51bWJlcl06IHN0cmluZyB9LFxyXG4gICAgICAgIHRhcmdldDogeyBba2V5OiBzdHJpbmddOiBhbnkgfSxcclxuICAgICAgICBwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuICAgICAgICBwcm9wZXJ0eVZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0VmFsdWUgPSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcclxuXHJcbiAgICAgICAgbGV0IGNhbkRlbGV0ZVRhcmdldCA9IHRhcmdldFZhbHVlID09IHVuZGVmaW5lZCA/IHRydWUgOiBlbnVtVHlwZVt0YXJnZXRWYWx1ZV0gIT09IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT0gZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChjYW5EZWxldGVUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FuRGVsZXRlVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BlcnR5TmFtZV0gPSBlbnVtVHlwZVtwcm9wZXJ0eVZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXJpYWxpemVBcnJheSh0YXJnZXQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBwcm9wZXJ0eVZhbHVlOiBhbnlbXSB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGxldCBpdGVtcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZXJpYWxpemVkSXRlbTogYW55ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgU2VyaWFsaXphYmxlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtLnRvSlNPTih0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udG9KU09OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtLnRvSlNPTigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzZXJpYWxpemVkSXRlbSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChzZXJpYWxpemVkSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkgJiYgQXJyYXkuaXNBcnJheSh0YXJnZXRbcHJvcGVydHlOYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgaXRlbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0aW9uRXZlbnRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgbG9nRXZlbnQoXHJcbiAgICAgICAgcGhhc2U6IEVudW1zLlZhbGlkYXRpb25QaGFzZSxcclxuICAgICAgICBldmVudDogRW51bXMuVmFsaWRhdGlvbkV2ZW50LFxyXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgICAgICBzb3VyY2U/OiBTZXJpYWxpemFibGVPYmplY3QpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0aW9uRXZlbnRzLnB1c2goXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBoYXNlOiBwaGFzZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBsb2dQYXJzZUV2ZW50KGV2ZW50OiBFbnVtcy5WYWxpZGF0aW9uRXZlbnQsIG1lc3NhZ2U6IHN0cmluZywgc291cmNlPzogU2VyaWFsaXphYmxlT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5sb2dFdmVudChFbnVtcy5WYWxpZGF0aW9uUGhhc2UuUGFyc2UsIGV2ZW50LCBtZXNzYWdlLCBzb3VyY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEV2ZW50QXQoaW5kZXg6IG51bWJlcik6IElWYWxpZGF0aW9uRXZlbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uRXZlbnRzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbiA9IFZlcnNpb25zLmxhdGVzdCkge31cclxuXHJcbiAgICBnZXQgZXZlbnRDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uRXZlbnRzLmxlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU2ltcGxlU2VyaWFsaXphdGlvbkNvbnRleHQgZXh0ZW5kcyBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQge31cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eURlZmluaXRpb24ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX3NlcXVlbnRpYWxOdW1iZXI6IG51bWJlciA9IDA7XHJcblxyXG4gICAgZ2V0SW50ZXJuYWxOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogYW55IHtcclxuICAgICAgICByZXR1cm4gc291cmNlW3RoaXMubmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogYW55LCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKHRhcmdldCwgdGhpcy5uYW1lLCB2YWx1ZSwgdGhpcy5kZWZhdWx0VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IHNlcXVlbnRpYWxOdW1iZXI6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBkZWZhdWx0VmFsdWU/OiBhbnksXHJcbiAgICAgICAgcmVhZG9ubHkgb25HZXRJbml0aWFsVmFsdWU/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IGFueSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlcXVlbnRpYWxOdW1iZXIgPSBQcm9wZXJ0eURlZmluaXRpb24uX3NlcXVlbnRpYWxOdW1iZXI7XHJcblxyXG4gICAgICAgICAgICBQcm9wZXJ0eURlZmluaXRpb24uX3NlcXVlbnRpYWxOdW1iZXIrKztcclxuICAgICAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTdHJpbmdQcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcGFyc2VkVmFsdWUgPSBVdGlscy5wYXJzZVN0cmluZyhzb3VyY2VbdGhpcy5uYW1lXSwgdGhpcy5kZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIGxldCBpc1VuZGVmaW5lZCA9IHBhcnNlZFZhbHVlID09PSB1bmRlZmluZWQgfHwgKHBhcnNlZFZhbHVlID09PSBcIlwiICYmIHRoaXMudHJlYXRFbXB0eUFzVW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZCAmJiB0aGlzLnJlZ0V4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSB0aGlzLnJlZ0V4LmV4ZWMoPHN0cmluZz5wYXJzZWRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYEludmFsaWQgXCIke3RoaXMubmFtZX1cIiB2YWx1ZSBcIiR7cGFyc2VkVmFsdWV9XCJgLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbmRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZShcclxuICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlID09PSBcIlwiICYmIHRoaXMudHJlYXRFbXB0eUFzVW5kZWZpbmVkID8gdW5kZWZpbmVkIDogdmFsdWUsXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSB0cmVhdEVtcHR5QXNVbmRlZmluZWQ6IGJvb2xlYW4gPSB0cnVlLFxyXG4gICAgICAgIHJlYWRvbmx5IHJlZ0V4PzogUmVnRXhwLFxyXG4gICAgICAgIHJlYWRvbmx5IGRlZmF1bHRWYWx1ZT86IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBvbkdldEluaXRpYWxWYWx1ZT86IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4gc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgZGVmYXVsdFZhbHVlLCBvbkdldEluaXRpYWxWYWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCb29sUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xyXG4gICAgcGFyc2Uoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5wYXJzZUJvb2woc291cmNlW3RoaXMubmFtZV0sIHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogb2JqZWN0LCB2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZShcclxuICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOdW1Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMucGFyc2VOdW1iZXIoc291cmNlW3RoaXMubmFtZV0sIHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplTnVtYmVyKFxyXG4gICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBpeGVsU2l6ZVByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcclxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgdmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBsZXQgaXNWYWxpZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCBzaXplID0gU2l6ZUFuZFVuaXQucGFyc2UodmFsdWUsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzaXplLnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuUGl4ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzaXplLnBoeXNpY2FsU2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZy4gQSBwYXJzZSBlcnJvciBpcyBlbWl0dGVkIGJlbG93XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBcIkludmFsaWQgXFxcIm1pbkhlaWdodFxcXCIgdmFsdWU6IFwiICsgc291cmNlW3RoaXMubmFtZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUoXHJcbiAgICAgICAgICAgIHRhcmdldCxcclxuICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKHZhbHVlKSA/IHZhbHVlICsgXCJweFwiIDogdW5kZWZpbmVkKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVmVyc2lvbmVkVmFsdWU8VFZhbHVlPiB7XHJcbiAgICB2YWx1ZTogVFZhbHVlO1xyXG4gICAgdGFyZ2V0VmVyc2lvbj86IFZlcnNpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWx1ZVNldFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcclxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVt0aGlzLm5hbWVdO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHZlcnNpb25lZFZhbHVlIG9mIHRoaXMudmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gdmVyc2lvbmVkVmFsdWUudmFsdWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRWZXJzaW9uID0gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA/IHZlcnNpb25lZFZhbHVlLnRhcmdldFZlcnNpb24gOiB0aGlzLnRhcmdldFZlcnNpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZlcnNpb25lZFZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiJHt0aGlzLm5hbWV9XCIgdmFsdWUgXCIke3NvdXJjZVZhbHVlfVwiIGlzIHN1cHBvcnRlZCBpbiB2ZXJzaW9uICR7dGFyZ2V0VmVyc2lvbi50b1N0cmluZygpfSwgYnV0IHlvdSBhcmUgdXNpbmcgdmVyc2lvbiAke2NvbnRleHQudGFyZ2V0VmVyc2lvbi50b1N0cmluZygpfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxyXG4gICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgIGBJbnZhbGlkIFwiJHt0aGlzLm5hbWV9XCIgdmFsdWUgXCIke3NvdXJjZVZhbHVlfVwiYCxcclxuICAgICAgICAgICAgc2VuZGVyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgbGV0IHZhbHVlRm91bmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgdmVyc2lvbmVkVmFsdWUgb2YgdGhpcy52YWx1ZXMpIHtcclxuICAgICAgICAgICAgaWYgKHZlcnNpb25lZFZhbHVlLnZhbHVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldFZlcnNpb24gPSB2ZXJzaW9uZWRWYWx1ZS50YXJnZXRWZXJzaW9uID8gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA6IHRoaXMudGFyZ2V0VmVyc2lvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VmVyc2lvbi5jb21wYXJlVG8oY29udGV4dC50YXJnZXRWZXJzaW9uKSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2dFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvblBoYXNlLlRvSlNPTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgXCIke3RoaXMubmFtZX1cIiB2YWx1ZSBcIiR7dmFsdWV9XCIgaXMgc3VwcG9ydGVkIGluIHZlcnNpb24gJHt0YXJnZXRWZXJzaW9uLnRvU3RyaW5nKCl9LCBidXQgeW91IGFyZSB1c2luZyB2ZXJzaW9uICR7Y29udGV4dC50YXJnZXRWZXJzaW9uLnRvU3RyaW5nKCl9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhbHVlRm91bmQpIHtcclxuICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZShcclxuICAgICAgICAgICAgICAgIHRhcmdldCxcclxuICAgICAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSB2YWx1ZXM6IElWZXJzaW9uZWRWYWx1ZTxzdHJpbmc+W10sXHJcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IG9uR2V0SW5pdGlhbFZhbHVlPzogKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcih0YXJnZXRWZXJzaW9uLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG9uR2V0SW5pdGlhbFZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVudW1Qcm9wZXJ0eTxURW51bSBleHRlbmRzIHsgW3M6IG51bWJlcl06IHN0cmluZyB9PiBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XHJcbiAgICBwcml2YXRlIF92YWx1ZXM6IElWZXJzaW9uZWRWYWx1ZTxudW1iZXI+W10gPSBbXTtcclxuXHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VWYWx1ZSAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZW51bVZhbHVlID0gVXRpbHMuZ2V0RW51bVZhbHVlQnlOYW1lKHRoaXMuZW51bVR5cGUsIHNvdXJjZVZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKGVudW1WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHZlcnNpb25lZFZhbHVlIG9mIHRoaXMudmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbmVkVmFsdWUudmFsdWUgPT09IGVudW1WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRWZXJzaW9uID0gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA/IHZlcnNpb25lZFZhbHVlLnRhcmdldFZlcnNpb24gOiB0aGlzLnRhcmdldFZlcnNpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudW1WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIiR7dGhpcy5uYW1lfVwiIHZhbHVlIFwiJHtzb3VyY2VWYWx1ZX1cIiBpcyBzdXBwb3J0ZWQgaW4gdmVyc2lvbiAke3RhcmdldFZlcnNpb24udG9TdHJpbmcoKX0sIGJ1dCB5b3UgYXJlIHVzaW5nIHZlcnNpb24gJHtjb250ZXh0LnRhcmdldFZlcnNpb24udG9TdHJpbmcoKX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICBgSW52YWxpZCBcIiR7dGhpcy5uYW1lfVwiIHZhbHVlIFwiJHtzb3VyY2VWYWx1ZX1cImAsXHJcbiAgICAgICAgICAgIHNlbmRlcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZUZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB2ZXJzaW9uZWRWYWx1ZSBvZiB0aGlzLnZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnNpb25lZFZhbHVlLnZhbHVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRWZXJzaW9uID0gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA/IHZlcnNpb25lZFZhbHVlLnRhcmdldFZlcnNpb24gOiB0aGlzLnRhcmdldFZlcnNpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uUGhhc2UuVG9KU09OLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEludmFsaWQgXCIke3RoaXMubmFtZX1cIiB2YWx1ZSBcIiR7dmFsdWV9XCJgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZUZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZUVudW0oXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnVtVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBlbnVtVHlwZTogVEVudW0sXHJcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogbnVtYmVyLFxyXG4gICAgICAgIHZhbHVlcz86IElWZXJzaW9uZWRWYWx1ZTxudW1iZXI+W10sXHJcbiAgICAgICAgcmVhZG9ubHkgb25HZXRJbml0aWFsVmFsdWU/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIG5hbWUsIGRlZmF1bHRWYWx1ZSwgb25HZXRJbml0aWFsVmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoIXZhbHVlcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZW51bVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlBc051bWJlciA9IHBhcnNlSW50KGtleSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlBc051bWJlciA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2goIHsgdmFsdWU6IGtleUFzTnVtYmVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZXMoKTogSVZlcnNpb25lZFZhbHVlPG51bWJlcj5bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU2VyaWFsaXphYmxlT2JqZWN0VHlwZSA9IHsgbmV3KCk6IFNlcmlhbGl6YWJsZU9iamVjdCB9O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZU9iamVjdFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcclxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBTZXJpYWxpemFibGVPYmplY3QgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVt0aGlzLm5hbWVdO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkdldEluaXRpYWxWYWx1ZSA/IHRoaXMub25HZXRJbml0aWFsVmFsdWUoc2VuZGVyKSA6IHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyB0aGlzLm9iamVjdFR5cGUoKTtcclxuICAgICAgICByZXN1bHQucGFyc2Uoc291cmNlVmFsdWUsIGNvbnRleHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFNlcmlhbGl6YWJsZU9iamVjdCB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWRWYWx1ZSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZS50b0pTT04oY29udGV4dCkgOiB2YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZXJpYWxpemVkVmFsdWUgPT09IFwib2JqZWN0XCIgJiYgT2JqZWN0LmtleXMoc2VyaWFsaXplZFZhbHVlKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgc2VyaWFsaXplZFZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIudG9KU09OKHNlbmRlciwgdGFyZ2V0LCBzZXJpYWxpemVkVmFsdWUsIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IG9iamVjdFR5cGU6IFNlcmlhbGl6YWJsZU9iamVjdFR5cGUpIHtcclxuICAgICAgICBzdXBlcihcclxuICAgICAgICAgICAgdGFyZ2V0VmVyc2lvbixcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IHsgcmV0dXJuIG5ldyB0aGlzLm9iamVjdFR5cGUoKTsgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZXJpYWxpemFibGVPYmplY3RDb2xsZWN0aW9uUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xyXG4gICAgcGFyc2Uoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IFNlcmlhbGl6YWJsZU9iamVjdFtdIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBTZXJpYWxpemFibGVPYmplY3RbXSB8IHVuZGVmaW5lZCA9IFtdO1xyXG5cclxuICAgICAgICBsZXQgc291cmNlQ29sbGVjdGlvbiA9IHNvdXJjZVt0aGlzLm5hbWVdO1xyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2VDb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBzb3VyY2VJdGVtIG9mIHNvdXJjZUNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbmV3IHRoaXMub2JqZWN0VHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5wYXJzZShzb3VyY2VJdGVtLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbkl0ZW1BZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25JdGVtQWRkZWQoc2VuZGVyLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0IDogKHRoaXMub25HZXRJbml0aWFsVmFsdWUgPyB0aGlzLm9uR2V0SW5pdGlhbFZhbHVlKHNlbmRlcikgOiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFNlcmlhbGl6YWJsZU9iamVjdFtdIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZUFycmF5KHRhcmdldCwgdGhpcy5uYW1lLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbixcclxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgb2JqZWN0VHlwZTogU2VyaWFsaXphYmxlT2JqZWN0VHlwZSxcclxuICAgICAgICByZWFkb25seSBvbkl0ZW1BZGRlZD86IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgaXRlbTogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIHRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB7IHJldHVybiBbXTsgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDdXN0b21Qcm9wZXJ0eTxUPiBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XHJcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25QYXJzZShzZW5kZXIsIHRoaXMsIHNvdXJjZSwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogVCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5vblRvSlNPTihzZW5kZXIsIHRoaXMsIHRhcmdldCwgdmFsdWUsIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IG9uUGFyc2U6IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiBULFxyXG4gICAgICAgIHJlYWRvbmx5IG9uVG9KU09OOiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBULCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHZvaWQsXHJcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogVCxcclxuICAgICAgICByZWFkb25seSBvbkdldEluaXRpYWxWYWx1ZT86IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4gVCkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIG5hbWUsIGRlZmF1bHRWYWx1ZSwgb25HZXRJbml0aWFsVmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMub25QYXJzZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDdXN0b21Qcm9wZXJ0eURlZmluaXRpb24gaW5zdGFuY2VzIG11c3QgaGF2ZSBhbiBvblBhcnNlIGhhbmRsZXIuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm9uVG9KU09OKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbVByb3BlcnR5RGVmaW5pdGlvbiBpbnN0YW5jZXMgbXVzdCBoYXZlIGFuIG9uVG9KU09OIGhhbmRsZXIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSB7XHJcbiAgICBwcml2YXRlIF9wcm9wZXJ0aWVzOiBQcm9wZXJ0eURlZmluaXRpb25bXSA9IFtdO1xyXG5cclxuICAgIGluZGV4T2YocHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbik6IG51bWJlciB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wcm9wZXJ0aWVzW2ldID09PSBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQoLi4ucHJvcGVydGllczogUHJvcGVydHlEZWZpbml0aW9uW10pIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhPZihwcm9wZXJ0aWVzW2ldKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0aWVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoLi4ucHJvcGVydGllczogUHJvcGVydHlEZWZpbml0aW9uW10pIHtcclxuICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmluZGV4T2YocHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUF0KGluZGV4OiBudW1iZXIpOiBQcm9wZXJ0eURlZmluaXRpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmxlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuLy8gVGhpcyBpcyBhIGRlY29yYXRvciBmdW5jdGlvbiwgdXNlZCB0byBtYXAgU2VyaWFsaXphYmxlT2JqZWN0IGRlc2NlbmRhbnQgY2xhc3MgbWVtYmVycyB0b1xyXG4vLyBzY2hlbWEgcHJvcGVydGllc1xyXG5leHBvcnQgZnVuY3Rpb24gcHJvcGVydHkocHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpIHx8IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWRlc2NyaXB0b3IuZ2V0ICYmICFkZXNjcmlwdG9yLnNldCkge1xyXG4gICAgICAgICAgICBkZXNjcmlwdG9yLmdldCA9IGZ1bmN0aW9uKHRoaXM6IFNlcmlhbGl6YWJsZU9iamVjdCkgeyByZXR1cm4gdGhpcy5nZXRWYWx1ZShwcm9wZXJ0eSk7IH07XHJcbiAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gZnVuY3Rpb24odGhpczogU2VyaWFsaXphYmxlT2JqZWN0LCB2YWx1ZTogYW55KSB7IHRoaXMuc2V0VmFsdWUocHJvcGVydHksIHZhbHVlKTsgfTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUHJvcGVydHlCYWcgPSB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IGFueSB9O1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNlcmlhbGl6YWJsZU9iamVjdCB7XHJcbiAgICBzdGF0aWMgb25SZWdpc3RlckN1c3RvbVByb3BlcnRpZXM/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHNjaGVtYTogU2VyaWFsaXphYmxlT2JqZWN0U2NoZW1hKSA9PiB2b2lkO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9zY2hlbWFDYWNoZTogeyBbdHlwZU5hbWU6IHN0cmluZ106IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSB9ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSBfcHJvcGVydHlCYWc6IFByb3BlcnR5QmFnID0ge307XHJcbiAgICBwcml2YXRlIF9yYXdQcm9wZXJ0aWVzOiBQcm9wZXJ0eUJhZyA9IHt9O1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xyXG4gICAgICAgIGxldCBjdG9yID0gPGFueT50aGlzLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzOiBQcm9wZXJ0eURlZmluaXRpb25bXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eU5hbWUgaW4gY3Rvcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByb3BlcnR5VmFsdWUgPSBjdG9yW3Byb3BlcnR5TmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgaW5zdGFuY2VvZiBQcm9wZXJ0eURlZmluaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgYSBwcm9wZXJ0eSBoYXBwZW5zIHRvIGhhdmUgYSBnZXR0ZXIgZnVuY3Rpb24gYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBpdCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB3ZSBuZWVkIHRvIGNhdGNoIGl0IGhlcmVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgc29ydGVkUHJvcGVydGllcyA9IHByb3BlcnRpZXMuc29ydCgocDE6IFByb3BlcnR5RGVmaW5pdGlvbiwgcDI6IFByb3BlcnR5RGVmaW5pdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAxLnNlcXVlbnRpYWxOdW1iZXIgPiBwMi5zZXF1ZW50aWFsTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwMS5zZXF1ZW50aWFsTnVtYmVyIDwgcDIuc2VxdWVudGlhbE51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzY2hlbWEuYWRkKC4uLnNvcnRlZFByb3BlcnRpZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFNlcmlhbGl6YWJsZU9iamVjdC5vblJlZ2lzdGVyQ3VzdG9tUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICBTZXJpYWxpemFibGVPYmplY3Qub25SZWdpc3RlckN1c3RvbVByb3BlcnRpZXModGhpcywgc2NoZW1hKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFZhbHVlKHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24pOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0eUJhZy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eS5nZXRJbnRlcm5hbE5hbWUoKSkgPyB0aGlzLl9wcm9wZXJ0eUJhZ1twcm9wZXJ0eS5nZXRJbnRlcm5hbE5hbWUoKV0gOiBwcm9wZXJ0eS5kZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFZhbHVlKHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fcHJvcGVydHlCYWdbcHJvcGVydHkuZ2V0SW50ZXJuYWxOYW1lKCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvcGVydHlCYWdbcHJvcGVydHkuZ2V0SW50ZXJuYWxOYW1lKCldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuX3Byb3BlcnR5QmFnID0ge307XHJcbiAgICAgICAgdGhpcy5fcmF3UHJvcGVydGllcyA9IEdsb2JhbFNldHRpbmdzLmVuYWJsZUZ1bGxKc29uUm91bmRUcmlwID8gKHNvdXJjZSA/IHNvdXJjZSA6IHt9KSA6IHt9O1xyXG5cclxuICAgICAgICBpZiAoc291cmNlKSB7XHJcbiAgICAgICAgICAgIGxldCBzID0gdGhpcy5nZXRTY2hlbWEoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5nZXRDb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IHMuZ2V0SXRlbUF0KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0eVZhbHVlID0gcHJvcGVydHkub25HZXRJbml0aWFsVmFsdWUgPyBwcm9wZXJ0eS5vbkdldEluaXRpYWxWYWx1ZSh0aGlzKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KHByb3BlcnR5Lm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5LnRhcmdldFZlcnNpb24uY29tcGFyZVRvKGNvbnRleHQudGFyZ2V0VmVyc2lvbikgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gcHJvcGVydHkucGFyc2UodGhpcywgc291cmNlLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5VbnN1cHBvcnRlZFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFByb3BlcnR5IFwiJHtwcm9wZXJ0eS5uYW1lfVwiIGlzIHN1cHBvcnRlZCBpbiB2ZXJzaW9uICR7cHJvcGVydHkudGFyZ2V0VmVyc2lvbi50b1N0cmluZygpfSwgYnV0IHlvdSBhcmUgdXNpbmcgdmVyc2lvbiAke2NvbnRleHQudGFyZ2V0VmVyc2lvbi50b1N0cmluZygpfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXREZWZhdWx0VmFsdWVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0U2NoZW1hKCk7XHJcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWRQcm9wZXJ0aWVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuZ2V0Q291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IHMuZ2V0SXRlbUF0KGkpO1xyXG5cclxuICAgICAgICAgICAgLy8gQXZvaWQgc2VyaWFsaXppbmcgdGhlIHNhbWUgcHJvcGVydHkgbXVsdGlwbGUgdGltZXMuIFRoaXMgaXMgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugc29tZSBwcm9wZXJ0eSBkZWZpbml0aW9ucyBtYXAgdG8gdGhlIHNhbWUgdW5kZXJseWluZyBzY2hlbWFcclxuICAgICAgICAgICAgLy8gcHJvcGVydHlcclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5LnRhcmdldFZlcnNpb24uY29tcGFyZVRvKGNvbnRleHQudGFyZ2V0VmVyc2lvbikgPD0gMCAmJiBzZXJpYWxpemVkUHJvcGVydGllcy5pbmRleE9mKHByb3BlcnR5Lm5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHkudG9KU09OKHRoaXMsIHRhcmdldCwgdGhpcy5nZXRWYWx1ZShwcm9wZXJ0eSksIGNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRQcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkubmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3VsZFNlcmlhbGl6ZShjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBtYXhWZXJzaW9uOiBWZXJzaW9uID0gVmVyc2lvbnMudjFfMztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0U2NoZW1hKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5nZXRDb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gcy5nZXRJdGVtQXQoaSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkub25HZXRJbml0aWFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUocHJvcGVydHksIHByb3BlcnR5Lm9uR2V0SW5pdGlhbFZhbHVlKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZShzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0PzogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCA/IGNvbnRleHQgOiBuZXcgU2ltcGxlU2VyaWFsaXphdGlvbkNvbnRleHQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKGNvbnRleHQ/OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBQcm9wZXJ0eUJhZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGVmZmVjdGl2ZUNvbnRleHQgPSBjb250ZXh0ID8gY29udGV4dCA6IG5ldyBTaW1wbGVTZXJpYWxpemF0aW9uQ29udGV4dCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG91bGRTZXJpYWxpemUoZWZmZWN0aXZlQ29udGV4dCkpIHtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdDogUHJvcGVydHlCYWc7XHJcblxyXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXAgJiYgdGhpcy5fcmF3UHJvcGVydGllcyAmJiB0eXBlb2YgdGhpcy5fcmF3UHJvcGVydGllcyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcmF3UHJvcGVydGllcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmludGVybmFsVG9KU09OKHJlc3VsdCwgZWZmZWN0aXZlQ29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRGVmYXVsdFZhbHVlKHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShwcm9wZXJ0eSkgPT09IHByb3BlcnR5LmRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNBbGxEZWZhdWx0VmFsdWVzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBzID0gdGhpcy5nZXRTY2hlbWEoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmdldENvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcHJvcGVydHkgPSBzLmdldEl0ZW1BdChpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNEZWZhdWx0VmFsdWUocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RGVmYXVsdFZhbHVlcygpIHtcclxuICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0U2NoZW1hKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5nZXRDb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gcy5nZXRJdGVtQXQoaSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHByb3BlcnR5LCBwcm9wZXJ0eS5kZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDdXN0b21Qcm9wZXJ0eShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBsZXQgc2hvdWxkRGVsZXRlUHJvcGVydHkgPSAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmICF2YWx1ZSkgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHNob3VsZERlbGV0ZVByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9yYXdQcm9wZXJ0aWVzW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcmF3UHJvcGVydGllc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXN0b21Qcm9wZXJ0eShuYW1lOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdQcm9wZXJ0aWVzW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNjaGVtYSgpOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEge1xyXG4gICAgICAgIGxldCBzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSA9IFNlcmlhbGl6YWJsZU9iamVjdC5fc2NoZW1hQ2FjaGVbdGhpcy5nZXRTY2hlbWFLZXkoKV07XHJcblxyXG4gICAgICAgIGlmICghc2NoZW1hKSB7XHJcbiAgICAgICAgICAgIHNjaGVtYSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGVTY2hlbWEoc2NoZW1hKTtcclxuXHJcbiAgICAgICAgICAgIFNlcmlhbGl6YWJsZU9iamVjdC5fc2NoZW1hQ2FjaGVbdGhpcy5nZXRTY2hlbWFLZXkoKV0gPSBzY2hlbWE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2NoZW1hO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEVudW1zIGZyb20gXCIuL2VudW1zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2xvYmFsU2V0dGluZ3Mge1xyXG4gICAgc3RhdGljIHVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbjogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBzdGF0aWMgdXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHVzZU1hcmtkb3duSW5SYWRpb0J1dHRvbkFuZENoZWNrYm94OiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHN0YXRpYyBhbGxvd01hcmtGb3JUZXh0SGlnaGxpZ2h0aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgYWx3YXlzQmxlZWRTZXBhcmF0b3JzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHN0YXRpYyB1c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHN0YXRpYyBkaXNwbGF5SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHN0YXRpYyBhbGxvd1ByZVByb2Nlc3NpbmdQcm9wZXJ0eVZhbHVlczogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHNldFRhYkluZGV4QXRDYXJkUm9vdDogYm9vbGVhbiA9IHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDb250ZW50VHlwZXMgPSB7XHJcbiAgICBhcHBsaWNhdGlvbkpzb246IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQ6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2VwYXJhdGlvbkRlZmluaXRpb24ge1xyXG4gICAgc3BhY2luZzogbnVtYmVyLFxyXG4gICAgbGluZVRoaWNrbmVzcz86IG51bWJlcixcclxuICAgIGxpbmVDb2xvcj86IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbnB1dCB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIHZhbHVlPzogc3RyaW5nO1xyXG4gICAgdmFsaWRhdGVWYWx1ZSgpOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBEaWN0aW9uYXJ5PFQ+ID0geyBba2V5OiBzdHJpbmddOiBUIH07XHJcblxyXG5leHBvcnQgY2xhc3MgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMge1xyXG4gICAgcHJpdmF0ZSBfaXNQcm9jZXNzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX29yaWdpbmFsPzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc2VkPzogc3RyaW5nO1xyXG5cclxuICAgIGdldFJlZmVyZW5jZWRJbnB1dHMoaW5wdXRzOiBJSW5wdXRbXSwgcmVmZXJlbmNlZElucHV0czogRGljdGlvbmFyeTxJSW5wdXQ+KSB7XHJcbiAgICAgICAgaWYgKCFyZWZlcmVuY2VkSW5wdXRzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSByZWZlcmVuY2VkSW5wdXRzIHBhcmFtZXRlciBjYW5ub3QgYmUgbnVsbC5cIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGlucHV0IG9mIGlucHV0cykge1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IG5ldyBSZWdFeHAoXCJcXFxce3syfShcIiArIGlucHV0LmlkICsgXCIpLnZhbHVlXFxcXH17Mn1cIiwgXCJnaVwiKS5leGVjKDxzdHJpbmc+dGhpcy5fb3JpZ2luYWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1hdGNoZXMgIT0gbnVsbCAmJiBpbnB1dC5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlZElucHV0c1tpbnB1dC5pZF0gPSBpbnB1dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzdGl0dXRlSW5wdXRWYWx1ZXMoaW5wdXRzOiBEaWN0aW9uYXJ5PElJbnB1dD4sIGNvbnRlbnRUeXBlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wcm9jZXNzZWQgPSB0aGlzLl9vcmlnaW5hbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX29yaWdpbmFsKSB7XHJcbiAgICAgICAgICAgIGxldCByZWdFeCA9IC9cXHt7Mn0oW2EtejAtOV8kQF0rKS52YWx1ZVxcfXsyfS9naTtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZXM7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoZXMgPSByZWdFeC5leGVjKDxzdHJpbmc+dGhpcy5fb3JpZ2luYWwpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGlucHV0cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT0gbWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkSW5wdXQgPSBpbnB1dHNba2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZUZvclJlcGxhY2UgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3JSZXBsYWNlID0gbWF0Y2hlZElucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFR5cGUgPT09IENvbnRlbnRUeXBlcy5hcHBsaWNhdGlvbkpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlRm9yUmVwbGFjZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlRm9yUmVwbGFjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvclJlcGxhY2UgPSB2YWx1ZUZvclJlcGxhY2Uuc2xpY2UoMSwgLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnRUeXBlID09PSBDb250ZW50VHlwZXMuYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlRm9yUmVwbGFjZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZUZvclJlcGxhY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWQgPSAoPHN0cmluZz50aGlzLl9wcm9jZXNzZWQpLnJlcGxhY2UobWF0Y2hlc1swXSwgdmFsdWVGb3JSZXBsYWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faXNQcm9jZXNzZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE9yaWdpbmFsKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbmFsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNQcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9vcmlnaW5hbCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2lzUHJvY2Vzc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTcGFjaW5nRGVmaW5pdGlvbiB7XHJcbiAgICBsZWZ0OiBudW1iZXIgPSAwO1xyXG4gICAgdG9wOiBudW1iZXIgPSAwO1xyXG4gICAgcmlnaHQ6IG51bWJlciA9IDA7XHJcbiAgICBib3R0b206IG51bWJlciA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IodG9wOiBudW1iZXIgPSAwLFxyXG4gICAgICAgIHJpZ2h0OiBudW1iZXIgPSAwLFxyXG4gICAgICAgIGJvdHRvbTogbnVtYmVyID0gMCxcclxuICAgICAgICBsZWZ0OiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xyXG4gICAgICAgIHRoaXMuYm90dG9tID0gYm90dG9tO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYWRkaW5nRGVmaW5pdGlvbiB7XHJcbiAgICB0b3A6IEVudW1zLlNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcbiAgICByaWdodDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcclxuICAgIGJvdHRvbTogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcclxuICAgIGxlZnQ6IEVudW1zLlNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3IodG9wOiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lLFxyXG4gICAgICAgIHJpZ2h0OiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lLFxyXG4gICAgICAgIGJvdHRvbTogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZSxcclxuICAgICAgICBsZWZ0OiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lKSB7XHJcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xyXG4gICAgICAgIHRoaXMuYm90dG9tID0gYm90dG9tO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaXplQW5kVW5pdCB7XHJcbiAgICBwaHlzaWNhbFNpemU6IG51bWJlcjtcclxuICAgIHVuaXQ6IEVudW1zLlNpemVVbml0O1xyXG5cclxuICAgIHN0YXRpYyBwYXJzZShpbnB1dDogc3RyaW5nLCByZXF1aXJlVW5pdFNwZWNpZmllcjogYm9vbGVhbiA9IGZhbHNlKTogU2l6ZUFuZFVuaXQge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgU2l6ZUFuZFVuaXQoMCwgRW51bXMuU2l6ZVVuaXQuV2VpZ2h0KTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICByZXN1bHQucGh5c2ljYWxTaXplID0gaW5wdXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgbGV0IHJlZ0V4cCA9IC9eKFswLTldKykocHh8XFwqKT8kL2c7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaGVzID0gcmVnRXhwLmV4ZWMoaW5wdXQpO1xyXG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWRNYXRjaENvdW50ID0gcmVxdWlyZVVuaXRTcGVjaWZpZXIgPyAzIDogMjtcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID49IGV4cGVjdGVkTWF0Y2hDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnBoeXNpY2FsU2l6ZSA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNbMl0gPT0gXCJweFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC51bml0ID0gRW51bXMuU2l6ZVVuaXQuUGl4ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2l6ZTogXCIgKyBpbnB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocGh5c2ljYWxTaXplOiBudW1iZXIsIHVuaXQ6IEVudW1zLlNpemVVbml0KSB7XHJcbiAgICAgICAgdGhpcy5waHlzaWNhbFNpemUgPSBwaHlzaWNhbFNpemU7XHJcbiAgICAgICAgdGhpcy51bml0ID0gdW5pdDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VJbmZvcm1hdGlvbiB7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIG1pbWVUeXBlOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGYXN0IFVVSUQgZ2VuZXJhdG9yLCBSRkM0MTIyIHZlcnNpb24gNCBjb21wbGlhbnQuXHJcbiAqIEBhdXRob3IgSmVmZiBXYXJkIChqY3dhcmQuY29tKS5cclxuICogQGxpY2Vuc2UgTUlUIGxpY2Vuc2VcclxuICogQGxpbmsgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxOTYzMTM2IzIxOTYzMTM2XHJcbiAqKi9cclxuZXhwb3J0IGNsYXNzIFVVSUQge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbHV0OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBkMCA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcclxuICAgICAgICBsZXQgZDEgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XHJcbiAgICAgICAgbGV0IGQyID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xyXG4gICAgICAgIGxldCBkMyA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIFVVSUQubHV0W2QwICYgMHhmZl0gKyBVVUlELmx1dFtkMCA+PiA4ICYgMHhmZl0gKyBVVUlELmx1dFtkMCA+PiAxNiAmIDB4ZmZdICsgVVVJRC5sdXRbZDAgPj4gMjQgJiAweGZmXSArICctJyArXHJcbiAgICAgICAgICAgIFVVSUQubHV0W2QxICYgMHhmZl0gKyBVVUlELmx1dFtkMSA+PiA4ICYgMHhmZl0gKyAnLScgKyBVVUlELmx1dFtkMSA+PiAxNiAmIDB4MGYgfCAweDQwXSArIFVVSUQubHV0W2QxID4+IDI0ICYgMHhmZl0gKyAnLScgK1xyXG4gICAgICAgICAgICBVVUlELmx1dFtkMiAmIDB4M2YgfCAweDgwXSArIFVVSUQubHV0W2QyID4+IDggJiAweGZmXSArICctJyArIFVVSUQubHV0W2QyID4+IDE2ICYgMHhmZl0gKyBVVUlELmx1dFtkMiA+PiAyNCAmIDB4ZmZdICtcclxuICAgICAgICAgICAgVVVJRC5sdXRbZDMgJiAweGZmXSArIFVVSUQubHV0W2QzID4+IDggJiAweGZmXSArIFVVSUQubHV0W2QzID4+IDE2ICYgMHhmZl0gKyBVVUlELmx1dFtkMyA+PiAyNCAmIDB4ZmZdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcclxuICAgICAgICAgICAgVVVJRC5sdXRbaV0gPSAoaSA8IDE2ID8gJzAnIDogJycpICsgaS50b1N0cmluZygxNik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5VVUlELmluaXRpYWxpemUoKTtcclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUZXh0Rm9ybWF0dGVyIHtcclxuICAgIHByaXZhdGUgX3JlZ3VsYXJFeHByZXNzaW9uOiBSZWdFeHA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGludGVybmFsRm9ybWF0KGxhbmc6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0Y2hlczogUmVnRXhwRXhlY0FycmF5KTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJlZ3VsYXJFeHByZXNzaW9uOiBSZWdFeHApIHtcclxuICAgICAgICB0aGlzLl9yZWd1bGFyRXhwcmVzc2lvbiA9IHJlZ3VsYXJFeHByZXNzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdChsYW5nOiBzdHJpbmcgfCB1bmRlZmluZWQsIGlucHV0OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBtYXRjaGVzO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGlucHV0O1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaGVzID0gdGhpcy5fcmVndWxhckV4cHJlc3Npb24uZXhlYyhpbnB1dCkpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG1hdGNoZXNbMF0sIHRoaXMuaW50ZXJuYWxGb3JtYXQobGFuZywgbWF0Y2hlcykpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERhdGVGb3JtYXR0ZXIgZXh0ZW5kcyBBYnN0cmFjdFRleHRGb3JtYXR0ZXIge1xyXG4gICAgcHJvdGVjdGVkIGludGVybmFsRm9ybWF0KGxhbmc6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0Y2hlczogUmVnRXhwRXhlY0FycmF5KTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UobWF0Y2hlc1sxXSkpO1xyXG4gICAgICAgIGxldCBmb3JtYXQgPSBtYXRjaGVzWzJdICE9IHVuZGVmaW5lZCA/IG1hdGNoZXNbMl0udG9Mb3dlckNhc2UoKSA6IFwiY29tcGFjdFwiO1xyXG5cclxuICAgICAgICBpZiAoZm9ybWF0ICE9IFwiY29tcGFjdFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCB7IGRheTogXCJudW1lcmljXCIsIHdlZWtkYXk6IGZvcm1hdCwgbW9udGg6IGZvcm1hdCwgeWVhcjogXCJudW1lcmljXCIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFRpbWVGb3JtYXR0ZXIgZXh0ZW5kcyBBYnN0cmFjdFRleHRGb3JtYXR0ZXIge1xyXG4gICAgcHJvdGVjdGVkIGludGVybmFsRm9ybWF0KGxhbmc6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0Y2hlczogUmVnRXhwRXhlY0FycmF5KTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UobWF0Y2hlc1sxXSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcobGFuZywgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGV4dChsYW5nOiBzdHJpbmcgfCB1bmRlZmluZWQsIHRleHQ6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBmb3JtYXR0ZXJzOiBBYnN0cmFjdFRleHRGb3JtYXR0ZXJbXSA9IFtcclxuICAgICAgICBuZXcgRGF0ZUZvcm1hdHRlcigvXFx7ezJ9REFURVxcKChcXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfSg/Olp8KD86KD86LXxcXCspXFxkezJ9OlxcZHsyfSkpKSg/OiwgPyhDT01QQUNUfExPTkd8U0hPUlQpKT9cXClcXH17Mn0vZyksXHJcbiAgICAgICAgbmV3IFRpbWVGb3JtYXR0ZXIoL1xce3syfVRJTUVcXCgoXFxkezR9LVxcZHsyfS1cXGR7Mn1UXFxkezJ9OlxcZHsyfTpcXGR7Mn0oPzpafCg/Oig/Oi18XFwrKVxcZHsyfTpcXGR7Mn0pKSlcXClcXH17Mn0vZylcclxuICAgIF07XHJcblxyXG4gICAgbGV0IHJlc3VsdCA9IHRleHQ7XHJcblxyXG4gICAgZm9yIChsZXQgZm9ybWF0dGVyIG9mIGZvcm1hdHRlcnMpIHtcclxuICAgICAgICByZXN1bHQgPSBmb3JtYXR0ZXIuZm9ybWF0KGxhbmcsIHJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBFbnVtcyBmcm9tIFwiLi9lbnVtc1wiO1xyXG5pbXBvcnQgKiBhcyBTaGFyZWQgZnJvbSBcIi4vc2hhcmVkXCI7XHJcbmltcG9ydCB7IEhvc3RDb25maWcgfSBmcm9tIFwiLi9ob3N0LWNvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlT1MoKTogYm9vbGVhbiB7XHJcbiAgICBsZXQgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblxyXG4gICAgcmV0dXJuICEhdXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpIHx8ICEhdXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpIHx8ICEhdXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSBhIFVVSUQgcHJlcGVuZGVkIHdpdGggXCJfX2FjLVwiXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFwiX19hYy1cIiArIFNoYXJlZC5VVUlELmdlbmVyYXRlKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRDaGlsZChub2RlOiBOb2RlLCBjaGlsZDogTm9kZSB8IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKGNoaWxkKSB7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN0cmluZyhvYmo6IGFueSwgZGVmYXVsdFZhbHVlPzogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiID8gb2JqIDogZGVmYXVsdFZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdW1iZXIob2JqOiBhbnksIGRlZmF1bHRWYWx1ZT86IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIiA/IG9iaiA6IGRlZmF1bHRWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbCh2YWx1ZTogYW55LCBkZWZhdWx0VmFsdWU/OiBib29sZWFuKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIHN3aXRjaCAodmFsdWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidHJ1ZVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGNhc2UgXCJmYWxzZVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZUJ5TmFtZShlbnVtVHlwZTogeyBbczogbnVtYmVyXTogc3RyaW5nIH0sIG5hbWU6IHN0cmluZykgOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgZm9yIChsZXQga2V5IGluIGVudW1UeXBlKSB7XHJcbiAgICAgICAgbGV0IGtleUFzTnVtYmVyID0gcGFyc2VJbnQoa2V5LCAxMCk7XHJcblxyXG4gICAgICAgIGlmIChrZXlBc051bWJlciA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGVudW1UeXBlW2tleV07XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleUFzTnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW0oZW51bVR5cGU6IHsgW3M6IG51bWJlcl06IHN0cmluZyB9LCBuYW1lOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBlbnVtVmFsdWUgPSBnZXRFbnVtVmFsdWVCeU5hbWUoZW51bVR5cGUsIG5hbWUpO1xyXG5cclxuICAgIHJldHVybiBlbnVtVmFsdWUgIT09IHVuZGVmaW5lZCA/IGVudW1WYWx1ZSA6IGRlZmF1bHRWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclNlcGFyYXRpb24oaG9zdENvbmZpZzogSG9zdENvbmZpZywgc2VwYXJhdGlvbkRlZmluaXRpb246IFNoYXJlZC5JU2VwYXJhdGlvbkRlZmluaXRpb24sIG9yaWVudGF0aW9uOiBFbnVtcy5PcmllbnRhdGlvbik6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgIGlmIChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nID4gMCB8fCAoc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZVRoaWNrbmVzcyAmJiBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzID4gMCkpIHtcclxuICAgICAgICBsZXQgc2VwYXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzZXBhcmF0b3IuY2xhc3NOYW1lID0gaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtXCIgKyAob3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiKSArIFwiLXNlcGFyYXRvclwiKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9yID0gc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZUNvbG9yID8gc3RyaW5nVG9Dc3NDb2xvcihzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lQ29sb3IpIDogXCJcIjtcclxuXHJcbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgaWYgKHNlcGFyYXRpb25EZWZpbml0aW9uLmxpbmVUaGlja25lc3MpIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5wYWRkaW5nVG9wID0gKHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgLyAyKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAoc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmJvcmRlckJvdHRvbSA9IHNlcGFyYXRpb25EZWZpbml0aW9uLmxpbmVUaGlja25lc3MgKyBcInB4IHNvbGlkIFwiICsgY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUuaGVpZ2h0ID0gc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNlcGFyYXRpb25EZWZpbml0aW9uLmxpbmVUaGlja25lc3MpIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5wYWRkaW5nTGVmdCA9IChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUubWFyZ2luUmlnaHQgPSAoc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmJvcmRlclJpZ2h0ID0gc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZVRoaWNrbmVzcyArIFwicHggc29saWQgXCIgKyBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS53aWR0aCA9IHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXBhcmF0b3I7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9Dc3NDb2xvcihjb2xvcjogc3RyaW5nIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgIGxldCByZWdFeCA9IC8jKFswLTlBLUZdezJ9KShbMC05QS1GXXsyfSkoWzAtOUEtRl17Mn0pKFswLTlBLUZdezJ9KT8vZ2k7XHJcbiAgICAgICAgbGV0IG1hdGNoZXMgPSByZWdFeC5leGVjKGNvbG9yKTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlc1s0XSkge1xyXG4gICAgICAgICAgICBsZXQgYSA9IHBhcnNlSW50KG1hdGNoZXNbMV0sIDE2KSAvIDI1NTtcclxuICAgICAgICAgICAgbGV0IHIgPSBwYXJzZUludChtYXRjaGVzWzJdLCAxNik7XHJcbiAgICAgICAgICAgIGxldCBnID0gcGFyc2VJbnQobWF0Y2hlc1szXSwgMTYpO1xyXG4gICAgICAgICAgICBsZXQgYiA9IHBhcnNlSW50KG1hdGNoZXNbNF0sIDE2KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcInJnYmEoXCIgKyByICsgXCIsXCIgKyBnICsgXCIsXCIgKyBiICsgXCIsXCIgKyBhICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb2xvcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgbWF4SGVpZ2h0OiBudW1iZXIsXHJcbiAgICBsaW5lSGVpZ2h0PzogbnVtYmVyKSB7XHJcbiAgICBsZXQgZml0cyA9ICgpID0+IHtcclxuICAgICAgICAvLyBBbGxvdyBhIG9uZSBwaXhlbCBvdmVyZmxvdyB0byBhY2NvdW50IGZvciByb3VuZGluZyBkaWZmZXJlbmNlc1xyXG4gICAgICAgIC8vIGJldHdlZW4gYnJvd3NlcnNcclxuICAgICAgICByZXR1cm4gbWF4SGVpZ2h0IC0gZWxlbWVudC5zY3JvbGxIZWlnaHQgPj0gLTEuMDtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGZpdHMoKSkgcmV0dXJuO1xyXG5cclxuICAgIGxldCBmdWxsVGV4dCA9IGVsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgbGV0IHRydW5jYXRlQXQgPSAoaWR4OiBhbnkpID0+IHtcclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGZ1bGxUZXh0LnN1YnN0cmluZygwLCBpZHgpICsgJy4uLic7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGJyZWFrYWJsZUluZGljZXMgPSBmaW5kQnJlYWthYmxlSW5kaWNlcyhmdWxsVGV4dCk7XHJcbiAgICBsZXQgbG8gPSAwO1xyXG4gICAgbGV0IGhpID0gYnJlYWthYmxlSW5kaWNlcy5sZW5ndGg7XHJcbiAgICBsZXQgYmVzdEJyZWFrSWR4ID0gMDtcclxuXHJcbiAgICAvLyBEbyBhIGJpbmFyeSBzZWFyY2ggZm9yIHRoZSBsb25nZXN0IHN0cmluZyB0aGF0IGZpdHNcclxuICAgIHdoaWxlIChsbyA8IGhpKSB7XHJcbiAgICAgICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoKGxvICsgaGkpIC8gMik7XHJcbiAgICAgICAgdHJ1bmNhdGVBdChicmVha2FibGVJbmRpY2VzW21pZF0pO1xyXG5cclxuICAgICAgICBpZiAoZml0cygpKSB7XHJcbiAgICAgICAgICAgIGJlc3RCcmVha0lkeCA9IGJyZWFrYWJsZUluZGljZXNbbWlkXTtcclxuICAgICAgICAgICAgbG8gPSBtaWQgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGkgPSBtaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRydW5jYXRlQXQoYmVzdEJyZWFrSWR4KTtcclxuXHJcbiAgICAvLyBJZiB3ZSBoYXZlIGV4dHJhIHJvb20sIHRyeSB0byBleHBhbmQgdGhlIHN0cmluZyBsZXR0ZXIgYnkgbGV0dGVyXHJcbiAgICAvLyAoY292ZXJzIHRoZSBjYXNlIHdoZXJlIHdlIGhhdmUgdG8gYnJlYWsgaW4gdGhlIG1pZGRsZSBvZiBhIGxvbmcgd29yZClcclxuICAgIGlmIChsaW5lSGVpZ2h0ICYmIG1heEhlaWdodCAtIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID49IGxpbmVIZWlnaHQgLSAxLjApIHtcclxuICAgICAgICBsZXQgaWR4ID0gZmluZE5leHRDaGFyYWN0ZXIoZnVsbFRleHQsIGJlc3RCcmVha0lkeCk7XHJcblxyXG4gICAgICAgIHdoaWxlIChpZHggPCBmdWxsVGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdHJ1bmNhdGVBdChpZHgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdEJyZWFrSWR4ID0gaWR4O1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gZmluZE5leHRDaGFyYWN0ZXIoZnVsbFRleHQsIGlkeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ1bmNhdGVBdChiZXN0QnJlYWtJZHgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kQnJlYWthYmxlSW5kaWNlcyhodG1sOiBzdHJpbmcpOiBudW1iZXJbXSB7XHJcbiAgICBsZXQgcmVzdWx0czogbnVtYmVyW10gPSBbXTtcclxuICAgIGxldCBpZHggPSBmaW5kTmV4dENoYXJhY3RlcihodG1sLCAtMSk7XHJcblxyXG4gICAgd2hpbGUgKGlkeCA8IGh0bWwubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKGh0bWxbaWR4XSA9PSAnICcpIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGlkeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZHggPSBmaW5kTmV4dENoYXJhY3RlcihodG1sLCBpZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kTmV4dENoYXJhY3RlcihodG1sOiBzdHJpbmcsIGN1cnJJZHg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBjdXJySWR4ICs9IDE7XHJcblxyXG4gICAgLy8gSWYgd2UgZm91bmQgdGhlIHN0YXJ0IG9mIGFuIEhUTUwgdGFnLCBrZWVwIGFkdmFuY2luZyB1bnRpbCB3ZSBnZXRcclxuICAgIC8vIHBhc3QgaXQsIHNvIHdlIGRvbid0IGVuZCB1cCB0cnVuY2F0aW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHRhZ1xyXG4gICAgd2hpbGUgKGN1cnJJZHggPCBodG1sLmxlbmd0aCAmJiBodG1sW2N1cnJJZHhdID09ICc8Jykge1xyXG4gICAgICAgIHdoaWxlIChjdXJySWR4IDwgaHRtbC5sZW5ndGggJiYgaHRtbFtjdXJySWR4KytdICE9ICc+Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGN1cnJJZHg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXRTdGF0dXMoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbnRhaW5lckVuZDogbnVtYmVyKTogRW51bXMuQ29udGFpbmVyRml0U3RhdHVzIHtcclxuICAgIGxldCBzdGFydCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG4gICAgbGV0IGVuZCA9IHN0YXJ0ICsgZWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgaWYgKGVuZCA8PSBjb250YWluZXJFbmQpIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLkZ1bGx5SW5Db250YWluZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChzdGFydCA8IGNvbnRhaW5lckVuZCkge1xyXG4gICAgICAgIHJldHVybiBFbnVtcy5Db250YWluZXJGaXRTdGF0dXMuT3ZlcmZsb3dpbmc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLkZ1bGx5T3V0T2ZDb250YWluZXI7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==